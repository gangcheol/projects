<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.4.551">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="GC">
<meta name="dcterms.date" content="2023-11-02">

<title>Projects - 03. Prototype</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="../../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../../">
<link href="../../../posts/mini projects/AIVLE/2023-10-16-00. 문의 유형 자동분류 모델링 생성.html" rel="next">
<link href="../../../posts/mini projects/병원선정 솔루션/2023-11-01-02. Modeling.html" rel="prev">
<script src="../../../site_libs/quarto-html/quarto.js"></script>
<script src="../../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script src="../../../site_libs/quarto-contrib/videojs/video.min.js"></script>
<link href="../../../site_libs/quarto-contrib/videojs/video-js.css" rel="stylesheet">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


<link rel="stylesheet" href="../../../styles.css">
</head>

<body class="nav-sidebar docked nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top quarto-banner">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="../../../index.html">
    <span class="navbar-title">Projects</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/gangcheol/"> <i class="bi bi-github" role="img">
</i> 
<span class="menu-text"></span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
          <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="../../../posts/2023-07-31-00.intro.html">Posts</a></li><li class="breadcrumb-item">mini projects</li><li class="breadcrumb-item"><a href="../../../posts/mini projects/병원선정 솔루션/2023-10-30-00. 데이터 가져오기.html">병원선정 솔루션</a></li><li class="breadcrumb-item"><a href="../../../posts/mini projects/병원선정 솔루션/2023-11-02-03. Prototype.html">03. Prototype</a></li></ol></nav>
        <a class="flex-grow-1" role="button" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
      <button type="button" class="btn quarto-search-button" aria-label="" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<header id="title-block-header" class="quarto-title-block default page-columns page-full"><nav class="quarto-page-breadcrumbs quarto-title-breadcrumbs d-none d-lg-block" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="../../../posts/2023-07-31-00.intro.html">Posts</a></li><li class="breadcrumb-item">mini projects</li><li class="breadcrumb-item"><a href="../../../posts/mini projects/병원선정 솔루션/2023-10-30-00. 데이터 가져오기.html">병원선정 솔루션</a></li><li class="breadcrumb-item"><a href="../../../posts/mini projects/병원선정 솔루션/2023-11-02-03. Prototype.html">03. Prototype</a></li></ol></nav>
  <div class="quarto-title-banner page-columns page-full">
    <div class="quarto-title column-body">
      <h1 class="title">03. Prototype</h1>
                      </div>
  </div>
    
  
  <div class="quarto-title-meta">

      <div>
      <div class="quarto-title-meta-heading">Author</div>
      <div class="quarto-title-meta-contents">
               <p>GC </p>
            </div>
    </div>
      
      <div>
      <div class="quarto-title-meta-heading">Published</div>
      <div class="quarto-title-meta-contents">
        <p class="date">November 2, 2023</p>
      </div>
    </div>
    
      
    </div>
    
  
  </header><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation docked overflow-auto">
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../about.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><strong>About me</strong></span></a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true">
 <span class="menu-text">Posts</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../posts/2023-07-31-00.intro.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">00. quarto blog</span></a>
  </div>
</li>
          <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" aria-expanded="false">
 <span class="menu-text">big projects</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-2" class="collapse list-unstyled sidebar-section depth2 ">  
          <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" aria-expanded="false">
 <span class="menu-text">AI PORT</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-3" class="collapse list-unstyled sidebar-section depth3 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../posts/big projects/AI PORT/2023-12-28-01. model train.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">01. model train</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../posts/big projects/AI PORT/2023-12-28-02. model fit &amp; save.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">02. model fit &amp; save</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../posts/big projects/AI PORT/2024-01-01-03. model theory.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">03. model theory</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../posts/big projects/AI PORT/2024-01-05.04. prototype.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">04. prototype</span></a>
  </div>
</li>
      </ul>
  </li>
          <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" aria-expanded="false">
 <span class="menu-text">Do, Nation</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-4" class="collapse list-unstyled sidebar-section depth3 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../posts/big projects/Do, Nation/2023-11-01-Extra. model test.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Extra. model test</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../posts/big projects/Do, Nation/2023-11-05-00. 기획서.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">00. 기획서</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../posts/big projects/Do, Nation/2023-11-06-01. 데이터 수집.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">01. 데이터 수집</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../posts/big projects/Do, Nation/2023-11-09-02. 데이터 전처리.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">02. 데이터 전처리</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../posts/big projects/Do, Nation/2023-11-10-03. 토픽모델링(BERTopic).html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">03. 토픽 모델링(BERTopic)</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../posts/big projects/Do, Nation/2023-11-15-04. draw map 최종.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">04. 지도 시각화</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../posts/big projects/Do, Nation/2023-11-16-05. summary.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">05. summary</span></a>
  </div>
</li>
      </ul>
  </li>
          <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-5" aria-expanded="false">
 <span class="menu-text">Untitled1</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-5" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-5" class="collapse list-unstyled sidebar-section depth3 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../posts/big projects/untitled1/00. EDA (1).html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">00. EDA (1)</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../posts/big projects/untitled1/01. 데이터 셋 합치기.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">01. 데이터 셋 합치기</span></a>
  </div>
</li>
      </ul>
  </li>
          <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-6" aria-expanded="false">
 <span class="menu-text">Untitled2</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-6" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-6" class="collapse list-unstyled sidebar-section depth3 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../posts/big projects/untitled2/00. EDA (1).html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">00. EDA (1)</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../posts/big projects/untitled2/01. key 값 생성.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">01. key 값 생성 (1)</span></a>
  </div>
</li>
      </ul>
  </li>
      </ul>
  </li>
          <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-7" aria-expanded="true">
 <span class="menu-text">mini projects</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-7" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-7" class="collapse list-unstyled sidebar-section depth2 show">  
          <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-8" aria-expanded="true">
 <span class="menu-text">병원선정 솔루션</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-8" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-8" class="collapse list-unstyled sidebar-section depth3 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../posts/mini projects/병원선정 솔루션/2023-10-30-00. 데이터 가져오기.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">00. 데이터 가져오기</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../posts/mini projects/병원선정 솔루션/2023-10-31-01. EDA.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">01. EDA</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../posts/mini projects/병원선정 솔루션/2023-11-01-02. Modeling.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">02. Modeling</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../posts/mini projects/병원선정 솔루션/2023-11-02-03. Prototype.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text">03. Prototype</span></a>
  </div>
</li>
      </ul>
  </li>
          <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-9" aria-expanded="false">
 <span class="menu-text">AIVLE</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-9" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-9" class="collapse list-unstyled sidebar-section depth3 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../posts/mini projects/AIVLE/2023-10-16-00. 문의 유형 자동분류 모델링 생성.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">00. 문의 유형 자동분류 모델링 생성</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../posts/mini projects/AIVLE/2023-10-17-01. 키워드 시각화 및 교육 인사이트 도출.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">01. 키워드 시각화 및 교육 인사이트 도출</span></a>
  </div>
</li>
      </ul>
  </li>
          <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-10" aria-expanded="false">
 <span class="menu-text">CCTV 차량인식</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-10" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-10" class="collapse list-unstyled sidebar-section depth3 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../posts/mini projects/CCTV 차량인식/2023-10-23-00. 실시간 신호등 제어.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">00. 실시간 신호등 제어</span></a>
  </div>
</li>
      </ul>
  </li>
          <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-11" aria-expanded="false">
 <span class="menu-text">Fine Apple</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-11" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-11" class="collapse list-unstyled sidebar-section depth3 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../posts/mini projects/Fine Apple/2023-09-26-00. EDA.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">00. EDA</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../posts/mini projects/Fine Apple/2023-09-26-01. modeling.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">01. modeling</span></a>
  </div>
</li>
      </ul>
  </li>
          <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-12" aria-expanded="false">
 <span class="menu-text">Fine Watch</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-12" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-12" class="collapse list-unstyled sidebar-section depth3 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../posts/mini projects/Fine Watch/2023-09-20-00 . EDA , modeling.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">00. EDA &amp; Modeling</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../posts/mini projects/Fine Watch/2023-09-20-00. model tuning, save.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">01. model tuning &amp; save</span></a>
  </div>
</li>
      </ul>
  </li>
      </ul>
  </li>
          <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-13" aria-expanded="false">
 <span class="menu-text">Publications</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-13" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-13" class="collapse list-unstyled sidebar-section depth2 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../posts/publications/2021-10-05-P1.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Paper 1</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../posts/publications/2023-02-22-P2.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Paper 2</span></a>
  </div>
</li>
      </ul>
  </li>
      </ul>
  </li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#intro" id="toc-intro" class="nav-link active" data-scroll-target="#intro">Intro</a></li>
  <li><a href="#app.py" id="toc-app.py" class="nav-link" data-scroll-target="#app.py">app.py</a></li>
  <li><a href="#시연-영상" id="toc-시연-영상" class="nav-link" data-scroll-target="#시연-영상">시연 영상</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content quarto-banner-title-block" id="quarto-document-content">





<section id="intro" class="level1">
<h1>Intro</h1>
<p><code>1</code> 해당 프로토타입은 <code>streamlit</code> 모듈을 활용하여 구현함</p>
<p><code>2</code> 첨부한 app.py 파일을 터미널에서 실행하여 프로토타입 확인</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb1-1"><a href="#cb1-1"></a>streamlit run app.py</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="app.py" class="level1">
<h1>app.py</h1>
<div id="084d233a-8c07-4ef5-a2ea-f2499311532e" class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb2-1"><a href="#cb2-1"></a><span class="co"># 라이브러리 불러오기 </span></span>
<span id="cb2-2"><a href="#cb2-2"></a></span>
<span id="cb2-3"><a href="#cb2-3"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb2-4"><a href="#cb2-4"></a><span class="im">import</span> numpy <span class="im">as</span> np</span>
<span id="cb2-5"><a href="#cb2-5"></a><span class="im">import</span> datetime</span>
<span id="cb2-6"><a href="#cb2-6"></a><span class="im">import</span> joblib</span>
<span id="cb2-7"><a href="#cb2-7"></a><span class="im">from</span> keras.models <span class="im">import</span> load_model</span>
<span id="cb2-8"><a href="#cb2-8"></a><span class="im">from</span> haversine <span class="im">import</span> haversine</span>
<span id="cb2-9"><a href="#cb2-9"></a><span class="im">from</span> urllib.parse <span class="im">import</span> quote</span>
<span id="cb2-10"><a href="#cb2-10"></a><span class="im">import</span> streamlit <span class="im">as</span> st</span>
<span id="cb2-11"><a href="#cb2-11"></a><span class="im">from</span> streamlit_folium <span class="im">import</span> st_folium</span>
<span id="cb2-12"><a href="#cb2-12"></a><span class="im">import</span> folium</span>
<span id="cb2-13"><a href="#cb2-13"></a><span class="im">import</span> branca</span>
<span id="cb2-14"><a href="#cb2-14"></a><span class="im">from</span> geopy.geocoders <span class="im">import</span> Nominatim</span>
<span id="cb2-15"><a href="#cb2-15"></a><span class="im">import</span> ssl</span>
<span id="cb2-16"><a href="#cb2-16"></a><span class="im">from</span> urllib.request <span class="im">import</span> urlopen</span>
<span id="cb2-17"><a href="#cb2-17"></a></span>
<span id="cb2-18"><a href="#cb2-18"></a></span>
<span id="cb2-19"><a href="#cb2-19"></a><span class="co"># -------------------- ▼ 필요 함수 생성 코딩 Start ▼ --------------------</span></span>
<span id="cb2-20"><a href="#cb2-20"></a></span>
<span id="cb2-21"><a href="#cb2-21"></a></span>
<span id="cb2-22"><a href="#cb2-22"></a><span class="co"># geocoding : 거리주소 -&gt; 위도/경도 변환 함수</span></span>
<span id="cb2-23"><a href="#cb2-23"></a><span class="co"># Nominatim 파라미터 : user_agent = 'South Korea', timeout=None</span></span>
<span id="cb2-24"><a href="#cb2-24"></a><span class="co"># 리턴 변수(위도,경도) : lati, long</span></span>
<span id="cb2-25"><a href="#cb2-25"></a><span class="co"># 참고: https://m.blog.naver.com/rackhunson/222403071709</span></span>
<span id="cb2-26"><a href="#cb2-26"></a></span>
<span id="cb2-27"><a href="#cb2-27"></a><span class="kw">def</span> geocoding(address):</span>
<span id="cb2-28"><a href="#cb2-28"></a>    geolocoder <span class="op">=</span> Nominatim(user_agent <span class="op">=</span> <span class="st">'South Korea'</span>, timeout<span class="op">=</span><span class="va">None</span>)</span>
<span id="cb2-29"><a href="#cb2-29"></a>    geo <span class="op">=</span> geolocoder.geocode(address)</span>
<span id="cb2-30"><a href="#cb2-30"></a>    lati <span class="op">=</span> geo.latitude</span>
<span id="cb2-31"><a href="#cb2-31"></a>    <span class="bu">long</span> <span class="op">=</span> geo.longitude</span>
<span id="cb2-32"><a href="#cb2-32"></a>    <span class="cf">return</span> lati, <span class="bu">long</span></span>
<span id="cb2-33"><a href="#cb2-33"></a></span>
<span id="cb2-34"><a href="#cb2-34"></a></span>
<span id="cb2-35"><a href="#cb2-35"></a><span class="co"># preprocessing : '발열', '고혈압', '저혈압' 조건에 따른 질병 전처리 함수(미션3 참고)</span></span>
<span id="cb2-36"><a href="#cb2-36"></a><span class="co"># 리턴 변수(중증질환,증상) : X, Y</span></span>
<span id="cb2-37"><a href="#cb2-37"></a><span class="kw">def</span> preprocessing(desease):</span>
<span id="cb2-38"><a href="#cb2-38"></a>    </span>
<span id="cb2-39"><a href="#cb2-39"></a>    desease[<span class="st">'발열'</span>] <span class="op">=</span> [<span class="dv">1</span> <span class="cf">if</span> x <span class="op">&gt;=</span> <span class="dv">37</span> <span class="cf">else</span> <span class="dv">0</span> <span class="cf">for</span> x <span class="kw">in</span> desease[<span class="st">'체온'</span>]]</span>
<span id="cb2-40"><a href="#cb2-40"></a>    desease[<span class="st">'고혈압'</span>] <span class="op">=</span> [<span class="dv">1</span> <span class="cf">if</span> x <span class="op">&gt;=</span> <span class="dv">140</span> <span class="cf">else</span> <span class="dv">0</span> <span class="cf">for</span> x <span class="kw">in</span> desease[<span class="st">'수축기 혈압'</span>]]</span>
<span id="cb2-41"><a href="#cb2-41"></a>    desease[<span class="st">'저혈압'</span>] <span class="op">=</span> [<span class="dv">1</span> <span class="cf">if</span> x <span class="op">&lt;=</span> <span class="dv">90</span> <span class="cf">else</span> <span class="dv">0</span> <span class="cf">for</span> x <span class="kw">in</span> desease[<span class="st">'수축기 혈압'</span>]]</span>
<span id="cb2-42"><a href="#cb2-42"></a></span>
<span id="cb2-43"><a href="#cb2-43"></a>    Y <span class="op">=</span> desease[<span class="st">'중증질환'</span>]</span>
<span id="cb2-44"><a href="#cb2-44"></a>    X <span class="op">=</span> desease[[<span class="st">'체온'</span>, <span class="st">'수축기 혈압'</span>, <span class="st">'이완기 혈압'</span>, <span class="st">'호흡 곤란'</span>, <span class="st">'간헐성 경련'</span>, <span class="st">'설사'</span>, <span class="st">'기침'</span>, <span class="st">'출혈'</span>, <span class="st">'통증'</span>, <span class="st">'만지면 아프다'</span>,</span>
<span id="cb2-45"><a href="#cb2-45"></a>                 <span class="st">'무감각'</span>, <span class="st">'마비'</span>, <span class="st">'현기증'</span>, <span class="st">'졸도'</span>, <span class="st">'말이 어눌해졌다'</span>, <span class="st">'시력이 흐려짐'</span>, <span class="st">'발열'</span>, <span class="st">'고혈압'</span>, <span class="st">'저혈압'</span>]]</span>
<span id="cb2-46"><a href="#cb2-46"></a></span>
<span id="cb2-47"><a href="#cb2-47"></a>    <span class="cf">return</span> X, Y</span>
<span id="cb2-48"><a href="#cb2-48"></a></span>
<span id="cb2-49"><a href="#cb2-49"></a></span>
<span id="cb2-50"><a href="#cb2-50"></a><span class="co"># predict_disease : AI 모델 중증질환 예측 함수 (미션1 참고)</span></span>
<span id="cb2-51"><a href="#cb2-51"></a><span class="co"># 사전 저장된 모델 파일 필요(119_model_XGC.pkl)</span></span>
<span id="cb2-52"><a href="#cb2-52"></a><span class="co"># preprocessing 함수 필요 </span></span>
<span id="cb2-53"><a href="#cb2-53"></a><span class="co"># 리턴 변수(4대 중증 예측) : sym_list[pred_y_XGC[0]] </span></span>
<span id="cb2-54"><a href="#cb2-54"></a><span class="kw">def</span> predict_disease(patient_data):</span>
<span id="cb2-55"><a href="#cb2-55"></a>    </span>
<span id="cb2-56"><a href="#cb2-56"></a>    sym_list <span class="op">=</span> [<span class="st">'뇌경색'</span>, <span class="st">'뇌출혈'</span>, <span class="st">'복부손상'</span>, <span class="st">'심근경색'</span>]</span>
<span id="cb2-57"><a href="#cb2-57"></a>    test_df <span class="op">=</span> pd.DataFrame(patient_data)</span>
<span id="cb2-58"><a href="#cb2-58"></a>    test_x, test_y <span class="op">=</span> preprocessing(test_df)</span>
<span id="cb2-59"><a href="#cb2-59"></a>    model_XGC <span class="op">=</span> joblib.load(<span class="st">'./119_model_XGC.pkl'</span>)</span>
<span id="cb2-60"><a href="#cb2-60"></a>    pred_y_XGC <span class="op">=</span> model_XGC.predict(test_x)</span>
<span id="cb2-61"><a href="#cb2-61"></a>    <span class="cf">return</span> sym_list[pred_y_XGC[<span class="dv">0</span>]]</span>
<span id="cb2-62"><a href="#cb2-62"></a></span>
<span id="cb2-63"><a href="#cb2-63"></a></span>
<span id="cb2-64"><a href="#cb2-64"></a><span class="co"># find_hospital : 실시간 병원 정보 API 데이터 가져오기 (미션1 참고)</span></span>
<span id="cb2-65"><a href="#cb2-65"></a><span class="co"># 리턴 변수(거리, 거리구분) : distance_df</span></span>
<span id="cb2-66"><a href="#cb2-66"></a><span class="kw">def</span> find_hospital(special_m, lati, <span class="bu">long</span>):</span>
<span id="cb2-67"><a href="#cb2-67"></a></span>
<span id="cb2-68"><a href="#cb2-68"></a>    context<span class="op">=</span>ssl.create_default_context()</span>
<span id="cb2-69"><a href="#cb2-69"></a>    context.set_ciphers(<span class="st">"DEFAULT"</span>)</span>
<span id="cb2-70"><a href="#cb2-70"></a>      </span>
<span id="cb2-71"><a href="#cb2-71"></a>    <span class="co">#  [국립중앙의료원 - 전국응급의료기관 조회 서비스] 활용을 위한 개인 일반 인증키(Encoding) 저장</span></span>
<span id="cb2-72"><a href="#cb2-72"></a>    key <span class="op">=</span> <span class="st">"gwBkTKBuhZgVDIrEv%2BnO62XD2qkefBNpFtSVAjpYNvYFYtJD72O8sEa</span><span class="sc">%2F</span><span class="st">5oY2yNCQJgzUaO</span><span class="sc">%2F</span><span class="st">T</span><span class="sc">%2F</span><span class="st">i3ZR61TIUSYtQ%3D%3D"</span></span>
<span id="cb2-73"><a href="#cb2-73"></a></span>
<span id="cb2-74"><a href="#cb2-74"></a>    <span class="co"># city = 대구광역시, 인코딩 필요</span></span>
<span id="cb2-75"><a href="#cb2-75"></a>    city <span class="op">=</span> quote(<span class="st">"대구광역시"</span>)</span>
<span id="cb2-76"><a href="#cb2-76"></a>    </span>
<span id="cb2-77"><a href="#cb2-77"></a>    <span class="co"># 미션1에서 저장한 병원정보 파일 불러오기 </span></span>
<span id="cb2-78"><a href="#cb2-78"></a>    solution_df <span class="op">=</span> pd.read_csv(<span class="st">'./daegu_hospital_list.csv'</span>)</span>
<span id="cb2-79"><a href="#cb2-79"></a></span>
<span id="cb2-80"><a href="#cb2-80"></a>    <span class="co"># 응급실 실시간 가용병상 조회</span></span>
<span id="cb2-81"><a href="#cb2-81"></a>    url_realtime <span class="op">=</span> <span class="st">'https://apis.data.go.kr/B552657/ErmctInfoInqireService/getEmrrmRltmUsefulSckbdInfoInqire'</span> <span class="op">+</span> <span class="st">'?serviceKey='</span> <span class="op">+</span> key <span class="op">+</span> <span class="st">'&amp;STAGE1='</span> <span class="op">+</span> city <span class="op">+</span> <span class="st">'&amp;pageNo=1&amp;numOfRows=100'</span></span>
<span id="cb2-82"><a href="#cb2-82"></a>    result <span class="op">=</span> urlopen(url_realtime, context<span class="op">=</span>context)</span>
<span id="cb2-83"><a href="#cb2-83"></a>    emrRealtime <span class="op">=</span> pd.read_xml(result, xpath<span class="op">=</span><span class="st">'.//item'</span>)</span>
<span id="cb2-84"><a href="#cb2-84"></a>    solution_df <span class="op">=</span> pd.merge(solution_df, emrRealtime[[<span class="st">'hpid'</span>, <span class="st">'hvec'</span>, <span class="st">'hvoc'</span>]])</span>
<span id="cb2-85"><a href="#cb2-85"></a></span>
<span id="cb2-86"><a href="#cb2-86"></a>    <span class="co"># 응급실 실시간 중증질환 수용 가능 여부</span></span>
<span id="cb2-87"><a href="#cb2-87"></a>    url_acpt <span class="op">=</span> <span class="st">'https://apis.data.go.kr/B552657/ErmctInfoInqireService/getSrsillDissAceptncPosblInfoInqire'</span> <span class="op">+</span> <span class="st">'?serviceKey='</span> <span class="op">+</span> key <span class="op">+</span> <span class="st">'&amp;STAGE1='</span> <span class="op">+</span> city <span class="op">+</span> <span class="st">'&amp;pageNo=1&amp;numOfRows=100'</span></span>
<span id="cb2-88"><a href="#cb2-88"></a>    result <span class="op">=</span> urlopen(url_acpt, context<span class="op">=</span>context)</span>
<span id="cb2-89"><a href="#cb2-89"></a>    emrAcpt <span class="op">=</span> pd.read_xml(result, xpath<span class="op">=</span><span class="st">'.//item'</span>)</span>
<span id="cb2-90"><a href="#cb2-90"></a>    emrAcpt <span class="op">=</span> emrAcpt.rename(columns<span class="op">=</span>{<span class="st">'dutyName'</span>:<span class="st">'hpid'</span>})</span>
<span id="cb2-91"><a href="#cb2-91"></a>    solution_df <span class="op">=</span> pd.merge(solution_df,</span>
<span id="cb2-92"><a href="#cb2-92"></a>                           emrAcpt[[<span class="st">'hpid'</span>, <span class="st">'MKioskTy1'</span>, <span class="st">'MKioskTy2'</span>, <span class="st">'MKioskTy3'</span>, <span class="st">'MKioskTy4'</span>, <span class="st">'MKioskTy5'</span>, <span class="st">'MKioskTy7'</span>,</span>
<span id="cb2-93"><a href="#cb2-93"></a>                                <span class="st">'MKioskTy8'</span>, <span class="st">'MKioskTy9'</span>, <span class="st">'MKioskTy10'</span>, <span class="st">'MKioskTy11'</span>]])</span>
<span id="cb2-94"><a href="#cb2-94"></a></span>
<span id="cb2-95"><a href="#cb2-95"></a>    <span class="co"># 컬럼명 변경</span></span>
<span id="cb2-96"><a href="#cb2-96"></a>    column_change <span class="op">=</span> {<span class="st">'hpid'</span>: <span class="st">'병원코드'</span>,</span>
<span id="cb2-97"><a href="#cb2-97"></a>                     <span class="st">'dutyName'</span>: <span class="st">'병원명'</span>,</span>
<span id="cb2-98"><a href="#cb2-98"></a>                     <span class="st">'dutyAddr'</span>: <span class="st">'주소'</span>,</span>
<span id="cb2-99"><a href="#cb2-99"></a>                     <span class="st">'dutyTel3'</span>: <span class="st">'응급연락처'</span>,</span>
<span id="cb2-100"><a href="#cb2-100"></a>                     <span class="st">'wgs84Lat'</span>: <span class="st">'위도'</span>,</span>
<span id="cb2-101"><a href="#cb2-101"></a>                     <span class="st">'wgs84Lon'</span>: <span class="st">'경도'</span>,</span>
<span id="cb2-102"><a href="#cb2-102"></a>                     <span class="st">'hperyn'</span>: <span class="st">'응급실수'</span>,</span>
<span id="cb2-103"><a href="#cb2-103"></a>                     <span class="st">'hpopyn'</span>: <span class="st">'수술실수'</span>,</span>
<span id="cb2-104"><a href="#cb2-104"></a>                     <span class="st">'hvec'</span>: <span class="st">'가용응급실수'</span>,</span>
<span id="cb2-105"><a href="#cb2-105"></a>                     <span class="st">'hvoc'</span>: <span class="st">'가용수술실수'</span>,</span>
<span id="cb2-106"><a href="#cb2-106"></a>                     <span class="st">'MKioskTy1'</span>: <span class="st">'뇌출혈'</span>,</span>
<span id="cb2-107"><a href="#cb2-107"></a>                     <span class="st">'MKioskTy2'</span>: <span class="st">'뇌경색'</span>,</span>
<span id="cb2-108"><a href="#cb2-108"></a>                     <span class="st">'MKioskTy3'</span>: <span class="st">'심근경색'</span>,</span>
<span id="cb2-109"><a href="#cb2-109"></a>                     <span class="st">'MKioskTy4'</span>: <span class="st">'복부손상'</span>,</span>
<span id="cb2-110"><a href="#cb2-110"></a>                     <span class="st">'MKioskTy5'</span>: <span class="st">'사지접합'</span>,</span>
<span id="cb2-111"><a href="#cb2-111"></a>                     <span class="st">'MKioskTy7'</span>: <span class="st">'응급투석'</span>,</span>
<span id="cb2-112"><a href="#cb2-112"></a>                     <span class="st">'MKioskTy8'</span>: <span class="st">'조산산모'</span>,</span>
<span id="cb2-113"><a href="#cb2-113"></a>                     <span class="st">'MKioskTy10'</span>: <span class="st">'신생아'</span>,</span>
<span id="cb2-114"><a href="#cb2-114"></a>                     <span class="st">'MKioskTy11'</span>: <span class="st">'중증화상'</span></span>
<span id="cb2-115"><a href="#cb2-115"></a>                     }</span>
<span id="cb2-116"><a href="#cb2-116"></a>    solution_df <span class="op">=</span> solution_df.rename(columns<span class="op">=</span>column_change)</span>
<span id="cb2-117"><a href="#cb2-117"></a>    solution_df <span class="op">=</span> solution_df.replace({<span class="st">"정보미제공"</span>: <span class="st">"N"</span>})</span>
<span id="cb2-118"><a href="#cb2-118"></a></span>
<span id="cb2-119"><a href="#cb2-119"></a>    <span class="co"># 응급실 가용율, 포화도 추가</span></span>
<span id="cb2-120"><a href="#cb2-120"></a>    </span>
<span id="cb2-121"><a href="#cb2-121"></a>    solution_df.loc[solution_df[<span class="st">'가용응급실수'</span>] <span class="op">&lt;</span> <span class="dv">0</span>, <span class="st">'가용응급실수'</span>] <span class="op">=</span> <span class="dv">0</span></span>
<span id="cb2-122"><a href="#cb2-122"></a>    solution_df.loc[solution_df[<span class="st">'가용수술실수'</span>] <span class="op">&lt;</span> <span class="dv">0</span>, <span class="st">'가용수술실수'</span>] <span class="op">=</span> <span class="dv">0</span></span>
<span id="cb2-123"><a href="#cb2-123"></a></span>
<span id="cb2-124"><a href="#cb2-124"></a>    solution_df[<span class="st">'응급실가용율'</span>] <span class="op">=</span> <span class="bu">round</span>(solution_df[<span class="st">'가용응급실수'</span>] <span class="op">/</span> solution_df[<span class="st">'응급실수'</span>], <span class="dv">2</span>)</span>
<span id="cb2-125"><a href="#cb2-125"></a>    solution_df.loc[solution_df[<span class="st">'응급실가용율'</span>] <span class="op">&gt;</span> <span class="dv">1</span>,<span class="st">'응급실가용율'</span>]<span class="op">=</span><span class="dv">1</span></span>
<span id="cb2-126"><a href="#cb2-126"></a>    solution_df[<span class="st">'응급실포화도'</span>] <span class="op">=</span> pd.cut(solution_df[<span class="st">'응급실가용율'</span>], bins<span class="op">=</span>[<span class="op">-</span><span class="dv">1</span>, <span class="fl">0.1</span>, <span class="fl">0.3</span>, <span class="fl">0.6</span>, <span class="dv">1</span>], labels<span class="op">=</span>[<span class="st">'불가'</span>, <span class="st">'혼잡'</span>, <span class="st">'보통'</span>, <span class="st">'원활'</span>])</span>
<span id="cb2-127"><a href="#cb2-127"></a></span>
<span id="cb2-128"><a href="#cb2-128"></a>    <span class="co">### 중증 질환 수용 가능한 병원 추출</span></span>
<span id="cb2-129"><a href="#cb2-129"></a>    <span class="co">### 미션1 상황에 따른 병원 데이터 추출하기 참고</span></span>
<span id="cb2-130"><a href="#cb2-130"></a></span>
<span id="cb2-131"><a href="#cb2-131"></a>    <span class="cf">if</span> special_m <span class="op">==</span> <span class="st">"중증 아님"</span>:</span>
<span id="cb2-132"><a href="#cb2-132"></a>        condition1 <span class="op">=</span> (solution_df[<span class="st">'응급실포화도'</span>] <span class="op">!=</span> <span class="st">'불가'</span>)</span>
<span id="cb2-133"><a href="#cb2-133"></a>        distance_df <span class="op">=</span> solution_df[condition1].copy()</span>
<span id="cb2-134"><a href="#cb2-134"></a>    <span class="cf">else</span>:</span>
<span id="cb2-135"><a href="#cb2-135"></a>        condition1 <span class="op">=</span> (solution_df[special_m] <span class="op">==</span> <span class="st">'Y'</span>) <span class="op">&amp;</span> (solution_df[<span class="st">'가용수술실수'</span>] <span class="op">&gt;=</span> <span class="dv">1</span>)</span>
<span id="cb2-136"><a href="#cb2-136"></a>        condition2 <span class="op">=</span> (solution_df[<span class="st">'응급실포화도'</span>] <span class="op">!=</span> <span class="st">'불가'</span>)</span>
<span id="cb2-137"><a href="#cb2-137"></a></span>
<span id="cb2-138"><a href="#cb2-138"></a>        distance_df <span class="op">=</span> solution_df[condition1 <span class="op">&amp;</span> condition2].copy()</span>
<span id="cb2-139"><a href="#cb2-139"></a></span>
<span id="cb2-140"><a href="#cb2-140"></a>    <span class="co">### 환자 위치로부터의 거리 계산</span></span>
<span id="cb2-141"><a href="#cb2-141"></a>    distance <span class="op">=</span> []</span>
<span id="cb2-142"><a href="#cb2-142"></a>    patient <span class="op">=</span> (lati, <span class="bu">long</span>)</span>
<span id="cb2-143"><a href="#cb2-143"></a>    </span>
<span id="cb2-144"><a href="#cb2-144"></a>    <span class="cf">for</span> idx, row <span class="kw">in</span> distance_df.iterrows():</span>
<span id="cb2-145"><a href="#cb2-145"></a>        distance.append(<span class="bu">round</span>(haversine((row[<span class="st">'위도'</span>], row[<span class="st">'경도'</span>]), patient, unit<span class="op">=</span><span class="st">'km'</span>), <span class="dv">2</span>))</span>
<span id="cb2-146"><a href="#cb2-146"></a></span>
<span id="cb2-147"><a href="#cb2-147"></a>    distance_df[<span class="st">'거리'</span>] <span class="op">=</span> distance</span>
<span id="cb2-148"><a href="#cb2-148"></a>    distance_df[<span class="st">'거리구분'</span>] <span class="op">=</span> pd.cut(distance_df[<span class="st">'거리'</span>], bins<span class="op">=</span>[<span class="op">-</span><span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">5</span>, <span class="dv">10</span>, <span class="dv">100</span>],</span>
<span id="cb2-149"><a href="#cb2-149"></a>                                 labels<span class="op">=</span>[<span class="st">'2km이내'</span>, <span class="st">'5km이내'</span>, <span class="st">'10km이내'</span>, <span class="st">'10km이상'</span>])</span>
<span id="cb2-150"><a href="#cb2-150"></a>            </span>
<span id="cb2-151"><a href="#cb2-151"></a>    <span class="cf">return</span> distance_df</span>
<span id="cb2-152"><a href="#cb2-152"></a></span>
<span id="cb2-153"><a href="#cb2-153"></a><span class="co"># -------------------- 필요 함수 생성 코딩 </span><span class="re">END</span><span class="co"> --------------------</span></span>
<span id="cb2-154"><a href="#cb2-154"></a></span>
<span id="cb2-155"><a href="#cb2-155"></a><span class="co"># -------------------- ▼ 1-0그룹 Streamlit 웹 화면 구성 Tab 생성 START ▼ --------------------</span></span>
<span id="cb2-156"><a href="#cb2-156"></a></span>
<span id="cb2-157"><a href="#cb2-157"></a><span class="co"># 레이아웃 구성하기 </span></span>
<span id="cb2-158"><a href="#cb2-158"></a>st.set_page_config(layout<span class="op">=</span><span class="st">"wide"</span>)</span>
<span id="cb2-159"><a href="#cb2-159"></a></span>
<span id="cb2-160"><a href="#cb2-160"></a><span class="co"># tabs 만들기 </span></span>
<span id="cb2-161"><a href="#cb2-161"></a>tab1, tab2 <span class="op">=</span> st.tabs([<span class="st">"출동 일지"</span>, <span class="st">"대시보드"</span>])</span>
<span id="cb2-162"><a href="#cb2-162"></a></span>
<span id="cb2-163"><a href="#cb2-163"></a><span class="co"># tab1 내용 구성하기 </span></span>
<span id="cb2-164"><a href="#cb2-164"></a><span class="cf">with</span> tab1:</span>
<span id="cb2-165"><a href="#cb2-165"></a></span>
<span id="cb2-166"><a href="#cb2-166"></a>    <span class="co"># 이름 넣기</span></span>
<span id="cb2-167"><a href="#cb2-167"></a>    st.markdown(<span class="st">"## 119 응급 출동 일지"</span>)</span>
<span id="cb2-168"><a href="#cb2-168"></a>    </span>
<span id="cb2-169"><a href="#cb2-169"></a>    <span class="co"># 시간 정보 가져오기 </span></span>
<span id="cb2-170"><a href="#cb2-170"></a>    now_date <span class="op">=</span> datetime.datetime.now(datetime.timezone.utc) <span class="op">+</span> datetime.timedelta(hours<span class="op">=</span><span class="dv">9</span>)</span>
<span id="cb2-171"><a href="#cb2-171"></a></span>
<span id="cb2-172"><a href="#cb2-172"></a>    </span>
<span id="cb2-173"><a href="#cb2-173"></a>    <span class="co"># 환자정보 널기</span></span>
<span id="cb2-174"><a href="#cb2-174"></a>    st.markdown(<span class="st">"#### 환자 정보"</span>)</span>
<span id="cb2-175"><a href="#cb2-175"></a></span>
<span id="cb2-176"><a href="#cb2-176"></a>    <span class="co">## -------------------- ▼ 1-1그룹 날짜/시간 입력 cols 구성(출동일/날짜정보(input_date)/출동시간/시간정보(input_time)) ▼ --------------------</span></span>
<span id="cb2-177"><a href="#cb2-177"></a>     </span>
<span id="cb2-178"><a href="#cb2-178"></a>    col110, col111, col112, col113 <span class="op">=</span> st.columns([<span class="fl">0.1</span>, <span class="fl">0.4</span>, <span class="fl">0.1</span>, <span class="fl">0.4</span>])</span>
<span id="cb2-179"><a href="#cb2-179"></a>    <span class="cf">with</span> col110:</span>
<span id="cb2-180"><a href="#cb2-180"></a>        st.info(<span class="st">"출동일"</span>)</span>
<span id="cb2-181"><a href="#cb2-181"></a>    <span class="cf">with</span> col111:</span>
<span id="cb2-182"><a href="#cb2-182"></a>        input_date <span class="op">=</span> st.date_input(<span class="st">'출동 일자'</span>, label_visibility<span class="op">=</span><span class="st">"collapsed"</span>)</span>
<span id="cb2-183"><a href="#cb2-183"></a>    <span class="cf">with</span> col112:</span>
<span id="cb2-184"><a href="#cb2-184"></a>        st.info(<span class="st">"출동시간"</span>)</span>
<span id="cb2-185"><a href="#cb2-185"></a>    <span class="cf">with</span> col113:</span>
<span id="cb2-186"><a href="#cb2-186"></a>        input_time <span class="op">=</span> st.time_input(<span class="st">'출동 시간'</span>, datetime.time(now_date.hour, now_date.minute), label_visibility<span class="op">=</span><span class="st">"collapsed"</span>)</span>
<span id="cb2-187"><a href="#cb2-187"></a></span>
<span id="cb2-188"><a href="#cb2-188"></a>    <span class="co">## -------------------------------------------------------------------------------------</span></span>
<span id="cb2-189"><a href="#cb2-189"></a></span>
<span id="cb2-190"><a href="#cb2-190"></a></span>
<span id="cb2-191"><a href="#cb2-191"></a>    <span class="co">## -------------------- ▼ 1-2그룹 이름/성별 입력 cols 구성(이름/이름 텍스트 입력(name)/나이/나이 숫자 입력(age)/성별/성별 라디오(patient_s)) ▼ --------------------</span></span>
<span id="cb2-192"><a href="#cb2-192"></a></span>
<span id="cb2-193"><a href="#cb2-193"></a>    col120, col121, col122, col123, col124, col125 <span class="op">=</span> st.columns([<span class="fl">0.1</span>, <span class="fl">0.5</span>, <span class="fl">0.1</span>, <span class="fl">0.1</span>, <span class="fl">0.1</span>, <span class="fl">0.1</span>])</span>
<span id="cb2-194"><a href="#cb2-194"></a>    <span class="cf">with</span> col120:</span>
<span id="cb2-195"><a href="#cb2-195"></a>        st.info(<span class="st">"이름"</span>)</span>
<span id="cb2-196"><a href="#cb2-196"></a>    <span class="cf">with</span> col121:</span>
<span id="cb2-197"><a href="#cb2-197"></a>        name <span class="op">=</span> st.text_input(<span class="st">"이름"</span>, label_visibility<span class="op">=</span><span class="st">"collapsed"</span>)</span>
<span id="cb2-198"><a href="#cb2-198"></a>    <span class="cf">with</span> col122:</span>
<span id="cb2-199"><a href="#cb2-199"></a>        st.info(<span class="st">"나이"</span>)</span>
<span id="cb2-200"><a href="#cb2-200"></a>    <span class="cf">with</span> col123:</span>
<span id="cb2-201"><a href="#cb2-201"></a>        age <span class="op">=</span> st.number_input(<span class="st">"나이"</span>, label_visibility<span class="op">=</span><span class="st">"collapsed"</span>, min_value<span class="op">=</span><span class="dv">0</span>, max_value<span class="op">=</span><span class="dv">120</span>)</span>
<span id="cb2-202"><a href="#cb2-202"></a>    <span class="cf">with</span> col124:</span>
<span id="cb2-203"><a href="#cb2-203"></a>        st.info(<span class="st">"성별"</span>)</span>
<span id="cb2-204"><a href="#cb2-204"></a>    <span class="cf">with</span> col125:</span>
<span id="cb2-205"><a href="#cb2-205"></a>        patient_s <span class="op">=</span> st.radio(<span class="st">"성별"</span>, [<span class="st">"남성"</span>, <span class="st">"여성"</span>], label_visibility<span class="op">=</span><span class="st">"collapsed"</span>, horizontal<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb2-206"><a href="#cb2-206"></a></span>
<span id="cb2-207"><a href="#cb2-207"></a>    <span class="co">##-------------------------------------------------------------------------------------</span></span>
<span id="cb2-208"><a href="#cb2-208"></a></span>
<span id="cb2-209"><a href="#cb2-209"></a>    </span>
<span id="cb2-210"><a href="#cb2-210"></a>    <span class="co">## -------------------- ▼ 1-3그룹 체온/환자위치(주소) 입력 cols 구성(체온/체온 숫자 입력(fever)/환자 위치/환자위치 텍스트 입력(location)) ▼ --------------------</span></span>
<span id="cb2-211"><a href="#cb2-211"></a>    </span>
<span id="cb2-212"><a href="#cb2-212"></a>    col130, col131, col132, col133 <span class="op">=</span> st.columns([<span class="fl">0.1</span>, <span class="fl">0.4</span>, <span class="fl">0.1</span>, <span class="fl">0.4</span>])</span>
<span id="cb2-213"><a href="#cb2-213"></a>    <span class="cf">with</span> col130:</span>
<span id="cb2-214"><a href="#cb2-214"></a>        st.info(<span class="st">"체온"</span>)</span>
<span id="cb2-215"><a href="#cb2-215"></a>    <span class="cf">with</span> col131:</span>
<span id="cb2-216"><a href="#cb2-216"></a>        fever <span class="op">=</span> st.number_input(<span class="st">"체온"</span>, min_value<span class="op">=</span><span class="fl">30.0</span>, max_value<span class="op">=</span><span class="fl">50.0</span>, label_visibility<span class="op">=</span><span class="st">"collapsed"</span>, step<span class="op">=</span><span class="fl">0.1</span>,value<span class="op">=</span><span class="fl">36.5</span>)</span>
<span id="cb2-217"><a href="#cb2-217"></a>    <span class="cf">with</span> col132:</span>
<span id="cb2-218"><a href="#cb2-218"></a>        st.info(<span class="st">"환자 위치"</span>)</span>
<span id="cb2-219"><a href="#cb2-219"></a>    <span class="cf">with</span> col133:</span>
<span id="cb2-220"><a href="#cb2-220"></a>        location <span class="op">=</span> st.text_input(<span class="st">"환자 위치"</span>, label_visibility<span class="op">=</span><span class="st">"collapsed"</span>, value<span class="op">=</span><span class="st">"대구광역시 북구 연암로 40"</span>)</span>
<span id="cb2-221"><a href="#cb2-221"></a>    </span>
<span id="cb2-222"><a href="#cb2-222"></a>    <span class="co">##-------------------------------------------------------------------------------------</span></span>
<span id="cb2-223"><a href="#cb2-223"></a></span>
<span id="cb2-224"><a href="#cb2-224"></a>    <span class="co">## ------------------ ▼ 1-4그룹 혈압 입력 cols 구성(수축기혈압/수축기 입력 슬라이더(high_blood)/이완기혈압/이완기 입력 슬라이더(low_blood)) ▼ --------------------</span></span>
<span id="cb2-225"><a href="#cb2-225"></a>    <span class="co">## st.slider 사용</span></span>
<span id="cb2-226"><a href="#cb2-226"></a></span>
<span id="cb2-227"><a href="#cb2-227"></a>    col140, col141, col142, col143 <span class="op">=</span> st.columns([<span class="fl">0.1</span>, <span class="fl">0.4</span>, <span class="fl">0.1</span>, <span class="fl">0.4</span>])</span>
<span id="cb2-228"><a href="#cb2-228"></a>    <span class="cf">with</span> col140:</span>
<span id="cb2-229"><a href="#cb2-229"></a>        st.info(<span class="st">"수축기 혈압"</span>)</span>
<span id="cb2-230"><a href="#cb2-230"></a>    <span class="cf">with</span> col141:</span>
<span id="cb2-231"><a href="#cb2-231"></a>        high_blood <span class="op">=</span> st.slider(<span class="st">'수축기 혈압'</span>,  min_value<span class="op">=</span><span class="dv">10</span>, max_value<span class="op">=</span><span class="dv">200</span>, value<span class="op">=</span><span class="dv">120</span>, step<span class="op">=</span><span class="dv">1</span>, label_visibility<span class="op">=</span><span class="st">"collapsed"</span>) <span class="co"># 140이상 고혈압, 90이하 저혈압</span></span>
<span id="cb2-232"><a href="#cb2-232"></a>    <span class="cf">with</span> col142:</span>
<span id="cb2-233"><a href="#cb2-233"></a>        st.info(<span class="st">"이완기 혈압"</span>)</span>
<span id="cb2-234"><a href="#cb2-234"></a>    <span class="cf">with</span> col143:</span>
<span id="cb2-235"><a href="#cb2-235"></a>        low_blood <span class="op">=</span> st.slider(<span class="st">'수축기 혈압'</span>,  min_value<span class="op">=</span><span class="dv">10</span>, max_value<span class="op">=</span><span class="dv">200</span>, value<span class="op">=</span><span class="dv">80</span>, step<span class="op">=</span><span class="dv">1</span>, label_visibility<span class="op">=</span><span class="st">"collapsed"</span>) <span class="co"># 90이상 고혈압, 60이하 저혈압</span></span>
<span id="cb2-236"><a href="#cb2-236"></a></span>
<span id="cb2-237"><a href="#cb2-237"></a>    <span class="co">##-------------------------------------------------------------------------------------</span></span>
<span id="cb2-238"><a href="#cb2-238"></a>   </span>
<span id="cb2-239"><a href="#cb2-239"></a>    <span class="co">## -------------------- ▼ 1-5그룹 환자 증상체크 입력 cols 구성(증상체크/checkbox1/checkbox2/checkbox3/checkbox4/checkbox5/checkbox6/checkbox7) ▼ -----------------------    </span></span>
<span id="cb2-240"><a href="#cb2-240"></a>    <span class="co">## st.checkbox 사용</span></span>
<span id="cb2-241"><a href="#cb2-241"></a>    <span class="co">## 입력 변수명1: {기침:cough_check, 간헐적 경련:convulsion_check, 마비:paralysis_check, 무감각:insensitive_check, 통증:pain_check, 만지면 아픔: touch_pain_check}</span></span>
<span id="cb2-242"><a href="#cb2-242"></a>    <span class="co">## 입력 변수명2: {설사:diarrhea_check, 출혈:bleeding_check, 시력 저하:blurred_check, 호흡 곤란:breath_check, 현기증:dizziness_check}</span></span>
<span id="cb2-243"><a href="#cb2-243"></a></span>
<span id="cb2-244"><a href="#cb2-244"></a></span>
<span id="cb2-245"><a href="#cb2-245"></a>    st.markdown(<span class="st">"#### 증상 체크하기"</span>)</span>
<span id="cb2-246"><a href="#cb2-246"></a>    </span>
<span id="cb2-247"><a href="#cb2-247"></a>    col150, col151, col152, col153, col154, col155, col156, col157 <span class="op">=</span> st.columns(<span class="dv">8</span>)</span>
<span id="cb2-248"><a href="#cb2-248"></a></span>
<span id="cb2-249"><a href="#cb2-249"></a>    <span class="cf">with</span> col150:</span>
<span id="cb2-250"><a href="#cb2-250"></a>        st.error(<span class="st">"증상 체크"</span>)</span>
<span id="cb2-251"><a href="#cb2-251"></a>    <span class="cf">with</span> col151:</span>
<span id="cb2-252"><a href="#cb2-252"></a>        cough_check <span class="op">=</span> st.checkbox(<span class="st">"기침"</span>)</span>
<span id="cb2-253"><a href="#cb2-253"></a>        convulsion_check <span class="op">=</span> st.checkbox(<span class="st">"간헐적 경련"</span>)</span>
<span id="cb2-254"><a href="#cb2-254"></a>    <span class="cf">with</span> col152:</span>
<span id="cb2-255"><a href="#cb2-255"></a>        paralysis_check <span class="op">=</span> st.checkbox(<span class="st">"마비"</span>)</span>
<span id="cb2-256"><a href="#cb2-256"></a>        insensitive_check <span class="op">=</span> st.checkbox(<span class="st">"무감각"</span>)</span>
<span id="cb2-257"><a href="#cb2-257"></a>    <span class="cf">with</span> col153:</span>
<span id="cb2-258"><a href="#cb2-258"></a>        pain_check <span class="op">=</span> st.checkbox(<span class="st">"통증"</span>)</span>
<span id="cb2-259"><a href="#cb2-259"></a>        touch_pain_check <span class="op">=</span> st.checkbox(<span class="st">"만지면 아픔"</span>)</span>
<span id="cb2-260"><a href="#cb2-260"></a>    <span class="cf">with</span> col154:</span>
<span id="cb2-261"><a href="#cb2-261"></a>        inarticulate_check <span class="op">=</span> st.checkbox(<span class="st">"말이 어눌해짐"</span>)</span>
<span id="cb2-262"><a href="#cb2-262"></a>        swoon_check <span class="op">=</span> st.checkbox(<span class="st">"졸도"</span>)</span>
<span id="cb2-263"><a href="#cb2-263"></a>    <span class="cf">with</span> col155:</span>
<span id="cb2-264"><a href="#cb2-264"></a>        diarrhea_check <span class="op">=</span> st.checkbox(<span class="st">"설사"</span>)</span>
<span id="cb2-265"><a href="#cb2-265"></a>        bleeding_check <span class="op">=</span> st.checkbox(<span class="st">"출혈"</span>)</span>
<span id="cb2-266"><a href="#cb2-266"></a>    <span class="cf">with</span> col156:</span>
<span id="cb2-267"><a href="#cb2-267"></a>        blurred_check <span class="op">=</span> st.checkbox(<span class="st">"시력 저하"</span>)</span>
<span id="cb2-268"><a href="#cb2-268"></a>        breath_check <span class="op">=</span> st.checkbox(<span class="st">"호흡 곤란"</span>)</span>
<span id="cb2-269"><a href="#cb2-269"></a>    <span class="cf">with</span> col157:</span>
<span id="cb2-270"><a href="#cb2-270"></a>        dizziness_check <span class="op">=</span> st.checkbox(<span class="st">"현기증"</span>)</span>
<span id="cb2-271"><a href="#cb2-271"></a></span>
<span id="cb2-272"><a href="#cb2-272"></a>    <span class="co">## -------------------------------------------------------------------------------------</span></span>
<span id="cb2-273"><a href="#cb2-273"></a>    </span>
<span id="cb2-274"><a href="#cb2-274"></a>    <span class="co">## -------------------- ▼ 1-6그룹 중증 질환 여부, 중증 질환 판단(special_yn) col 구성 ▼ --------------------</span></span>
<span id="cb2-275"><a href="#cb2-275"></a>    <span class="co">## selectbox  사용(변수: special_yn)</span></span>
<span id="cb2-276"><a href="#cb2-276"></a></span>
<span id="cb2-277"><a href="#cb2-277"></a>    col160, col161, col162 <span class="op">=</span> st.columns([<span class="fl">0.2</span>, <span class="fl">0.2</span>, <span class="fl">0.6</span>])</span>
<span id="cb2-278"><a href="#cb2-278"></a></span>
<span id="cb2-279"><a href="#cb2-279"></a>    <span class="cf">with</span> col160:</span>
<span id="cb2-280"><a href="#cb2-280"></a>        st.error(<span class="st">"중증 질환 여부"</span>)</span>
<span id="cb2-281"><a href="#cb2-281"></a>    <span class="cf">with</span> col161:</span>
<span id="cb2-282"><a href="#cb2-282"></a>        special_yn <span class="op">=</span> st.selectbox(<span class="st">"판단"</span>, (<span class="st">"중증 질환 아님"</span>, <span class="st">"중증 질환 선택"</span>, <span class="st">"중증 질환 예측"</span>), label_visibility<span class="op">=</span><span class="st">"collapsed"</span>)</span>
<span id="cb2-283"><a href="#cb2-283"></a>    <span class="cf">with</span> col161:</span>
<span id="cb2-284"><a href="#cb2-284"></a>        st.write(<span class="st">""</span>)</span>
<span id="cb2-285"><a href="#cb2-285"></a></span>
<span id="cb2-286"><a href="#cb2-286"></a>    <span class="co">##-------------------------------------------------------------------------------------</span></span>
<span id="cb2-287"><a href="#cb2-287"></a>    </span>
<span id="cb2-288"><a href="#cb2-288"></a>    <span class="co">## -------------------- ▼ 1-7그룹 중증 질환 선택 또는 예측 결과 표시 cols 구성 ▼ --------------------</span></span>
<span id="cb2-289"><a href="#cb2-289"></a>    col170, col171 <span class="op">=</span> st.columns([<span class="fl">0.02</span>, <span class="fl">0.98</span>])</span>
<span id="cb2-290"><a href="#cb2-290"></a></span>
<span id="cb2-291"><a href="#cb2-291"></a>    <span class="cf">with</span> col170:</span>
<span id="cb2-292"><a href="#cb2-292"></a>        st.write(<span class="st">""</span>)</span>
<span id="cb2-293"><a href="#cb2-293"></a>    <span class="cf">with</span> col171:</span>
<span id="cb2-294"><a href="#cb2-294"></a>        <span class="cf">if</span> special_yn <span class="op">==</span> <span class="st">"중증 질환 예측"</span>:</span>
<span id="cb2-295"><a href="#cb2-295"></a></span>
<span id="cb2-296"><a href="#cb2-296"></a>            patient_data <span class="op">=</span> {</span>
<span id="cb2-297"><a href="#cb2-297"></a>                <span class="st">"체온"</span>: [fever],</span>
<span id="cb2-298"><a href="#cb2-298"></a>                <span class="st">"수축기 혈압"</span>: [high_blood],</span>
<span id="cb2-299"><a href="#cb2-299"></a>                <span class="st">"이완기 혈압"</span>: [low_blood],</span>
<span id="cb2-300"><a href="#cb2-300"></a>                <span class="st">"호흡 곤란"</span>: [<span class="bu">int</span>(breath_check)],</span>
<span id="cb2-301"><a href="#cb2-301"></a>                <span class="st">"간헐성 경련"</span>: [<span class="bu">int</span>(convulsion_check)],</span>
<span id="cb2-302"><a href="#cb2-302"></a>                <span class="st">"설사"</span>: [<span class="bu">int</span>(diarrhea_check)],</span>
<span id="cb2-303"><a href="#cb2-303"></a>                <span class="st">"기침"</span>: [<span class="bu">int</span>(cough_check)],</span>
<span id="cb2-304"><a href="#cb2-304"></a>                <span class="st">"출혈"</span>: [<span class="bu">int</span>(bleeding_check)],</span>
<span id="cb2-305"><a href="#cb2-305"></a>                <span class="st">"통증"</span>: [<span class="bu">int</span>(pain_check)],</span>
<span id="cb2-306"><a href="#cb2-306"></a>                <span class="st">"만지면 아프다"</span>: [<span class="bu">int</span>(touch_pain_check)],</span>
<span id="cb2-307"><a href="#cb2-307"></a>                <span class="st">"무감각"</span>: [<span class="bu">int</span>(insensitive_check)],</span>
<span id="cb2-308"><a href="#cb2-308"></a>                <span class="st">"마비"</span>: [<span class="bu">int</span>(paralysis_check)],</span>
<span id="cb2-309"><a href="#cb2-309"></a>                <span class="st">"현기증"</span>: [<span class="bu">int</span>(dizziness_check)],</span>
<span id="cb2-310"><a href="#cb2-310"></a>                <span class="st">"졸도"</span>: [<span class="bu">int</span>(swoon_check)],</span>
<span id="cb2-311"><a href="#cb2-311"></a>                <span class="st">"말이 어눌해졌다"</span>: [<span class="bu">int</span>(inarticulate_check)],</span>
<span id="cb2-312"><a href="#cb2-312"></a>                <span class="st">"시력이 흐려짐"</span>: [<span class="bu">int</span>(blurred_check)],</span>
<span id="cb2-313"><a href="#cb2-313"></a>                <span class="st">"중증질환"</span>: [<span class="st">""</span>]</span>
<span id="cb2-314"><a href="#cb2-314"></a>            }</span>
<span id="cb2-315"><a href="#cb2-315"></a>            </span>
<span id="cb2-316"><a href="#cb2-316"></a>            <span class="co"># AI 모델 중증질환 예측 함수 호출</span></span>
<span id="cb2-317"><a href="#cb2-317"></a>            special_m <span class="op">=</span> predict_disease(patient_data)</span>
<span id="cb2-318"><a href="#cb2-318"></a>            </span>
<span id="cb2-319"><a href="#cb2-319"></a>            st.markdown(<span class="ss">f"### 예측된 중증 질환은 </span><span class="sc">{</span>special_m<span class="sc">}</span><span class="ss">입니다"</span>)</span>
<span id="cb2-320"><a href="#cb2-320"></a>            st.write(<span class="st">"중증 질환 예측은 뇌출혈, 뇌경색, 심근경색, 응급내시경 4가지만 분류됩니다."</span>)</span>
<span id="cb2-321"><a href="#cb2-321"></a>            st.write(<span class="st">"이외의 중증 질환으로 판단될 경우, 직접 선택하세요"</span>)</span>
<span id="cb2-322"><a href="#cb2-322"></a></span>
<span id="cb2-323"><a href="#cb2-323"></a>        <span class="cf">elif</span> special_yn <span class="op">==</span> <span class="st">"중증 질환 선택"</span>:</span>
<span id="cb2-324"><a href="#cb2-324"></a>            special_m <span class="op">=</span> st.radio(<span class="st">"중증 질환 선택"</span>,</span>
<span id="cb2-325"><a href="#cb2-325"></a>                                    [<span class="st">'뇌출혈'</span>, <span class="st">'신생아'</span>, <span class="st">'중증화상'</span>, <span class="st">"뇌경색"</span>, <span class="st">"심근경색"</span>, <span class="st">"복부손상"</span>, <span class="st">"사지접합"</span>,  <span class="st">"응급투석"</span>, <span class="st">"조산산모"</span>],</span>
<span id="cb2-326"><a href="#cb2-326"></a>                                    horizontal<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb2-327"><a href="#cb2-327"></a></span>
<span id="cb2-328"><a href="#cb2-328"></a>        <span class="cf">else</span>:</span>
<span id="cb2-329"><a href="#cb2-329"></a>            special_m <span class="op">=</span> <span class="st">"중증 아님"</span></span>
<span id="cb2-330"><a href="#cb2-330"></a>            st.write(<span class="st">""</span>)</span>
<span id="cb2-331"><a href="#cb2-331"></a></span>
<span id="cb2-332"><a href="#cb2-332"></a>    <span class="co">## ---------------------------------------------------------------------------</span></span>
<span id="cb2-333"><a href="#cb2-333"></a></span>
<span id="cb2-334"><a href="#cb2-334"></a></span>
<span id="cb2-335"><a href="#cb2-335"></a>    <span class="co"># ▼ ▼ ▼ ▼ ▼ ▼ ▼ ▼ ▼ ▼ ▼ ▼ ▼ ▼ ▼ ▼ ▼ ▼ ▼ ▼  [도전미션] ▼ ▼ ▼ ▼ ▼ ▼ ▼ ▼ ▼ ▼ ▼ ▼ ▼ ▼ ▼ ▼ ▼ ▼ ▼ </span></span>
<span id="cb2-336"><a href="#cb2-336"></a>    </span>
<span id="cb2-337"><a href="#cb2-337"></a>    <span class="co">## -------------------- ▼ 1-8그룹 가용병원 표시 폼 지정 ▼ --------------------</span></span>
<span id="cb2-338"><a href="#cb2-338"></a>    </span>
<span id="cb2-339"><a href="#cb2-339"></a>    <span class="cf">with</span> st.form(key<span class="op">=</span><span class="st">'tab1_first'</span>):</span>
<span id="cb2-340"><a href="#cb2-340"></a>        </span>
<span id="cb2-341"><a href="#cb2-341"></a>        <span class="co">### 병원 조회 버튼 생성</span></span>
<span id="cb2-342"><a href="#cb2-342"></a>        <span class="cf">if</span> st.form_submit_button(label<span class="op">=</span><span class="st">'병원조회'</span>):</span>
<span id="cb2-343"><a href="#cb2-343"></a></span>
<span id="cb2-344"><a href="#cb2-344"></a>            <span class="co">#### 거리주소 -&gt; 위도/경도 변환 함수 호출</span></span>
<span id="cb2-345"><a href="#cb2-345"></a>            lati, <span class="bu">long</span> <span class="op">=</span> geocoding(location)</span>
<span id="cb2-346"><a href="#cb2-346"></a></span>
<span id="cb2-347"><a href="#cb2-347"></a>            <span class="co">#### 인근 병원 찾기 함수 호출</span></span>
<span id="cb2-348"><a href="#cb2-348"></a>            hospital_list <span class="op">=</span> find_hospital(special_m, lati, <span class="bu">long</span>)</span>
<span id="cb2-349"><a href="#cb2-349"></a>            </span>
<span id="cb2-350"><a href="#cb2-350"></a>            <span class="co">#### 필요 병원 정보 추출 </span></span>
<span id="cb2-351"><a href="#cb2-351"></a>            display_column <span class="op">=</span> [<span class="st">'병원명'</span>, <span class="st">"주소"</span>, <span class="st">"응급연락처"</span>, <span class="st">"응급실수"</span>, <span class="st">"수술실수"</span>, <span class="st">"가용응급실수"</span>, <span class="st">"가용수술실수"</span>, <span class="st">'응급실포화도'</span>, <span class="st">'거리'</span>, <span class="st">'거리구분'</span>]</span>
<span id="cb2-352"><a href="#cb2-352"></a>            display_df <span class="op">=</span> hospital_list[display_column].sort_values([<span class="st">'거리구분'</span>, <span class="st">'응급실포화도'</span>, <span class="st">'거리'</span>], ascending<span class="op">=</span>[<span class="va">True</span>, <span class="va">False</span>, <span class="va">True</span>])</span>
<span id="cb2-353"><a href="#cb2-353"></a>            display_df.reset_index(drop<span class="op">=</span><span class="va">True</span>, inplace<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb2-354"><a href="#cb2-354"></a></span>
<span id="cb2-355"><a href="#cb2-355"></a>            <span class="co">#### 추출 병원 지도에 표시</span></span>
<span id="cb2-356"><a href="#cb2-356"></a>            <span class="cf">with</span> st.expander(<span class="st">"인근 병원 리스트"</span>, expanded<span class="op">=</span><span class="va">True</span>):</span>
<span id="cb2-357"><a href="#cb2-357"></a>                st.dataframe(display_df)</span>
<span id="cb2-358"><a href="#cb2-358"></a>                m <span class="op">=</span> folium.Map(location<span class="op">=</span>[lati,<span class="bu">long</span>], zoom_start<span class="op">=</span><span class="dv">11</span>)</span>
<span id="cb2-359"><a href="#cb2-359"></a>                icon <span class="op">=</span> folium.Icon(color<span class="op">=</span><span class="st">"red"</span>)</span>
<span id="cb2-360"><a href="#cb2-360"></a>                folium.Marker(location<span class="op">=</span>[lati, <span class="bu">long</span>], popup<span class="op">=</span><span class="st">"환자위치"</span>, tooltip<span class="op">=</span><span class="st">"환자위치: "</span><span class="op">+</span>location, icon<span class="op">=</span>icon).add_to(m)</span>
<span id="cb2-361"><a href="#cb2-361"></a></span>
<span id="cb2-362"><a href="#cb2-362"></a>                </span>
<span id="cb2-363"><a href="#cb2-363"></a>                <span class="co">###### folium을 활용하여 지도 그리기 (3일차 교재 branca 참조)</span></span>
<span id="cb2-364"><a href="#cb2-364"></a>                </span>
<span id="cb2-365"><a href="#cb2-365"></a>                <span class="cf">for</span> idx, row <span class="kw">in</span> hospital_list.iterrows():</span>
<span id="cb2-366"><a href="#cb2-366"></a>                    </span>
<span id="cb2-367"><a href="#cb2-367"></a>                    html <span class="op">=</span> <span class="st">"""&lt;!DOCTYPE html&gt;</span></span>
<span id="cb2-368"><a href="#cb2-368"></a><span class="st">                        &lt;html&gt;</span></span>
<span id="cb2-369"><a href="#cb2-369"></a><span class="st">                            &lt;table style="height: 126px; width: 330px;"&gt;  &lt;tbody&gt; &lt;tr&gt;</span></span>
<span id="cb2-370"><a href="#cb2-370"></a><span class="st">                            &lt;td style="background-color: #2A799C;"&gt;&lt;div style="color: #ffffff;text-align:center;"&gt;병원명&lt;/div&gt;&lt;/td&gt;</span></span>
<span id="cb2-371"><a href="#cb2-371"></a><span class="st">                            &lt;td style="width: 200px;background-color: #C5DCE7;"&gt;</span><span class="sc">{}</span><span class="st">&lt;/td&gt;"""</span>.<span class="bu">format</span>(row[<span class="st">'병원명'</span>]) <span class="op">+</span> <span class="st">""" &lt;/tr&gt; </span></span>
<span id="cb2-372"><a href="#cb2-372"></a><span class="st">                            &lt;tr&gt;&lt;td style="background-color: #2A799C;"&gt;&lt;div style="color: #ffffff;text-align:center;"&gt;가용응급실수&lt;/div&gt;&lt;/td&gt;</span></span>
<span id="cb2-373"><a href="#cb2-373"></a><span class="st">                            &lt;td style="width: 200px;background-color: #C5DCE7;"&gt;</span><span class="sc">{}</span><span class="st">&lt;/td&gt;"""</span>.<span class="bu">format</span>(row[<span class="st">'가용응급실수'</span>]) <span class="op">+</span> <span class="st">"""&lt;/tr&gt;</span></span>
<span id="cb2-374"><a href="#cb2-374"></a><span class="st">                            &lt;tr&gt;&lt;td style="background-color: #2A799C;"&gt;&lt;div style="color: #ffffff;text-align:center;"&gt;거리(km)&lt;/div&gt;&lt;/td&gt;</span></span>
<span id="cb2-375"><a href="#cb2-375"></a><span class="st">                            &lt;td style="width: 200px;background-color: #C5DCE7;"&gt;</span><span class="sc">{}</span><span class="st">&lt;/td&gt;"""</span>.<span class="bu">format</span>(row[<span class="st">'거리'</span>]) <span class="op">+</span> <span class="st">""" &lt;/tr&gt;</span></span>
<span id="cb2-376"><a href="#cb2-376"></a><span class="st">                        &lt;/tbody&gt; &lt;/table&gt; &lt;/html&gt; """</span></span>
<span id="cb2-377"><a href="#cb2-377"></a>                    </span>
<span id="cb2-378"><a href="#cb2-378"></a>                    iframe <span class="op">=</span> branca.element.IFrame(html<span class="op">=</span>html, width<span class="op">=</span><span class="dv">350</span>, height<span class="op">=</span><span class="dv">150</span>)</span>
<span id="cb2-379"><a href="#cb2-379"></a>                    popup_text <span class="op">=</span> folium.Popup(iframe, parse_html<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb2-380"><a href="#cb2-380"></a>                    icon <span class="op">=</span> folium.Icon(color<span class="op">=</span><span class="st">"blue"</span>)</span>
<span id="cb2-381"><a href="#cb2-381"></a></span>
<span id="cb2-382"><a href="#cb2-382"></a>                    folium.Marker(location<span class="op">=</span>[row[<span class="st">'위도'</span>], row[<span class="st">'경도'</span>]], popup<span class="op">=</span>popup_text,</span>
<span id="cb2-383"><a href="#cb2-383"></a>                                    tooltip<span class="op">=</span>row[<span class="st">'병원명'</span>], icon<span class="op">=</span>icon).add_to(m)</span>
<span id="cb2-384"><a href="#cb2-384"></a></span>
<span id="cb2-385"><a href="#cb2-385"></a>                st_folium(m, width<span class="op">=</span><span class="dv">1000</span>)</span>
<span id="cb2-386"><a href="#cb2-386"></a></span>
<span id="cb2-387"><a href="#cb2-387"></a>    <span class="co"># ▲ ▲ ▲ ▲ ▲ ▲ ▲ ▲ ▲ ▲ ▲ ▲ ▲ ▲ ▲ ▲ ▲ ▲ ▲ ▲ ▲ ▲ ▲ ▲ ▲ ▲ ▲ ▲ ▲ ▲ ▲ ▲ ▲ ▲ ▲ ▲ ▲ ▲ ▲ ▲ ▲ ▲ ▲ ▲ ▲ ▲ ▲ ▲ ▲ ▲ </span></span>
<span id="cb2-388"><a href="#cb2-388"></a></span>
<span id="cb2-389"><a href="#cb2-389"></a>    </span>
<span id="cb2-390"><a href="#cb2-390"></a>    <span class="co"># -------------------- 완료시간 저장하기 START-------------------- </span></span>
<span id="cb2-391"><a href="#cb2-391"></a></span>
<span id="cb2-392"><a href="#cb2-392"></a></span>
<span id="cb2-393"><a href="#cb2-393"></a>    <span class="co">##  -------------------- ▼ 1-9그룹 완료시간 저장 폼 지정 ▼  --------------------</span></span>
<span id="cb2-394"><a href="#cb2-394"></a>    <span class="cf">with</span> st.form(key<span class="op">=</span><span class="st">'tab1_second'</span>):</span>
<span id="cb2-395"><a href="#cb2-395"></a></span>
<span id="cb2-396"><a href="#cb2-396"></a>        <span class="co">## 완료시간 시간표시 cols 구성</span></span>
<span id="cb2-397"><a href="#cb2-397"></a>        col191, col192 <span class="op">=</span> st.columns(<span class="dv">2</span>)</span>
<span id="cb2-398"><a href="#cb2-398"></a>        </span>
<span id="cb2-399"><a href="#cb2-399"></a>        <span class="cf">with</span> col191:</span>
<span id="cb2-400"><a href="#cb2-400"></a>            st.success(<span class="st">"완료 시간"</span>)</span>
<span id="cb2-401"><a href="#cb2-401"></a>        <span class="cf">with</span> col192:</span>
<span id="cb2-402"><a href="#cb2-402"></a>            end_time <span class="op">=</span> st.time_input(<span class="st">'완료 시간'</span>, datetime.time(now_date.hour, now_date.minute), label_visibility<span class="op">=</span><span class="st">"collapsed"</span>)</span>
<span id="cb2-403"><a href="#cb2-403"></a></span>
<span id="cb2-404"><a href="#cb2-404"></a>        <span class="co">## 완료시간 저장 버튼</span></span>
<span id="cb2-405"><a href="#cb2-405"></a>        <span class="cf">if</span> st.form_submit_button(label<span class="op">=</span><span class="st">'저장하기'</span>):</span>
<span id="cb2-406"><a href="#cb2-406"></a>            dispatch_data <span class="op">=</span> pd.read_csv(<span class="st">'./119_emergency_dispatch.csv'</span>, encoding<span class="op">=</span><span class="st">"cp949"</span> )</span>
<span id="cb2-407"><a href="#cb2-407"></a>            id_num <span class="op">=</span> <span class="bu">list</span>(dispatch_data[<span class="st">'ID'</span>].<span class="bu">str</span>[<span class="dv">1</span>:].astype(<span class="bu">int</span>))</span>
<span id="cb2-408"><a href="#cb2-408"></a>            max_num <span class="op">=</span> np.<span class="bu">max</span>(id_num)</span>
<span id="cb2-409"><a href="#cb2-409"></a>            max_id <span class="op">=</span> <span class="st">'P'</span> <span class="op">+</span> <span class="bu">str</span>(max_num)</span>
<span id="cb2-410"><a href="#cb2-410"></a>            elapsed <span class="op">=</span> (end_time.hour <span class="op">-</span> input_time.hour)<span class="op">*</span><span class="dv">60</span> <span class="op">+</span> (end_time.minute <span class="op">-</span> input_time.minute)</span>
<span id="cb2-411"><a href="#cb2-411"></a></span>
<span id="cb2-412"><a href="#cb2-412"></a>            check_condition1 <span class="op">=</span> (dispatch_data.loc[dispatch_data[<span class="st">'ID'</span>] <span class="op">==</span>max_id, <span class="st">'출동일시'</span>].values[<span class="dv">0</span>]  <span class="op">==</span> <span class="bu">str</span>(input_date))</span>
<span id="cb2-413"><a href="#cb2-413"></a>            check_condition2 <span class="op">=</span> (dispatch_data.loc[dispatch_data[<span class="st">'ID'</span>]<span class="op">==</span>max_id, <span class="st">'이름'</span>].values[<span class="dv">0</span>] <span class="op">==</span> name)</span>
<span id="cb2-414"><a href="#cb2-414"></a></span>
<span id="cb2-415"><a href="#cb2-415"></a>            <span class="co">## 마지막 저장 내용과 동일한 경우, 내용을 update 시킴</span></span>
<span id="cb2-416"><a href="#cb2-416"></a>            </span>
<span id="cb2-417"><a href="#cb2-417"></a>            <span class="cf">if</span> check_condition1 <span class="kw">and</span> check_condition2:</span>
<span id="cb2-418"><a href="#cb2-418"></a>                dispatch_data.loc[dispatch_data[<span class="st">'ID'</span>] <span class="op">==</span> max_id, <span class="st">'나이'</span>] <span class="op">=</span> age</span>
<span id="cb2-419"><a href="#cb2-419"></a>                dispatch_data.loc[dispatch_data[<span class="st">'ID'</span>] <span class="op">==</span> max_id, <span class="st">'성별'</span>] <span class="op">=</span> patient_s</span>
<span id="cb2-420"><a href="#cb2-420"></a>                dispatch_data.loc[dispatch_data[<span class="st">'ID'</span>] <span class="op">==</span> max_id, <span class="st">'체온'</span>] <span class="op">=</span> fever</span>
<span id="cb2-421"><a href="#cb2-421"></a>                dispatch_data.loc[dispatch_data[<span class="st">'ID'</span>] <span class="op">==</span> max_id, <span class="st">'수축기 혈압'</span>] <span class="op">=</span> high_blood</span>
<span id="cb2-422"><a href="#cb2-422"></a>                dispatch_data.loc[dispatch_data[<span class="st">'ID'</span>] <span class="op">==</span> max_id, <span class="st">'이완기 혈압'</span>] <span class="op">=</span> low_blood</span>
<span id="cb2-423"><a href="#cb2-423"></a>                dispatch_data.loc[dispatch_data[<span class="st">'ID'</span>] <span class="op">==</span> max_id, <span class="st">'호흡 곤란'</span>] <span class="op">=</span> <span class="bu">int</span>(breath_check)</span>
<span id="cb2-424"><a href="#cb2-424"></a>                dispatch_data.loc[dispatch_data[<span class="st">'ID'</span>] <span class="op">==</span> max_id, <span class="st">'간헐성 경련'</span>] <span class="op">=</span> <span class="bu">int</span>(convulsion_check)</span>
<span id="cb2-425"><a href="#cb2-425"></a>                dispatch_data.loc[dispatch_data[<span class="st">'ID'</span>] <span class="op">==</span> max_id, <span class="st">'설사'</span>] <span class="op">=</span> <span class="bu">int</span>(diarrhea_check)</span>
<span id="cb2-426"><a href="#cb2-426"></a>                dispatch_data.loc[dispatch_data[<span class="st">'ID'</span>] <span class="op">==</span> max_id, <span class="st">'기침'</span>] <span class="op">=</span> <span class="bu">int</span>(cough_check)</span>
<span id="cb2-427"><a href="#cb2-427"></a>                dispatch_data.loc[dispatch_data[<span class="st">'ID'</span>] <span class="op">==</span> max_id, <span class="st">'출혈'</span>] <span class="op">=</span> <span class="bu">int</span>(bleeding_check)</span>
<span id="cb2-428"><a href="#cb2-428"></a>                dispatch_data.loc[dispatch_data[<span class="st">'ID'</span>] <span class="op">==</span> max_id, <span class="st">'통증'</span>] <span class="op">=</span> <span class="bu">int</span>(pain_check)</span>
<span id="cb2-429"><a href="#cb2-429"></a>                dispatch_data.loc[dispatch_data[<span class="st">'ID'</span>] <span class="op">==</span> max_id, <span class="st">'만지면 아프다'</span>] <span class="op">=</span> <span class="bu">int</span>(touch_pain_check)</span>
<span id="cb2-430"><a href="#cb2-430"></a>                dispatch_data.loc[dispatch_data[<span class="st">'ID'</span>] <span class="op">==</span> max_id, <span class="st">'무감각'</span>] <span class="op">=</span> <span class="bu">int</span>(insensitive_check)</span>
<span id="cb2-431"><a href="#cb2-431"></a>                dispatch_data.loc[dispatch_data[<span class="st">'ID'</span>] <span class="op">==</span> max_id, <span class="st">'마비'</span>] <span class="op">=</span> <span class="bu">int</span>(paralysis_check)</span>
<span id="cb2-432"><a href="#cb2-432"></a>                dispatch_data.loc[dispatch_data[<span class="st">'ID'</span>] <span class="op">==</span> max_id, <span class="st">'현기증'</span>] <span class="op">=</span> <span class="bu">int</span>(dizziness_check)</span>
<span id="cb2-433"><a href="#cb2-433"></a>                dispatch_data.loc[dispatch_data[<span class="st">'ID'</span>] <span class="op">==</span> max_id, <span class="st">'졸도'</span>] <span class="op">=</span> <span class="bu">int</span>(swoon_check)</span>
<span id="cb2-434"><a href="#cb2-434"></a>                dispatch_data.loc[dispatch_data[<span class="st">'ID'</span>] <span class="op">==</span> max_id, <span class="st">'말이 어눌해졌다'</span>] <span class="op">=</span> <span class="bu">int</span>(inarticulate_check)</span>
<span id="cb2-435"><a href="#cb2-435"></a>                dispatch_data.loc[dispatch_data[<span class="st">'ID'</span>] <span class="op">==</span> max_id, <span class="st">'시력이 흐려짐'</span>] <span class="op">=</span> <span class="bu">int</span>(blurred_check)</span>
<span id="cb2-436"><a href="#cb2-436"></a>                dispatch_data.loc[dispatch_data[<span class="st">'ID'</span>] <span class="op">==</span> max_id, <span class="st">'중증질환'</span>] <span class="op">=</span> special_m</span>
<span id="cb2-437"><a href="#cb2-437"></a>                dispatch_data.loc[dispatch_data[<span class="st">'ID'</span>] <span class="op">==</span> max_id, <span class="st">'이송 시간'</span>] <span class="op">=</span> <span class="bu">int</span>(elapsed)</span>
<span id="cb2-438"><a href="#cb2-438"></a></span>
<span id="cb2-439"><a href="#cb2-439"></a>            <span class="cf">else</span>: <span class="co"># 새로운 출동 이력 추가하기</span></span>
<span id="cb2-440"><a href="#cb2-440"></a>                new_id <span class="op">=</span> <span class="st">'P'</span> <span class="op">+</span> <span class="bu">str</span>(max_num<span class="op">+</span><span class="dv">1</span>)</span>
<span id="cb2-441"><a href="#cb2-441"></a>                new_data <span class="op">=</span> {</span>
<span id="cb2-442"><a href="#cb2-442"></a>                    <span class="st">"ID"</span> : [new_id],</span>
<span id="cb2-443"><a href="#cb2-443"></a>                    <span class="st">"출동일시"</span> : [<span class="bu">str</span>(input_date)],</span>
<span id="cb2-444"><a href="#cb2-444"></a>                    <span class="st">"이름"</span> : [name],</span>
<span id="cb2-445"><a href="#cb2-445"></a>                    <span class="st">"성별"</span> : [patient_s],</span>
<span id="cb2-446"><a href="#cb2-446"></a>                    <span class="st">"나이"</span> : [age],</span>
<span id="cb2-447"><a href="#cb2-447"></a>                    <span class="st">"체온"</span>: [fever],</span>
<span id="cb2-448"><a href="#cb2-448"></a>                    <span class="st">"수축기 혈압"</span>: [high_blood],</span>
<span id="cb2-449"><a href="#cb2-449"></a>                    <span class="st">"이완기 혈압"</span>: [low_blood],</span>
<span id="cb2-450"><a href="#cb2-450"></a>                    <span class="st">"호흡 곤란"</span>: [<span class="bu">int</span>(breath_check)],</span>
<span id="cb2-451"><a href="#cb2-451"></a>                    <span class="st">"간헐성 경련"</span>: [<span class="bu">int</span>(convulsion_check)],</span>
<span id="cb2-452"><a href="#cb2-452"></a>                    <span class="st">"설사"</span>: [<span class="bu">int</span>(diarrhea_check)],</span>
<span id="cb2-453"><a href="#cb2-453"></a>                    <span class="st">"기침"</span>: [<span class="bu">int</span>(cough_check)],</span>
<span id="cb2-454"><a href="#cb2-454"></a>                    <span class="st">"출혈"</span>: [<span class="bu">int</span>(bleeding_check)],</span>
<span id="cb2-455"><a href="#cb2-455"></a>                    <span class="st">"통증"</span>: [<span class="bu">int</span>(pain_check)],</span>
<span id="cb2-456"><a href="#cb2-456"></a>                    <span class="st">"만지면 아프다"</span>: [<span class="bu">int</span>(touch_pain_check)],</span>
<span id="cb2-457"><a href="#cb2-457"></a>                    <span class="st">"무감각"</span>: [<span class="bu">int</span>(insensitive_check)],</span>
<span id="cb2-458"><a href="#cb2-458"></a>                    <span class="st">"마비"</span>: [<span class="bu">int</span>(paralysis_check)],</span>
<span id="cb2-459"><a href="#cb2-459"></a>                    <span class="st">"현기증"</span>: [<span class="bu">int</span>(dizziness_check)],</span>
<span id="cb2-460"><a href="#cb2-460"></a>                    <span class="st">"졸도"</span>: [<span class="bu">int</span>(swoon_check)],</span>
<span id="cb2-461"><a href="#cb2-461"></a>                    <span class="st">"말이 어눌해졌다"</span>: [<span class="bu">int</span>(inarticulate_check)],</span>
<span id="cb2-462"><a href="#cb2-462"></a>                    <span class="st">"시력이 흐려짐"</span>: [<span class="bu">int</span>(blurred_check)],</span>
<span id="cb2-463"><a href="#cb2-463"></a>                    <span class="st">"중증질환"</span>: [special_m],</span>
<span id="cb2-464"><a href="#cb2-464"></a>                    <span class="st">"이송 시간"</span> : [<span class="bu">int</span>(elapsed)]</span>
<span id="cb2-465"><a href="#cb2-465"></a>                }</span>
<span id="cb2-466"><a href="#cb2-466"></a></span>
<span id="cb2-467"><a href="#cb2-467"></a>                new_df<span class="op">=</span> pd.DataFrame(new_data)</span>
<span id="cb2-468"><a href="#cb2-468"></a>                dispatch_data <span class="op">=</span> pd.concat([dispatch_data, new_df], axis<span class="op">=</span><span class="dv">0</span>, ignore_index<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb2-469"><a href="#cb2-469"></a></span>
<span id="cb2-470"><a href="#cb2-470"></a>            dispatch_data.to_csv(<span class="st">'./119_emergency_dispatch.csv'</span>, encoding<span class="op">=</span><span class="st">"cp949"</span>, index<span class="op">=</span><span class="va">False</span>)</span>
<span id="cb2-471"><a href="#cb2-471"></a></span>
<span id="cb2-472"><a href="#cb2-472"></a>    <span class="co"># -------------------- 완료시간 저장하기 </span><span class="re">END</span><span class="co">-------------------- </span></span>
<span id="cb2-473"><a href="#cb2-473"></a></span>
<span id="cb2-474"><a href="#cb2-474"></a><span class="co"># -------------------- Streamlit 웹 화면 구성 End --------------------</span></span>
<span id="cb2-475"><a href="#cb2-475"></a><span class="co"># 라이브러리 불러오기 </span></span>
<span id="cb2-476"><a href="#cb2-476"></a></span>
<span id="cb2-477"><a href="#cb2-477"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb2-478"><a href="#cb2-478"></a><span class="im">import</span> streamlit <span class="im">as</span> st</span>
<span id="cb2-479"><a href="#cb2-479"></a><span class="im">import</span> numpy <span class="im">as</span> np</span>
<span id="cb2-480"><a href="#cb2-480"></a><span class="im">import</span> datetime</span>
<span id="cb2-481"><a href="#cb2-481"></a><span class="im">import</span> plotly.express <span class="im">as</span> px</span>
<span id="cb2-482"><a href="#cb2-482"></a></span>
<span id="cb2-483"><a href="#cb2-483"></a></span>
<span id="cb2-484"><a href="#cb2-484"></a><span class="co"># -------------------- ▼ 필요 변수 생성 코딩 Start ▼ --------------------</span></span>
<span id="cb2-485"><a href="#cb2-485"></a></span>
<span id="cb2-486"><a href="#cb2-486"></a>data <span class="op">=</span> pd.read_csv(<span class="st">'./119_emergency_dispatch.csv'</span>, encoding<span class="op">=</span><span class="st">"cp949"</span>)</span>
<span id="cb2-487"><a href="#cb2-487"></a></span>
<span id="cb2-488"><a href="#cb2-488"></a><span class="co">## 오늘 날짜</span></span>
<span id="cb2-489"><a href="#cb2-489"></a>now_date <span class="op">=</span> datetime.datetime.now(datetime.timezone.utc) <span class="op">+</span> datetime.timedelta(hours<span class="op">=</span><span class="dv">9</span>)</span>
<span id="cb2-490"><a href="#cb2-490"></a>now_date2 <span class="op">=</span> datetime.datetime.strptime(now_date.strftime(<span class="st">"%Y-%m-</span><span class="sc">%d</span><span class="st">"</span>), <span class="st">"%Y-%m-</span><span class="sc">%d</span><span class="st">"</span>)</span>
<span id="cb2-491"><a href="#cb2-491"></a></span>
<span id="cb2-492"><a href="#cb2-492"></a><span class="co">## 2023년 최소 날짜, 최대 날짜</span></span>
<span id="cb2-493"><a href="#cb2-493"></a>first_date <span class="op">=</span> pd.to_datetime(<span class="st">"2023-01-01"</span>)</span>
<span id="cb2-494"><a href="#cb2-494"></a>last_date <span class="op">=</span> pd.to_datetime(<span class="st">"2023-12-31"</span>)</span>
<span id="cb2-495"><a href="#cb2-495"></a></span>
<span id="cb2-496"><a href="#cb2-496"></a><span class="co">## 출동 이력의 최소 날짜, 최대 날짜</span></span>
<span id="cb2-497"><a href="#cb2-497"></a>min_date <span class="op">=</span> datetime.datetime.strptime(data[<span class="st">'출동일시'</span>].<span class="bu">min</span>(), <span class="st">"%Y-%m-</span><span class="sc">%d</span><span class="st">"</span>)</span>
<span id="cb2-498"><a href="#cb2-498"></a>max_date <span class="op">=</span> datetime.datetime.strptime(data[<span class="st">'출동일시'</span>].<span class="bu">max</span>(), <span class="st">"%Y-%m-</span><span class="sc">%d</span><span class="st">"</span>)</span>
<span id="cb2-499"><a href="#cb2-499"></a></span>
<span id="cb2-500"><a href="#cb2-500"></a></span>
<span id="cb2-501"><a href="#cb2-501"></a><span class="co"># -------------------- ▲ 필요 변수 생성 코딩 End ▲ --------------------</span></span>
<span id="cb2-502"><a href="#cb2-502"></a></span>
<span id="cb2-503"><a href="#cb2-503"></a></span>
<span id="cb2-504"><a href="#cb2-504"></a><span class="co"># -------------------- ▼ Streamlit 웹 화면 구성 START ▼ --------------------</span></span>
<span id="cb2-505"><a href="#cb2-505"></a></span>
<span id="cb2-506"><a href="#cb2-506"></a><span class="co"># 레이아웃 구성하기 </span></span>
<span id="cb2-507"><a href="#cb2-507"></a><span class="co"># tabs 만들기 </span></span>
<span id="cb2-508"><a href="#cb2-508"></a><span class="co">#with tab1 :</span></span>
<span id="cb2-509"><a href="#cb2-509"></a><span class="cf">with</span> tab2:</span>
<span id="cb2-510"><a href="#cb2-510"></a>    st.markdown(<span class="st">"## 대시 보드"</span>)</span>
<span id="cb2-511"><a href="#cb2-511"></a><span class="co"># tab2 내용 구성하기</span></span>
<span id="cb2-512"><a href="#cb2-512"></a></span>
<span id="cb2-513"><a href="#cb2-513"></a>    col210, col211, col212 <span class="op">=</span> st.columns([<span class="fl">0.35</span>, <span class="fl">0.25</span>, <span class="fl">0.1</span>])</span>
<span id="cb2-514"><a href="#cb2-514"></a>    <span class="cf">with</span> col210 :</span>
<span id="cb2-515"><a href="#cb2-515"></a>        slider_date <span class="op">=</span> st.slider(<span class="st">"날짜"</span>, min_value <span class="op">=</span> min_date, max_value <span class="op">=</span> max_date,</span>
<span id="cb2-516"><a href="#cb2-516"></a>                                        value <span class="op">=</span> (min_date,now_date2))</span>
<span id="cb2-517"><a href="#cb2-517"></a>    </span>
<span id="cb2-518"><a href="#cb2-518"></a>    <span class="cf">with</span> col211 :</span>
<span id="cb2-519"><a href="#cb2-519"></a>        slider_week <span class="op">=</span> st.slider(<span class="st">"주간"</span>, min_value <span class="op">=</span> min_date, max_value <span class="op">=</span> max_date,</span>
<span id="cb2-520"><a href="#cb2-520"></a>                                        step <span class="op">=</span> datetime.timedelta(weeks <span class="op">=</span> <span class="dv">1</span>), value <span class="op">=</span> (min_date,now_date2))</span>
<span id="cb2-521"><a href="#cb2-521"></a></span>
<span id="cb2-522"><a href="#cb2-522"></a>    <span class="cf">with</span> col212 :</span>
<span id="cb2-523"><a href="#cb2-523"></a>        slider_month <span class="op">=</span> st.slider(<span class="st">"월간"</span>, min_value <span class="op">=</span> min_date, max_value <span class="op">=</span> max_date,</span>
<span id="cb2-524"><a href="#cb2-524"></a>                                        step <span class="op">=</span> datetime.timedelta(weeks <span class="op">=</span> <span class="dv">1</span>), value <span class="op">=</span> (min_date,now_date2), <span class="bu">format</span> <span class="op">=</span> <span class="st">"YYYY-MM"</span>)</span>
<span id="cb2-525"><a href="#cb2-525"></a>    </span>
<span id="cb2-526"><a href="#cb2-526"></a>    <span class="co">## -------------------- ▼ 2-0그룹 금일 출동 이력 출력 ▼ --------------------</span></span>
<span id="cb2-527"><a href="#cb2-527"></a>    data <span class="op">=</span> pd.read_csv(<span class="st">"119_emergency_dispatch.csv"</span>, encoding <span class="op">=</span> <span class="st">"cp949"</span>)</span>
<span id="cb2-528"><a href="#cb2-528"></a>    st.info(<span class="st">"금일 출동 내역"</span>)</span>
<span id="cb2-529"><a href="#cb2-529"></a>    data[<span class="st">"datetime"</span>] <span class="op">=</span> pd.to_datetime(data[<span class="st">"출동일시"</span>])</span>
<span id="cb2-530"><a href="#cb2-530"></a>    st.dataframe(data[(slider_date[<span class="dv">0</span>] <span class="op">&lt;=</span> data[<span class="st">"datetime"</span>]) <span class="op">&amp;</span> (data[<span class="st">"datetime"</span>] <span class="op">&lt;=</span> slider_date[<span class="dv">1</span>])])</span>
<span id="cb2-531"><a href="#cb2-531"></a>    </span>
<span id="cb2-532"><a href="#cb2-532"></a>    today_date <span class="op">=</span> now_date.strftime(<span class="st">"%Y-%m-</span><span class="sc">%d</span><span class="st">"</span>)</span>
<span id="cb2-533"><a href="#cb2-533"></a>    today_count <span class="op">=</span> <span class="bu">len</span>(data[data[<span class="st">"datetime"</span>] <span class="op">==</span> today_date] )</span>
<span id="cb2-534"><a href="#cb2-534"></a>    </span>
<span id="cb2-535"><a href="#cb2-535"></a>    <span class="cf">if</span> today_count <span class="op">&gt;</span> <span class="dv">0</span> :</span>
<span id="cb2-536"><a href="#cb2-536"></a>        st.dataframe(data.loc[<span class="bu">map</span>(<span class="kw">lambda</span> x : x <span class="op">==</span> today_date, data.datetime), : ])</span>
<span id="cb2-537"><a href="#cb2-537"></a>    <span class="cf">else</span>:</span>
<span id="cb2-538"><a href="#cb2-538"></a>        st.markdown(<span class="st">"금일 출동내역이 없습니다."</span>)</span>
<span id="cb2-539"><a href="#cb2-539"></a></span>
<span id="cb2-540"><a href="#cb2-540"></a>    <span class="co">## -------------------- ▼ 2-1그룹 통계 조회 기간 선택하기 ▼ --------------------</span></span>
<span id="cb2-541"><a href="#cb2-541"></a>    <span class="co">## 선택된 일자의 data 추출</span></span>
<span id="cb2-542"><a href="#cb2-542"></a>    </span>
<span id="cb2-543"><a href="#cb2-543"></a>    day_list_df <span class="op">=</span> data[(slider_date[<span class="dv">0</span>] <span class="op">&lt;=</span> data[<span class="st">"datetime"</span>]) <span class="op">&amp;</span> (data[<span class="st">"datetime"</span>] <span class="op">&lt;=</span> slider_date[<span class="dv">1</span>])]</span>
<span id="cb2-544"><a href="#cb2-544"></a>    </span>
<span id="cb2-545"><a href="#cb2-545"></a>    <span class="co">## 선택된 주간의 data 추출</span></span>
<span id="cb2-546"><a href="#cb2-546"></a>    data[<span class="st">'주별'</span>] <span class="op">=</span> data[<span class="st">'datetime'</span>].dt.strftime(<span class="st">"%W"</span>).astype(<span class="bu">int</span>)</span>
<span id="cb2-547"><a href="#cb2-547"></a>    min_week <span class="op">=</span> <span class="bu">int</span>(slider_week[<span class="dv">0</span>].strftime(<span class="st">"%W"</span>))</span>
<span id="cb2-548"><a href="#cb2-548"></a>    max_week <span class="op">=</span> <span class="bu">int</span>(slider_week[<span class="dv">1</span>].strftime(<span class="st">"%W"</span>))</span>
<span id="cb2-549"><a href="#cb2-549"></a>    </span>
<span id="cb2-550"><a href="#cb2-550"></a>    week_list_df <span class="op">=</span> data[(data[<span class="st">'주별'</span>] <span class="op">&gt;=</span> min_week) <span class="op">&amp;</span> (data[<span class="st">'주별'</span>] <span class="op">&lt;=</span> max_week)]</span>
<span id="cb2-551"><a href="#cb2-551"></a>    </span>
<span id="cb2-552"><a href="#cb2-552"></a>    </span>
<span id="cb2-553"><a href="#cb2-553"></a>    <span class="co">## 선택된 월의 데이터 추출</span></span>
<span id="cb2-554"><a href="#cb2-554"></a>    data[<span class="st">'월별'</span>] <span class="op">=</span> data[<span class="st">'datetime'</span>].dt.month.astype(<span class="bu">int</span>)</span>
<span id="cb2-555"><a href="#cb2-555"></a>    min_month <span class="op">=</span> slider_month[<span class="dv">0</span>].month</span>
<span id="cb2-556"><a href="#cb2-556"></a>    max_month <span class="op">=</span> slider_month[<span class="dv">1</span>].month</span>
<span id="cb2-557"><a href="#cb2-557"></a>    month_list_df <span class="op">=</span> data[(data[<span class="st">'월별'</span>] <span class="op">&gt;=</span> min_month) <span class="op">&amp;</span> (data[<span class="st">'월별'</span>] <span class="op">&lt;=</span> max_month)]</span>
<span id="cb2-558"><a href="#cb2-558"></a>    </span>
<span id="cb2-559"><a href="#cb2-559"></a>    </span>
<span id="cb2-560"><a href="#cb2-560"></a>    week_list_df.to_csv(<span class="st">"temp.csv"</span>,index <span class="op">=</span> <span class="va">False</span>)</span>
<span id="cb2-561"><a href="#cb2-561"></a>    <span class="co">## -------------------- ▼ 2-2. 그룹 일간/주간/월간 평균 이송시간 통계 그래프 ▼ --------------------</span></span>
<span id="cb2-562"><a href="#cb2-562"></a>    </span>
<span id="cb2-563"><a href="#cb2-563"></a>    st.info(<span class="st">"이송시간 평균 그래프"</span>)</span>
<span id="cb2-564"><a href="#cb2-564"></a>    col230, col231, col232 <span class="op">=</span> st.columns(<span class="dv">3</span>)</span>
<span id="cb2-565"><a href="#cb2-565"></a>    <span class="cf">with</span> col230 : </span>
<span id="cb2-566"><a href="#cb2-566"></a>        fig <span class="op">=</span> day_list_df.groupby(<span class="st">"datetime"</span>, </span>
<span id="cb2-567"><a href="#cb2-567"></a>                            as_index <span class="op">=</span> <span class="va">False</span>)[[<span class="st">"이송 시간"</span>]].mean().<span class="op">\</span></span>
<span id="cb2-568"><a href="#cb2-568"></a>                                plot(x <span class="op">=</span> <span class="st">"datetime"</span>, y <span class="op">=</span> <span class="st">"이송 시간"</span>, </span>
<span id="cb2-569"><a href="#cb2-569"></a>                                     backend <span class="op">=</span> <span class="st">"plotly"</span>, kind <span class="op">=</span> <span class="st">"line"</span>, </span>
<span id="cb2-570"><a href="#cb2-570"></a>                                     title <span class="op">=</span> <span class="st">"일별"</span>, width <span class="op">=</span> <span class="dv">400</span>)</span>
<span id="cb2-571"><a href="#cb2-571"></a>        fig.update_layout(title_x <span class="op">=</span> <span class="fl">0.5</span>)</span>
<span id="cb2-572"><a href="#cb2-572"></a>        st.plotly_chart(fig)</span>
<span id="cb2-573"><a href="#cb2-573"></a>    <span class="cf">with</span> col231 : </span>
<span id="cb2-574"><a href="#cb2-574"></a>        fig <span class="op">=</span> week_list_df.groupby(<span class="st">"주별"</span>, </span>
<span id="cb2-575"><a href="#cb2-575"></a>                            as_index <span class="op">=</span> <span class="va">False</span>)[[<span class="st">"이송 시간"</span>]].mean().<span class="op">\</span></span>
<span id="cb2-576"><a href="#cb2-576"></a>                                plot(x <span class="op">=</span> <span class="st">"주별"</span>, y <span class="op">=</span> <span class="st">"이송 시간"</span>, </span>
<span id="cb2-577"><a href="#cb2-577"></a>                                     backend <span class="op">=</span> <span class="st">"plotly"</span>, kind <span class="op">=</span> <span class="st">"line"</span>, </span>
<span id="cb2-578"><a href="#cb2-578"></a>                                     title <span class="op">=</span> <span class="st">"주별"</span>, width <span class="op">=</span> <span class="dv">400</span>)</span>
<span id="cb2-579"><a href="#cb2-579"></a>        fig.update_layout(title_x <span class="op">=</span> <span class="fl">0.5</span>)</span>
<span id="cb2-580"><a href="#cb2-580"></a>        st.plotly_chart(fig)</span>
<span id="cb2-581"><a href="#cb2-581"></a>    <span class="cf">with</span> col232 : </span>
<span id="cb2-582"><a href="#cb2-582"></a>        fig <span class="op">=</span> month_list_df.groupby(<span class="st">"월별"</span>, </span>
<span id="cb2-583"><a href="#cb2-583"></a>                            as_index <span class="op">=</span> <span class="va">False</span>)[[<span class="st">"이송 시간"</span>]].mean().<span class="op">\</span></span>
<span id="cb2-584"><a href="#cb2-584"></a>                                plot(x <span class="op">=</span> <span class="st">"월별"</span>, y <span class="op">=</span> <span class="st">"이송 시간"</span>, </span>
<span id="cb2-585"><a href="#cb2-585"></a>                                     backend <span class="op">=</span> <span class="st">"plotly"</span>, kind <span class="op">=</span> <span class="st">"line"</span>, </span>
<span id="cb2-586"><a href="#cb2-586"></a>                                     title <span class="op">=</span> <span class="st">"월별"</span>,</span>
<span id="cb2-587"><a href="#cb2-587"></a>                                     width <span class="op">=</span> <span class="dv">400</span>)</span>
<span id="cb2-588"><a href="#cb2-588"></a>        fig.update_layout(title_x <span class="op">=</span> <span class="fl">0.5</span>)</span>
<span id="cb2-589"><a href="#cb2-589"></a>        st.plotly_chart(fig)</span>
<span id="cb2-590"><a href="#cb2-590"></a></span>
<span id="cb2-591"><a href="#cb2-591"></a>        </span>
<span id="cb2-592"><a href="#cb2-592"></a>        <span class="co">## -------------------- ▼ 2-3 그룹 일간/주간/월간 총 출동 건수 통계 그래프 ▼ --------------------</span></span>
<span id="cb2-593"><a href="#cb2-593"></a></span>
<span id="cb2-594"><a href="#cb2-594"></a>    select_bins <span class="op">=</span> st.radio(<span class="st">"주기"</span>, (<span class="st">"일간"</span>, <span class="st">"주간"</span>, <span class="st">"월간"</span>), horizontal<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb2-595"><a href="#cb2-595"></a>        </span>
<span id="cb2-596"><a href="#cb2-596"></a>    <span class="cf">if</span> select_bins <span class="op">==</span> <span class="st">"일간"</span> :</span>
<span id="cb2-597"><a href="#cb2-597"></a>        select_df <span class="op">=</span> day_list_df.copy()</span>
<span id="cb2-598"><a href="#cb2-598"></a>        fig <span class="op">=</span> select_df.groupby(<span class="st">"datetime"</span>, </span>
<span id="cb2-599"><a href="#cb2-599"></a>                            as_index <span class="op">=</span> <span class="va">False</span>)[[<span class="st">"ID"</span>]].count().<span class="op">\</span></span>
<span id="cb2-600"><a href="#cb2-600"></a>                                rename(columns <span class="op">=</span> {<span class="st">"ID"</span> : <span class="st">"count"</span>}).<span class="op">\</span></span>
<span id="cb2-601"><a href="#cb2-601"></a>                                plot(x <span class="op">=</span> <span class="st">"datetime"</span>, y <span class="op">=</span> <span class="st">"count"</span>, </span>
<span id="cb2-602"><a href="#cb2-602"></a>                                     backend <span class="op">=</span> <span class="st">"plotly"</span>, kind <span class="op">=</span> <span class="st">"bar"</span>, </span>
<span id="cb2-603"><a href="#cb2-603"></a>                                     color <span class="op">=</span> <span class="st">"datetime"</span>, </span>
<span id="cb2-604"><a href="#cb2-604"></a>                                     title <span class="op">=</span> <span class="st">"일간 출동 건수"</span>, </span>
<span id="cb2-605"><a href="#cb2-605"></a>                                     width <span class="op">=</span> <span class="dv">1200</span>, opacity <span class="op">=</span> <span class="fl">0.7</span>)</span>
<span id="cb2-606"><a href="#cb2-606"></a>        fig.update_layout(showlegend<span class="op">=</span><span class="va">False</span>, title_x <span class="op">=</span> <span class="fl">0.5</span>)</span>
<span id="cb2-607"><a href="#cb2-607"></a>        st.plotly_chart(fig)</span>
<span id="cb2-608"><a href="#cb2-608"></a>        </span>
<span id="cb2-609"><a href="#cb2-609"></a>    <span class="cf">elif</span> select_bins <span class="op">==</span> <span class="st">"주간"</span> :</span>
<span id="cb2-610"><a href="#cb2-610"></a>        select_df <span class="op">=</span> week_list_df.copy()</span>
<span id="cb2-611"><a href="#cb2-611"></a>        fig <span class="op">=</span> select_df.groupby(<span class="st">"주별"</span>, </span>
<span id="cb2-612"><a href="#cb2-612"></a>                            as_index <span class="op">=</span> <span class="va">False</span>)[[<span class="st">"ID"</span>]].count().<span class="op">\</span></span>
<span id="cb2-613"><a href="#cb2-613"></a>                                rename(columns <span class="op">=</span> {<span class="st">"ID"</span> : <span class="st">"count"</span>}).<span class="op">\</span></span>
<span id="cb2-614"><a href="#cb2-614"></a>                                plot(x <span class="op">=</span> <span class="st">"주별"</span>, y <span class="op">=</span> <span class="st">"count"</span>, </span>
<span id="cb2-615"><a href="#cb2-615"></a>                                     backend <span class="op">=</span> <span class="st">"plotly"</span>, kind <span class="op">=</span> <span class="st">"bar"</span>,</span>
<span id="cb2-616"><a href="#cb2-616"></a>                                     title <span class="op">=</span> <span class="st">"주간 출동 건수"</span>, </span>
<span id="cb2-617"><a href="#cb2-617"></a>                                     width <span class="op">=</span> <span class="dv">1200</span>, text_auto <span class="op">=</span> <span class="st">".2s"</span>)</span>
<span id="cb2-618"><a href="#cb2-618"></a>        fig.update_layout( title_x <span class="op">=</span> <span class="fl">0.5</span>)</span>
<span id="cb2-619"><a href="#cb2-619"></a>        fig.update_traces(textfont_size<span class="op">=</span><span class="dv">12</span>, textangle<span class="op">=</span><span class="dv">0</span>, textposition<span class="op">=</span><span class="st">"outside"</span>, cliponaxis<span class="op">=</span><span class="va">False</span>)</span>
<span id="cb2-620"><a href="#cb2-620"></a>        st.plotly_chart(fig)</span>
<span id="cb2-621"><a href="#cb2-621"></a>    <span class="cf">else</span> : </span>
<span id="cb2-622"><a href="#cb2-622"></a>        select_df <span class="op">=</span> month_list_df.copy()</span>
<span id="cb2-623"><a href="#cb2-623"></a>        fig <span class="op">=</span> select_df.groupby(<span class="st">"월별"</span>, </span>
<span id="cb2-624"><a href="#cb2-624"></a>                            as_index <span class="op">=</span> <span class="va">False</span>)[[<span class="st">"ID"</span>]].count().<span class="op">\</span></span>
<span id="cb2-625"><a href="#cb2-625"></a>                                rename(columns <span class="op">=</span> {<span class="st">"ID"</span> : <span class="st">"count"</span>}).<span class="op">\</span></span>
<span id="cb2-626"><a href="#cb2-626"></a>                                plot(x <span class="op">=</span> <span class="st">"월별"</span>, y <span class="op">=</span> <span class="st">"count"</span>, </span>
<span id="cb2-627"><a href="#cb2-627"></a>                                     backend <span class="op">=</span> <span class="st">"plotly"</span>, kind <span class="op">=</span> <span class="st">"bar"</span>, </span>
<span id="cb2-628"><a href="#cb2-628"></a>                                     title <span class="op">=</span> <span class="st">"월간 출동 건수"</span>, </span>
<span id="cb2-629"><a href="#cb2-629"></a>                                     width <span class="op">=</span> <span class="dv">1200</span>, text_auto <span class="op">=</span> <span class="st">".2s"</span>)</span>
<span id="cb2-630"><a href="#cb2-630"></a>        fig.update_traces(textfont_size<span class="op">=</span><span class="dv">12</span>, textangle<span class="op">=</span><span class="dv">0</span>, textposition<span class="op">=</span><span class="st">"outside"</span>, cliponaxis<span class="op">=</span><span class="va">False</span>)</span>
<span id="cb2-631"><a href="#cb2-631"></a>        fig.update_layout(showlegend<span class="op">=</span><span class="va">False</span>, title_x <span class="op">=</span> <span class="fl">0.5</span>)</span>
<span id="cb2-632"><a href="#cb2-632"></a>        st.plotly_chart(fig)</span>
<span id="cb2-633"><a href="#cb2-633"></a>        </span>
<span id="cb2-634"><a href="#cb2-634"></a>    <span class="co">## -------------------- ▼ 2-4 성별/중증질환/나이대 별 비율 그래프 ▼ --------------------</span></span>
<span id="cb2-635"><a href="#cb2-635"></a>    </span>
<span id="cb2-636"><a href="#cb2-636"></a>    st.warning(<span class="st">"성별/중증질환/나이대 비율"</span>)</span>
<span id="cb2-637"><a href="#cb2-637"></a>    col240, col241, col242 <span class="op">=</span> st.columns(<span class="dv">3</span>)</span>
<span id="cb2-638"><a href="#cb2-638"></a>    select_df[<span class="st">"성별"</span>].replace([<span class="st">"남자"</span>,<span class="st">"여자"</span>],[<span class="st">"남성"</span>,<span class="st">"여성"</span>], inplace <span class="op">=</span> <span class="va">True</span>)</span>
<span id="cb2-639"><a href="#cb2-639"></a>    </span>
<span id="cb2-640"><a href="#cb2-640"></a>    <span class="cf">with</span> col240: <span class="co"># 성별 통계</span></span>
<span id="cb2-641"><a href="#cb2-641"></a>        temp <span class="op">=</span> select_df[<span class="st">"성별"</span>].value_counts(normalize<span class="op">=</span><span class="va">True</span>).reset_index()</span>
<span id="cb2-642"><a href="#cb2-642"></a>        fig <span class="op">=</span> px.pie(temp, values <span class="op">=</span> <span class="st">"proportion"</span>, names <span class="op">=</span> <span class="st">"성별"</span>, hole <span class="op">=</span> <span class="fl">0.3</span>, color <span class="op">=</span> <span class="st">"성별"</span>,width <span class="op">=</span> <span class="dv">400</span>, title <span class="op">=</span> <span class="st">"남/여 비율"</span>)</span>
<span id="cb2-643"><a href="#cb2-643"></a>        fig.update_traces(textposition<span class="op">=</span><span class="st">'inside'</span>, textinfo<span class="op">=</span><span class="st">'percent+label'</span>)</span>
<span id="cb2-644"><a href="#cb2-644"></a>        fig.update_layout(showlegend <span class="op">=</span> <span class="va">False</span>, title_x <span class="op">=</span> <span class="fl">0.38</span>)</span>
<span id="cb2-645"><a href="#cb2-645"></a>        st.plotly_chart(fig)</span>
<span id="cb2-646"><a href="#cb2-646"></a>        <span class="co">## bar_chart 그리기</span></span>
<span id="cb2-647"><a href="#cb2-647"></a>    </span>
<span id="cb2-648"><a href="#cb2-648"></a>    <span class="cf">with</span> col241: <span class="co"># 중증질환별 통계</span></span>
<span id="cb2-649"><a href="#cb2-649"></a>        temp <span class="op">=</span> select_df[<span class="st">"중증질환"</span>].value_counts(normalize<span class="op">=</span><span class="va">True</span>).reset_index()</span>
<span id="cb2-650"><a href="#cb2-650"></a>        fig <span class="op">=</span> px.pie(temp, values <span class="op">=</span> <span class="st">"proportion"</span>, names <span class="op">=</span> <span class="st">"중증질환"</span>, hole <span class="op">=</span> <span class="fl">0.3</span>, color <span class="op">=</span> <span class="st">"중증질환"</span>, width <span class="op">=</span> <span class="dv">400</span>, title <span class="op">=</span> <span class="st">"중증질환 비율"</span>)</span>
<span id="cb2-651"><a href="#cb2-651"></a>        fig.update_traces(textposition<span class="op">=</span><span class="st">'inside'</span>, textinfo<span class="op">=</span><span class="st">'percent+label'</span>)</span>
<span id="cb2-652"><a href="#cb2-652"></a>        fig.update_layout(showlegend <span class="op">=</span> <span class="va">False</span>, title_x <span class="op">=</span> <span class="fl">0.37</span>)</span>
<span id="cb2-653"><a href="#cb2-653"></a>        st.plotly_chart(fig)</span>
<span id="cb2-654"><a href="#cb2-654"></a>        </span>
<span id="cb2-655"><a href="#cb2-655"></a>    <span class="cf">with</span> col242: <span class="co"># 나이대 별 통계</span></span>
<span id="cb2-656"><a href="#cb2-656"></a>        select_df[<span class="st">'나이대'</span>] <span class="op">=</span> (select_df[<span class="st">'나이'</span>]<span class="op">//</span><span class="dv">10</span>)<span class="op">*</span><span class="dv">10</span></span>
<span id="cb2-657"><a href="#cb2-657"></a>        temp <span class="op">=</span> select_df[<span class="st">"나이대"</span>].value_counts(normalize<span class="op">=</span><span class="va">True</span>).reset_index()</span>
<span id="cb2-658"><a href="#cb2-658"></a>        fig <span class="op">=</span> px.pie(temp, values <span class="op">=</span> <span class="st">"proportion"</span>, names <span class="op">=</span> <span class="st">"나이대"</span>, hole <span class="op">=</span> <span class="fl">0.3</span>, color <span class="op">=</span> <span class="st">"나이대"</span>, width <span class="op">=</span> <span class="dv">400</span>,title <span class="op">=</span> <span class="st">"나이대 비율"</span>)</span>
<span id="cb2-659"><a href="#cb2-659"></a>        fig.update_traces(textposition<span class="op">=</span><span class="st">'inside'</span>, textinfo<span class="op">=</span><span class="st">'percent+label'</span>)</span>
<span id="cb2-660"><a href="#cb2-660"></a>        fig.update_layout(showlegend <span class="op">=</span> <span class="va">False</span>, title_x <span class="op">=</span> <span class="fl">0.38</span>)</span>
<span id="cb2-661"><a href="#cb2-661"></a>        st.plotly_chart(fig)</span>
<span id="cb2-662"><a href="#cb2-662"></a>        <span class="co">## bar_chart 그리기</span></span>
<span id="cb2-663"><a href="#cb2-663"></a></span>
<span id="cb2-664"><a href="#cb2-664"></a>        </span>
<span id="cb2-665"><a href="#cb2-665"></a>        <span class="co">#####################################################################################################################################################################</span></span>
<span id="cb2-666"><a href="#cb2-666"></a><span class="co"># 나이대별 중증질환(추가 진행)</span></span>
<span id="cb2-667"><a href="#cb2-667"></a>    st.info(<span class="st">'나이대별 중증질환'</span>)</span>
<span id="cb2-668"><a href="#cb2-668"></a>    select_age <span class="op">=</span> st.radio(<span class="st">"나이대 선택"</span>, (<span class="dv">0</span>, <span class="dv">10</span>, <span class="dv">20</span>, <span class="dv">30</span>, <span class="dv">40</span>, <span class="dv">50</span>, <span class="dv">60</span>, <span class="dv">70</span>, <span class="dv">80</span>), horizontal<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb2-669"><a href="#cb2-669"></a>    age_df <span class="op">=</span> select_df[select_df[<span class="st">'나이대'</span>]<span class="op">==</span>select_age]</span>
<span id="cb2-670"><a href="#cb2-670"></a>    <span class="co">#st.dataframe(age_df)</span></span>
<span id="cb2-671"><a href="#cb2-671"></a>    </span>
<span id="cb2-672"><a href="#cb2-672"></a>    age_sort <span class="op">=</span> age_df.groupby(by<span class="op">=</span><span class="st">'중증질환'</span>, as_index<span class="op">=</span><span class="va">False</span>)[<span class="st">'ID'</span>].count()</span>
<span id="cb2-673"><a href="#cb2-673"></a>    age_sort <span class="op">=</span> age_sort.rename(columns<span class="op">=</span>{<span class="st">"ID"</span>: <span class="st">'인원수'</span>})</span>
<span id="cb2-674"><a href="#cb2-674"></a>    <span class="co">#st.dataframe(age_sort)</span></span>
<span id="cb2-675"><a href="#cb2-675"></a>    </span>
<span id="cb2-676"><a href="#cb2-676"></a>    col251, col252 <span class="op">=</span> st.columns(<span class="dv">2</span>)</span>
<span id="cb2-677"><a href="#cb2-677"></a>    <span class="cf">with</span> col251:</span>
<span id="cb2-678"><a href="#cb2-678"></a>        fig <span class="op">=</span> px.pie(age_sort, values<span class="op">=</span><span class="st">'인원수'</span>, names<span class="op">=</span><span class="st">'중증질환'</span>, title<span class="op">=</span> <span class="bu">str</span>(select_age) <span class="op">+</span> <span class="st">'대'</span> <span class="op">+</span> <span class="st">'중증질환별 인원수'</span>, hole<span class="op">=</span><span class="fl">0.2</span>)</span>
<span id="cb2-679"><a href="#cb2-679"></a>        fig.update_traces(textposition<span class="op">=</span><span class="st">'inside'</span>, textinfo<span class="op">=</span><span class="st">'label+percent'</span>)</span>
<span id="cb2-680"><a href="#cb2-680"></a>        fig.update_layout(font<span class="op">=</span><span class="bu">dict</span>(size<span class="op">=</span><span class="dv">16</span>),showlegend <span class="op">=</span> <span class="va">False</span>)</span>
<span id="cb2-681"><a href="#cb2-681"></a>        st.plotly_chart(fig)</span>
<span id="cb2-682"><a href="#cb2-682"></a>    <span class="cf">with</span> col252:</span>
<span id="cb2-683"><a href="#cb2-683"></a>        st.bar_chart(data<span class="op">=</span>age_sort, x<span class="op">=</span><span class="st">'중증질환'</span>, y<span class="op">=</span><span class="st">'인원수'</span>, use_container_width<span class="op">=</span><span class="va">True</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section>
<section id="시연-영상" class="level1">
<h1>시연 영상</h1>
<div class="quarto-video"><video id="video_shortcode_videojs_video1" class="video-js vjs-default-skin vjs-fluid" controls="" preload="auto" data-setup="{}" title=""><source src="prototype.mp4"></video></div>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="../../../posts/mini projects/병원선정 솔루션/2023-11-01-02. Modeling.html" class="pagination-link" aria-label="02. Modeling">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text">02. Modeling</span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="../../../posts/mini projects/AIVLE/2023-10-16-00. 문의 유형 자동분류 모델링 생성.html" class="pagination-link" aria-label="00. 문의 유형 자동분류 모델링 생성">
        <span class="nav-page-text">00. 문의 유형 자동분류 모델링 생성</span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->
<script>videojs(video_shortcode_videojs_video1);</script>




</body></html>