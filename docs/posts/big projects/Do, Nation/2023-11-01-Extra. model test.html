<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.4.551">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="gc">
<meta name="dcterms.date" content="2023-11-01">

<title>Projects - Extra. model test</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js" integrity="sha512-bLT0Qm9VnAYZDflyKcBaQ2gg0hSYNQrJ8RilYldYQ1FxQYoCLtUjuuRuZo+fjqhx/qtq/1itJ0C2ejDxltZVFg==" crossorigin="anonymous"></script><script src="../../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../../">
<link href="../../../posts/big projects/Do, Nation/2023-11-05-00. 기획서.html" rel="next">
<link href="../../../posts/big projects/AI PORT/2024-01-05.04. prototype.html" rel="prev">
<script src="../../../site_libs/quarto-html/quarto.js"></script>
<script src="../../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" integrity="sha512-c3Nl8+7g4LMSTdrm621y7kf9v3SDPnhxLNhcjFJbKECVnmZHTdo+IRO05sNLTH/D3vA6u1X32ehoLC7WFVdheg==" crossorigin="anonymous"></script>

<script type="application/javascript">define('jquery', [],function() {return window.jQuery;})</script>
<script src="https://unpkg.com/@jupyter-widgets/html-manager@*/dist/embed-amd.js" crossorigin="anonymous"></script>


<link rel="stylesheet" href="../../../styles.css">
</head>

<body class="nav-sidebar docked nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top quarto-banner">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="../../../index.html">
    <span class="navbar-title">Projects</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/gangcheol/"> <i class="bi bi-github" role="img">
</i> 
<span class="menu-text"></span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
          <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="../../../posts/2023-07-31-00.intro.html">Posts</a></li><li class="breadcrumb-item">big projects</li><li class="breadcrumb-item"><a href="../../../posts/big projects/Do, Nation/2023-11-01-Extra. model test.html">Do, Nation</a></li><li class="breadcrumb-item"><a href="../../../posts/big projects/Do, Nation/2023-11-01-Extra. model test.html">Extra. model test</a></li></ol></nav>
        <a class="flex-grow-1" role="button" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
      <button type="button" class="btn quarto-search-button" aria-label="" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<header id="title-block-header" class="quarto-title-block default page-columns page-full"><nav class="quarto-page-breadcrumbs quarto-title-breadcrumbs d-none d-lg-block" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="../../../posts/2023-07-31-00.intro.html">Posts</a></li><li class="breadcrumb-item">big projects</li><li class="breadcrumb-item"><a href="../../../posts/big projects/Do, Nation/2023-11-01-Extra. model test.html">Do, Nation</a></li><li class="breadcrumb-item"><a href="../../../posts/big projects/Do, Nation/2023-11-01-Extra. model test.html">Extra. model test</a></li></ol></nav>
  <div class="quarto-title-banner page-columns page-full">
    <div class="quarto-title column-body">
      <h1 class="title">Extra. model test</h1>
                                <div class="quarto-categories">
                <div class="quarto-category">gc</div>
              </div>
                  </div>
  </div>
    
  
  <div class="quarto-title-meta">

      <div>
      <div class="quarto-title-meta-heading">Author</div>
      <div class="quarto-title-meta-contents">
               <p>gc </p>
            </div>
    </div>
      
      <div>
      <div class="quarto-title-meta-heading">Published</div>
      <div class="quarto-title-meta-contents">
        <p class="date">November 1, 2023</p>
      </div>
    </div>
    
      
    </div>
    
  
  </header><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation docked overflow-auto">
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../about.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><strong>About me</strong></span></a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true">
 <span class="menu-text">Posts</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../posts/2023-07-31-00.intro.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">00. quarto blog</span></a>
  </div>
</li>
          <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" aria-expanded="true">
 <span class="menu-text">big projects</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-2" class="collapse list-unstyled sidebar-section depth2 show">  
          <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" aria-expanded="false">
 <span class="menu-text">AI PORT</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-3" class="collapse list-unstyled sidebar-section depth3 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../posts/big projects/AI PORT/2023-12-28-01. model train.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">01. model train</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../posts/big projects/AI PORT/2023-12-28-02. model fit &amp; save.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">02. model fit &amp; save</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../posts/big projects/AI PORT/2024-01-01-03. model theory.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">03. model theory</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../posts/big projects/AI PORT/2024-01-05.04. prototype.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">04. prototype</span></a>
  </div>
</li>
      </ul>
  </li>
          <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" aria-expanded="true">
 <span class="menu-text">Do, Nation</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-4" class="collapse list-unstyled sidebar-section depth3 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../posts/big projects/Do, Nation/2023-11-01-Extra. model test.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text">Extra. model test</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../posts/big projects/Do, Nation/2023-11-05-00. 기획서.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">00. 기획서</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../posts/big projects/Do, Nation/2023-11-06-01. 데이터 수집.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">01. 데이터 수집</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../posts/big projects/Do, Nation/2023-11-09-02. 데이터 전처리.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">02. 데이터 전처리</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../posts/big projects/Do, Nation/2023-11-10-03. 토픽모델링(BERTopic).html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">03. 토픽 모델링(BERTopic)</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../posts/big projects/Do, Nation/2023-11-15-04. draw map 최종.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">04. 지도 시각화</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../posts/big projects/Do, Nation/2023-11-16-05. summary.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">05. summary</span></a>
  </div>
</li>
      </ul>
  </li>
          <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-5" aria-expanded="false">
 <span class="menu-text">Untitled1</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-5" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-5" class="collapse list-unstyled sidebar-section depth3 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../posts/big projects/untitled1/00. EDA (1).html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">00. EDA (1)</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../posts/big projects/untitled1/01. 데이터 셋 합치기.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">01. 데이터 셋 합치기</span></a>
  </div>
</li>
      </ul>
  </li>
          <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-6" aria-expanded="false">
 <span class="menu-text">Untitled2</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-6" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-6" class="collapse list-unstyled sidebar-section depth3 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../posts/big projects/untitled2/00. EDA (1).html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">00. EDA (1)</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../posts/big projects/untitled2/01. key 값 생성.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">01. key 값 생성 (1)</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../posts/big projects/untitled2/02. EDA (2).html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">02. EDA (2)</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../posts/big projects/untitled2/03. EDA (3).html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">03. EDA (3)</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../posts/big projects/untitled2/04. 데이터셋 합치기 (1).html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">04. 데이터셋 합치기 (1)</span></a>
  </div>
</li>
      </ul>
  </li>
      </ul>
  </li>
          <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-7" aria-expanded="false">
 <span class="menu-text">mini projects</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-7" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-7" class="collapse list-unstyled sidebar-section depth2 ">  
          <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-8" aria-expanded="false">
 <span class="menu-text">병원선정 솔루션</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-8" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-8" class="collapse list-unstyled sidebar-section depth3 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../posts/mini projects/병원선정 솔루션/2023-10-30-00. 데이터 가져오기.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">00. 데이터 가져오기</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../posts/mini projects/병원선정 솔루션/2023-10-31-01. EDA.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">01. EDA</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../posts/mini projects/병원선정 솔루션/2023-11-01-02. Modeling.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">02. Modeling</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../posts/mini projects/병원선정 솔루션/2023-11-02-03. Prototype.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">03. Prototype</span></a>
  </div>
</li>
      </ul>
  </li>
          <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-9" aria-expanded="false">
 <span class="menu-text">AIVLE</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-9" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-9" class="collapse list-unstyled sidebar-section depth3 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../posts/mini projects/AIVLE/2023-10-16-00. 문의 유형 자동분류 모델링 생성.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">00. 문의 유형 자동분류 모델링 생성</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../posts/mini projects/AIVLE/2023-10-17-01. 키워드 시각화 및 교육 인사이트 도출.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">01. 키워드 시각화 및 교육 인사이트 도출</span></a>
  </div>
</li>
      </ul>
  </li>
          <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-10" aria-expanded="false">
 <span class="menu-text">CCTV 차량인식</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-10" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-10" class="collapse list-unstyled sidebar-section depth3 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../posts/mini projects/CCTV 차량인식/2023-10-23-00. 실시간 신호등 제어.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">00. 실시간 신호등 제어</span></a>
  </div>
</li>
      </ul>
  </li>
          <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-11" aria-expanded="false">
 <span class="menu-text">Fine Apple</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-11" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-11" class="collapse list-unstyled sidebar-section depth3 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../posts/mini projects/Fine Apple/2023-09-26-00. EDA.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">00. EDA</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../posts/mini projects/Fine Apple/2023-09-26-01. modeling.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">01. modeling</span></a>
  </div>
</li>
      </ul>
  </li>
          <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-12" aria-expanded="false">
 <span class="menu-text">Fine Watch</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-12" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-12" class="collapse list-unstyled sidebar-section depth3 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../posts/mini projects/Fine Watch/2023-09-20-00 . EDA , modeling.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">00. EDA &amp; Modeling</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../posts/mini projects/Fine Watch/2023-09-20-00. model tuning, save.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">01. model tuning &amp; save</span></a>
  </div>
</li>
      </ul>
  </li>
      </ul>
  </li>
          <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-13" aria-expanded="false">
 <span class="menu-text">Publications</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-13" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-13" class="collapse list-unstyled sidebar-section depth2 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../posts/publications/2021-10-05-P1.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Paper 1</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../posts/publications/2023-02-22-P2.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Paper 2</span></a>
  </div>
</li>
      </ul>
  </li>
      </ul>
  </li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#해야할-것" id="toc-해야할-것" class="nav-link active" data-scroll-target="#해야할-것">해야할 것</a></li>
  <li><a href="#bertopic" id="toc-bertopic" class="nav-link" data-scroll-target="#bertopic">BERTopic</a>
  <ul class="collapse">
  <li><a href="#import" id="toc-import" class="nav-link" data-scroll-target="#import">0. import</a></li>
  <li><a href="#데이터-로드" id="toc-데이터-로드" class="nav-link" data-scroll-target="#데이터-로드">1. 데이터 로드</a></li>
  <li><a href="#전처리-생략" id="toc-전처리-생략" class="nav-link" data-scroll-target="#전처리-생략">2. 전처리 (생략)</a></li>
  <li><a href="#모델링" id="toc-모델링" class="nav-link" data-scroll-target="#모델링">3. 모델링</a></li>
  <li><a href="#결과-확인" id="toc-결과-확인" class="nav-link" data-scroll-target="#결과-확인">4. 결과 확인</a></li>
  <li><a href="#기존-데이터의-토픽-정보-추가" id="toc-기존-데이터의-토픽-정보-추가" class="nav-link" data-scroll-target="#기존-데이터의-토픽-정보-추가">4. 기존 데이터의 토픽 정보 추가</a></li>
  <li><a href="#결과-데이터-저장" id="toc-결과-데이터-저장" class="nav-link" data-scroll-target="#결과-데이터-저장">6. 결과 데이터 저장</a></li>
  </ul></li>
  <li><a href="#keybert-핵심어-추출다시-로컬로-넘어옴" id="toc-keybert-핵심어-추출다시-로컬로-넘어옴" class="nav-link" data-scroll-target="#keybert-핵심어-추출다시-로컬로-넘어옴">KeyBERT 핵심어 추출(<code>다시 로컬로 넘어옴</code>)</a>
  <ul class="collapse">
  <li><a href="#사용자-정의함수-작성" id="toc-사용자-정의함수-작성" class="nav-link" data-scroll-target="#사용자-정의함수-작성">사용자 정의함수 작성</a></li>
  </ul></li>
  <li><a href="#kobart-요약문" id="toc-kobart-요약문" class="nav-link" data-scroll-target="#kobart-요약문">KoBART 요약문</a>
  <ul class="collapse">
  <li><a href="#import-1" id="toc-import-1" class="nav-link" data-scroll-target="#import-1">import</a></li>
  <li><a href="#test" id="toc-test" class="nav-link" data-scroll-target="#test">test</a></li>
  <li><a href="#문서-토큰화" id="toc-문서-토큰화" class="nav-link" data-scroll-target="#문서-토큰화">문서 토큰화</a></li>
  <li><a href="#문서-요약-생성" id="toc-문서-요약-생성" class="nav-link" data-scroll-target="#문서-요약-생성">문서 요약 생성</a></li>
  <li><a href="#사용자-정의함수-작성-1" id="toc-사용자-정의함수-작성-1" class="nav-link" data-scroll-target="#사용자-정의함수-작성-1">사용자 정의함수 작성</a></li>
  <li><a href="#비교" id="toc-비교" class="nav-link" data-scroll-target="#비교">비교</a></li>
  </ul></li>
  <li><a href="#mbart-50" id="toc-mbart-50" class="nav-link" data-scroll-target="#mbart-50">mBart-50</a>
  <ul class="collapse">
  <li><a href="#import-2" id="toc-import-2" class="nav-link" data-scroll-target="#import-2">import</a></li>
  <li><a href="#model-load" id="toc-model-load" class="nav-link" data-scroll-target="#model-load">model load</a></li>
  <li><a href="#언어dic-작성" id="toc-언어dic-작성" class="nav-link" data-scroll-target="#언어dic-작성">언어dic 작성</a></li>
  <li><a href="#test-1" id="toc-test-1" class="nav-link" data-scroll-target="#test-1">test</a>
  <ul class="collapse">
  <li><a href="#기사별-가짜-위험도-생성" id="toc-기사별-가짜-위험도-생성" class="nav-link" data-scroll-target="#기사별-가짜-위험도-생성">기사별 가짜 위험도 생성</a></li>
  <li><a href="#기사별-가짜-지역-생성" id="toc-기사별-가짜-지역-생성" class="nav-link" data-scroll-target="#기사별-가짜-지역-생성">기사별 가짜 지역 생성</a></li>
  <li><a href="#사용자가-다음과-같이-조건을-걸었다고-가정" id="toc-사용자가-다음과-같이-조건을-걸었다고-가정" class="nav-link" data-scroll-target="#사용자가-다음과-같이-조건을-걸었다고-가정">사용자가 다음과 같이 조건을 걸었다고 가정</a></li>
  <li><a href="#번역-테스트" id="toc-번역-테스트" class="nav-link" data-scroll-target="#번역-테스트">번역 테스트</a></li>
  </ul></li>
  <li><a href="#위-과정을-함수로-작성" id="toc-위-과정을-함수로-작성" class="nav-link" data-scroll-target="#위-과정을-함수로-작성">위 과정을 함수로 작성</a></li>
  </ul></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content quarto-banner-title-block" id="quarto-document-content">





<section id="해야할-것" class="level1">
<h1>해야할 것</h1>
<p><code>1</code> BERTopic model을 불러와서 학습</p>
<p><code>2</code> 모델 학습 후 각 기사 데이터의 토픽 추론(<code>BertTopic</code>)</p>
<p><code>3</code> 추론한 토픽 컬럼을 생성</p>
<p><code>4</code> 사용자가 언어를 선택하면 그 언어에 맞게끔 데이터가 바뀌는 함수 작성</p>
<p><code>5</code> 기사의 핵심어 산출을 위한 <code>KeyBERT</code> model load</p>
<p><code>6</code> 사용자가 해당 기사의 제목을 선택하면 요약문(<code>KoBART</code>)과 원문을 함께 보이게 하기 위해서 <code>데이터 프레임</code>을 <code>return</code> 하는 함수 작성</p>
<p><code>7</code> 그 후 사용자가 토픽, 날짜, 지역을 선택하면 해당 지역의 기사를 위험도(<code>일단 내가 임의로 설정</code>)순으로 기사가 보이게끔</p>
<p><code>8</code> 그리고 사용자가 어떤 지역의 언어를 선택하면 그 언어로 핵심어, 요약문, 원문을 번역해주는 함수 작성(<code>mBart-50</code>)</p>
</section>
<section id="bertopic" class="level1">
<h1>BERTopic</h1>
<p><code>-</code> 일단 데이터로 모델 학습 후 로컬에서 모델을 불러와야하므로 <code>코랩 환경</code>에서 수행</p>
<section id="import" class="level2">
<h2 class="anchored" data-anchor-id="import">0. import</h2>
<div class="sourceCode" id="cb1"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb1-1"><a href="#cb1-1"></a><span class="op">!</span>pip install bertopic</span>
<span id="cb1-2"><a href="#cb1-2"></a><span class="op">!</span>pip install bertopic[visualization]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div id="EMs1OmbbAf3i" class="cell" data-executioninfo="{&quot;elapsed&quot;:25239,&quot;status&quot;:&quot;ok&quot;,&quot;timestamp&quot;:1699280487858,&quot;user&quot;:{&quot;displayName&quot;:&quot;ccc flkwerkdai&quot;,&quot;userId&quot;:&quot;13507850890638580947&quot;},&quot;user_tz&quot;:-540}" data-execution_count="6">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb2-1"><a href="#cb2-1"></a><span class="im">from</span> sklearn.feature_extraction.text <span class="im">import</span> CountVectorizer</span>
<span id="cb2-2"><a href="#cb2-2"></a><span class="im">from</span> bertopic <span class="im">import</span> BERTopic</span>
<span id="cb2-3"><a href="#cb2-3"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="데이터-로드" class="level2">
<h2 class="anchored" data-anchor-id="데이터-로드">1. 데이터 로드</h2>
<div id="q6FtyKwW_d49" class="cell" data-executioninfo="{&quot;elapsed&quot;:3555,&quot;status&quot;:&quot;ok&quot;,&quot;timestamp&quot;:1699280443809,&quot;user&quot;:{&quot;displayName&quot;:&quot;ccc flkwerkdai&quot;,&quot;userId&quot;:&quot;13507850890638580947&quot;},&quot;user_tz&quot;:-540}" data-outputid="847a7f36-50cf-4bcc-ad45-fea3804f38e2" data-execution_count="4">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb3-1"><a href="#cb3-1"></a><span class="im">from</span> google.colab <span class="im">import</span> drive</span>
<span id="cb3-2"><a href="#cb3-2"></a>drive.mount(<span class="st">'/content/drive'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Drive already mounted at /content/drive; to attempt to forcibly remount, call drive.mount("/content/drive", force_remount=True).</code></pre>
</div>
</div>
<div id="7wAzf2M2_n5k" class="cell" data-executioninfo="{&quot;elapsed&quot;:454,&quot;status&quot;:&quot;ok&quot;,&quot;timestamp&quot;:1699280446266,&quot;user&quot;:{&quot;displayName&quot;:&quot;ccc flkwerkdai&quot;,&quot;userId&quot;:&quot;13507850890638580947&quot;},&quot;user_tz&quot;:-540}" data-outputid="029c4be9-6676-4f54-a2ee-110fe54b1bfa" data-execution_count="5">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb5-1"><a href="#cb5-1"></a>cd <span class="op">/</span>content<span class="op">/</span>drive<span class="op">/</span>MyDrive<span class="op">/</span>Colab Notebooks<span class="op">/</span>뉴스빅데이터해커톤<span class="op">/</span>test</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>/content/drive/MyDrive/Colab Notebooks/뉴스빅데이터해커톤/test</code></pre>
</div>
</div>
<p><code>-</code> 일단 test case 이므로 100개 데이터만 가지고 수행하자</p>
<div id="a5dda8fa-5b25-426f-82e6-f27390db8bf5" class="cell" data-executioninfo="{&quot;elapsed&quot;:9591,&quot;status&quot;:&quot;ok&quot;,&quot;timestamp&quot;:1699281427461,&quot;user&quot;:{&quot;displayName&quot;:&quot;ccc flkwerkdai&quot;,&quot;userId&quot;:&quot;13507850890638580947&quot;},&quot;user_tz&quot;:-540}" data-tags="[]" data-execution_count="41">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb7-1"><a href="#cb7-1"></a>df <span class="op">=</span> pd.read_excel(<span class="st">"raw data.xlsx"</span>).sample(n <span class="op">=</span> <span class="dv">100</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="73c36347-4306-4a41-b6c1-432269dc085b" class="cell" data-executioninfo="{&quot;elapsed&quot;:3,&quot;status&quot;:&quot;ok&quot;,&quot;timestamp&quot;:1699281429334,&quot;user&quot;:{&quot;displayName&quot;:&quot;ccc flkwerkdai&quot;,&quot;userId&quot;:&quot;13507850890638580947&quot;},&quot;user_tz&quot;:-540}" data-outputid="8200740f-a41c-4a11-e149-9a11754ec90d" data-tags="[]" data-execution_count="42">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb8-1"><a href="#cb8-1"></a>df.info()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>&lt;class 'pandas.core.frame.DataFrame'&gt;
Int64Index: 100 entries, 17014 to 7534
Data columns (total 19 columns):
 #   Column             Non-Null Count  Dtype  
---  ------             --------------  -----  
 0   뉴스 식별자             100 non-null    float64
 1   일자                 100 non-null    int64  
 2   언론사                100 non-null    object 
 3   기고자                98 non-null     object 
 4   제목                 100 non-null    object 
 5   통합 분류1             100 non-null    object 
 6   통합 분류2             90 non-null     object 
 7   통합 분류3             77 non-null     object 
 8   사건/사고 분류1          100 non-null    object 
 9   사건/사고 분류2          29 non-null     object 
 10  사건/사고 분류3          10 non-null     object 
 11  인물                 67 non-null     object 
 12  위치                 94 non-null     object 
 13  기관                 100 non-null    object 
 14  키워드                100 non-null    object 
 15  특성추출(가중치순 상위 50개)  100 non-null    object 
 16  본문                 100 non-null    object 
 17  URL                100 non-null    object 
 18  분석제외 여부            8 non-null      object 
dtypes: float64(1), int64(1), object(17)
memory usage: 15.6+ KB</code></pre>
</div>
</div>
<p><code>-</code> 쓸데없는 컬럼 삭제</p>
<div id="f3f4ab70-230b-438d-9a7b-6ab1e66d8c23" class="cell" data-executioninfo="{&quot;elapsed&quot;:2,&quot;status&quot;:&quot;ok&quot;,&quot;timestamp&quot;:1699281431150,&quot;user&quot;:{&quot;displayName&quot;:&quot;ccc flkwerkdai&quot;,&quot;userId&quot;:&quot;13507850890638580947&quot;},&quot;user_tz&quot;:-540}" data-tags="[]" data-execution_count="43">
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb10-1"><a href="#cb10-1"></a>d_col <span class="op">=</span> [<span class="st">"언론사"</span>, <span class="st">"기고자"</span>, <span class="st">"통합 분류1"</span>, <span class="st">"통합 분류2"</span>, <span class="st">"통합 분류3"</span>,</span>
<span id="cb10-2"><a href="#cb10-2"></a>         <span class="st">"사건/사고 분류1"</span>, <span class="st">"사건/사고 분류2"</span>, <span class="st">"사건/사고 분류3"</span>,</span>
<span id="cb10-3"><a href="#cb10-3"></a>         <span class="st">"인물"</span>, <span class="st">"위치"</span>, <span class="st">"기관"</span>, <span class="st">"키워드"</span>,<span class="st">"특성추출(가중치순 상위 50개)"</span>, <span class="st">"분석제외 여부"</span>]</span>
<span id="cb10-4"><a href="#cb10-4"></a></span>
<span id="cb10-5"><a href="#cb10-5"></a>df.drop(d_col, axis <span class="op">=</span> <span class="dv">1</span>, inplace <span class="op">=</span><span class="va">True</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="a4b08dd0-5e64-4568-9681-e777cae59a8a" class="cell" data-executioninfo="{&quot;elapsed&quot;:2,&quot;status&quot;:&quot;ok&quot;,&quot;timestamp&quot;:1699281431856,&quot;user&quot;:{&quot;displayName&quot;:&quot;ccc flkwerkdai&quot;,&quot;userId&quot;:&quot;13507850890638580947&quot;},&quot;user_tz&quot;:-540}" data-outputid="0c0ad911-7768-4a37-e895-90ae242cc373" data-tags="[]" data-execution_count="44">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb11-1"><a href="#cb11-1"></a>df.info()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>&lt;class 'pandas.core.frame.DataFrame'&gt;
Int64Index: 100 entries, 17014 to 7534
Data columns (total 5 columns):
 #   Column  Non-Null Count  Dtype  
---  ------  --------------  -----  
 0   뉴스 식별자  100 non-null    float64
 1   일자      100 non-null    int64  
 2   제목      100 non-null    object 
 3   본문      100 non-null    object 
 4   URL     100 non-null    object 
dtypes: float64(1), int64(1), object(3)
memory usage: 4.7+ KB</code></pre>
</div>
</div>
<p><code>-</code> 일자를 <code>날짜 데이터</code> 형식으로 변경</p>
<div id="54d2cbf5-a520-4fc5-93f5-8f519e5f178c" class="cell" data-executioninfo="{&quot;elapsed&quot;:3,&quot;status&quot;:&quot;ok&quot;,&quot;timestamp&quot;:1699281433861,&quot;user&quot;:{&quot;displayName&quot;:&quot;ccc flkwerkdai&quot;,&quot;userId&quot;:&quot;13507850890638580947&quot;},&quot;user_tz&quot;:-540}" data-tags="[]" data-execution_count="45">
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb13-1"><a href="#cb13-1"></a>df.일자 <span class="op">=</span> [<span class="bu">str</span>(i)[<span class="dv">0</span>:<span class="dv">4</span>] <span class="op">+</span> <span class="st">"-"</span> <span class="op">+</span> <span class="bu">str</span>(i)[<span class="dv">4</span>:<span class="dv">6</span>] <span class="op">+</span> <span class="st">"-"</span> <span class="op">+</span> <span class="bu">str</span>(i)[<span class="dv">6</span>:] <span class="cf">for</span> i <span class="kw">in</span> df.일자]</span>
<span id="cb13-2"><a href="#cb13-2"></a>df.일자 <span class="op">=</span> pd.to_datetime(df.일자)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="43c86ca1-0563-4109-abd4-92d5452aeaff" class="cell" data-executioninfo="{&quot;elapsed&quot;:2,&quot;status&quot;:&quot;ok&quot;,&quot;timestamp&quot;:1699281433861,&quot;user&quot;:{&quot;displayName&quot;:&quot;ccc flkwerkdai&quot;,&quot;userId&quot;:&quot;13507850890638580947&quot;},&quot;user_tz&quot;:-540}" data-outputid="1dba3d9b-0841-4543-b486-62feeae652a5" data-tags="[]" data-execution_count="46">
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb14-1"><a href="#cb14-1"></a>df.info()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>&lt;class 'pandas.core.frame.DataFrame'&gt;
Int64Index: 100 entries, 17014 to 7534
Data columns (total 5 columns):
 #   Column  Non-Null Count  Dtype         
---  ------  --------------  -----         
 0   뉴스 식별자  100 non-null    float64       
 1   일자      100 non-null    datetime64[ns]
 2   제목      100 non-null    object        
 3   본문      100 non-null    object        
 4   URL     100 non-null    object        
dtypes: datetime64[ns](1), float64(1), object(3)
memory usage: 4.7+ KB</code></pre>
</div>
</div>
<div id="d18f8ac1-ec9e-4b73-881c-73a37e09bfb2" class="cell" data-executioninfo="{&quot;elapsed&quot;:639,&quot;status&quot;:&quot;ok&quot;,&quot;timestamp&quot;:1699281435140,&quot;user&quot;:{&quot;displayName&quot;:&quot;ccc flkwerkdai&quot;,&quot;userId&quot;:&quot;13507850890638580947&quot;},&quot;user_tz&quot;:-540}" data-outputid="b7b65c95-9cee-40ca-b1b1-62e15cfe7261" data-tags="[]" data-execution_count="47">
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb16-1"><a href="#cb16-1"></a>df.head()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="47">
<div>

  <div id="df-944034e0-6e9d-4844-bd22-86f9501b599a" class="colab-df-container">
    <div>


<table class="dataframe table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">뉴스 식별자</th>
<th data-quarto-table-cell-role="th">일자</th>
<th data-quarto-table-cell-role="th">제목</th>
<th data-quarto-table-cell-role="th">본문</th>
<th data-quarto-table-cell-role="th">URL</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">17014</td>
<td>8.100101e+06</td>
<td>2023-09-05</td>
<td>전라북도 “댐 방류 피해 지원 지역 확대 건의”</td>
<td>[KBS 전주]\n전라북도가 홍수 때 댐 방류로 피해가 나면 하류 지역까지 지원을 ...</td>
<td>https://news.kbs.co.kr/news/view.do?ncd=776628...</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">7259</td>
<td>8.100401e+06</td>
<td>2023-10-14</td>
<td>격화하는 충돌...언론인 인명 피해 속출</td>
<td>[앵커]\n이스라엘과 하마스와의 충돌이 격화하면서 현장을 취재하는 언론인들의 인명 ...</td>
<td>https://www.ytn.co.kr/_ln/0104_202310142106034159</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">486</td>
<td>1.100101e+06</td>
<td>2023-11-04</td>
<td>하마스 “이스라엘의 학교 겨냥 공격으로 20명 사망”</td>
<td>팔레스타인 가자지구의 학교를 겨냥한 이스라엘군의 공습으로 20명이 사망했다고 팔레스...</td>
<td>https://www.khan.co.kr/world/world-general/art...</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">7814</td>
<td>2.100701e+06</td>
<td>2023-10-12</td>
<td>이스라엘-팔레스타인 교전에 사망자 2500명 대다수가 민간인</td>
<td>[헤럴드경제=박자연 기자]이스라엘과 팔레스타인 무장 정파 하마스 교전이 엿새째 격화...</td>
<td>http://biz.heraldcorp.com/view.php?ud=20231012...</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">6690</td>
<td>1.101101e+06</td>
<td>2023-10-16</td>
<td>이스라엘 북부도 '제2의 전선'&nbsp;긴장 고조...&nbsp;국경 마을 28곳에 대피령</td>
<td>이스라엘 중서부에 위치한 가자지구에서 이스라엘군(IDF)이 조만간 지상 작전을 개시...</td>
<td>https://www.hankookilbo.com/News/Read/A2023101...</td>
</tr>
</tbody>
</table>

</div>
    <div class="colab-df-buttons">

  <div class="colab-df-container">
    <button class="colab-df-convert" onclick="convertToInteractive('df-944034e0-6e9d-4844-bd22-86f9501b599a')" title="Convert this dataframe to an interactive table." style="display:none;">

  <svg xmlns="http://www.w3.org/2000/svg" height="24px" viewbox="0 -960 960 960">
    <path d="M120-120v-720h720v720H120Zm60-500h600v-160H180v160Zm220 220h160v-160H400v160Zm0 220h160v-160H400v160ZM180-400h160v-160H180v160Zm440 0h160v-160H620v160ZM180-180h160v-160H180v160Zm440 0h160v-160H620v160Z"></path>
  </svg>
    </button>

  <style>
    .colab-df-container {
      display:flex;
      gap: 12px;
    }

    .colab-df-convert {
      background-color: #E8F0FE;
      border: none;
      border-radius: 50%;
      cursor: pointer;
      display: none;
      fill: #1967D2;
      height: 32px;
      padding: 0 0 0 0;
      width: 32px;
    }

    .colab-df-convert:hover {
      background-color: #E2EBFA;
      box-shadow: 0px 1px 2px rgba(60, 64, 67, 0.3), 0px 1px 3px 1px rgba(60, 64, 67, 0.15);
      fill: #174EA6;
    }

    .colab-df-buttons div {
      margin-bottom: 4px;
    }

    [theme=dark] .colab-df-convert {
      background-color: #3B4455;
      fill: #D2E3FC;
    }

    [theme=dark] .colab-df-convert:hover {
      background-color: #434B5C;
      box-shadow: 0px 1px 3px 1px rgba(0, 0, 0, 0.15);
      filter: drop-shadow(0px 1px 2px rgba(0, 0, 0, 0.3));
      fill: #FFFFFF;
    }
  </style>

    <script>
      const buttonEl =
        document.querySelector('#df-944034e0-6e9d-4844-bd22-86f9501b599a button.colab-df-convert');
      buttonEl.style.display =
        google.colab.kernel.accessAllowed ? 'block' : 'none';

      async function convertToInteractive(key) {
        const element = document.querySelector('#df-944034e0-6e9d-4844-bd22-86f9501b599a');
        const dataTable =
          await google.colab.kernel.invokeFunction('convertToInteractive',
                                                    [key], {});
        if (!dataTable) return;

        const docLinkHtml = 'Like what you see? Visit the ' +
          '<a target="_blank" href=https://colab.research.google.com/notebooks/data_table.ipynb>data table notebook</a>'
          + ' to learn more about interactive tables.';
        element.innerHTML = '';
        dataTable['output_type'] = 'display_data';
        await google.colab.output.renderOutput(dataTable, element);
        const docLink = document.createElement('div');
        docLink.innerHTML = docLinkHtml;
        element.appendChild(docLink);
      }
    </script>
  </div>


<div id="df-ed5a0d04-e2ec-40a6-abba-122eb6fb80c3">
  <button class="colab-df-quickchart" onclick="quickchart('df-ed5a0d04-e2ec-40a6-abba-122eb6fb80c3')" title="Suggest charts." style="display:none;">

<svg xmlns="http://www.w3.org/2000/svg" height="24px" viewbox="0 0 24 24" width="24px">
    <g>
        <path d="M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zM9 17H7v-7h2v7zm4 0h-2V7h2v10zm4 0h-2v-4h2v4z"></path>
    </g>
</svg>
  </button>

<style>
  .colab-df-quickchart {
      --bg-color: #E8F0FE;
      --fill-color: #1967D2;
      --hover-bg-color: #E2EBFA;
      --hover-fill-color: #174EA6;
      --disabled-fill-color: #AAA;
      --disabled-bg-color: #DDD;
  }

  [theme=dark] .colab-df-quickchart {
      --bg-color: #3B4455;
      --fill-color: #D2E3FC;
      --hover-bg-color: #434B5C;
      --hover-fill-color: #FFFFFF;
      --disabled-bg-color: #3B4455;
      --disabled-fill-color: #666;
  }

  .colab-df-quickchart {
    background-color: var(--bg-color);
    border: none;
    border-radius: 50%;
    cursor: pointer;
    display: none;
    fill: var(--fill-color);
    height: 32px;
    padding: 0;
    width: 32px;
  }

  .colab-df-quickchart:hover {
    background-color: var(--hover-bg-color);
    box-shadow: 0 1px 2px rgba(60, 64, 67, 0.3), 0 1px 3px 1px rgba(60, 64, 67, 0.15);
    fill: var(--button-hover-fill-color);
  }

  .colab-df-quickchart-complete:disabled,
  .colab-df-quickchart-complete:disabled:hover {
    background-color: var(--disabled-bg-color);
    fill: var(--disabled-fill-color);
    box-shadow: none;
  }

  .colab-df-spinner {
    border: 2px solid var(--fill-color);
    border-color: transparent;
    border-bottom-color: var(--fill-color);
    animation:
      spin 1s steps(1) infinite;
  }

  @keyframes spin {
    0% {
      border-color: transparent;
      border-bottom-color: var(--fill-color);
      border-left-color: var(--fill-color);
    }
    20% {
      border-color: transparent;
      border-left-color: var(--fill-color);
      border-top-color: var(--fill-color);
    }
    30% {
      border-color: transparent;
      border-left-color: var(--fill-color);
      border-top-color: var(--fill-color);
      border-right-color: var(--fill-color);
    }
    40% {
      border-color: transparent;
      border-right-color: var(--fill-color);
      border-top-color: var(--fill-color);
    }
    60% {
      border-color: transparent;
      border-right-color: var(--fill-color);
    }
    80% {
      border-color: transparent;
      border-right-color: var(--fill-color);
      border-bottom-color: var(--fill-color);
    }
    90% {
      border-color: transparent;
      border-bottom-color: var(--fill-color);
    }
  }
</style>

  <script>
    async function quickchart(key) {
      const quickchartButtonEl =
        document.querySelector('#' + key + ' button');
      quickchartButtonEl.disabled = true;  // To prevent multiple clicks.
      quickchartButtonEl.classList.add('colab-df-spinner');
      try {
        const charts = await google.colab.kernel.invokeFunction(
            'suggestCharts', [key], {});
      } catch (error) {
        console.error('Error during call to suggestCharts:', error);
      }
      quickchartButtonEl.classList.remove('colab-df-spinner');
      quickchartButtonEl.classList.add('colab-df-quickchart-complete');
    }
    (() => {
      let quickchartButtonEl =
        document.querySelector('#df-ed5a0d04-e2ec-40a6-abba-122eb6fb80c3 button');
      quickchartButtonEl.style.display =
        google.colab.kernel.accessAllowed ? 'block' : 'none';
    })();
  </script>
</div>
    </div>
  </div>
</div>
</div>
</div>
</section>
<section id="전처리-생략" class="level2">
<h2 class="anchored" data-anchor-id="전처리-생략">2. 전처리 (생략)</h2>
<p><code>-</code> 아직 형태소 분석기 뭐 쓸지 안정했으니 생략하자.</p>
<p><code>-</code> <a href="https://gangcheol.github.io/mysite2/posts/DX/2023-10-26-02.%20BERTopic.html#mecab-%EC%84%A4%EC%B9%98">전처리+모델링 참고링크</a></p>
</section>
<section id="모델링" class="level2">
<h2 class="anchored" data-anchor-id="모델링">3. 모델링</h2>
<div id="u4gACHVEBAzD" class="cell" data-executioninfo="{&quot;elapsed&quot;:465,&quot;status&quot;:&quot;ok&quot;,&quot;timestamp&quot;:1699281469808,&quot;user&quot;:{&quot;displayName&quot;:&quot;ccc flkwerkdai&quot;,&quot;userId&quot;:&quot;13507850890638580947&quot;},&quot;user_tz&quot;:-540}" data-execution_count="49">
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb17-1"><a href="#cb17-1"></a>model <span class="op">=</span> BERTopic(embedding_model<span class="op">=</span><span class="st">"sentence-transformers/xlm-r-100langs-bert-base-nli-stsb-mean-tokens"</span>,</span>
<span id="cb17-2"><a href="#cb17-2"></a>                                   nr_topics<span class="op">=</span><span class="dv">10</span>, <span class="co">## 토픽 개수</span></span>
<span id="cb17-3"><a href="#cb17-3"></a>                                  top_n_words<span class="op">=</span><span class="dv">10</span>, <span class="co">## 추출할 토픽 당 상위 단어 수</span></span>
<span id="cb17-4"><a href="#cb17-4"></a>                                  calculate_probabilities<span class="op">=</span><span class="va">True</span>) <span class="co">## Documnent 별로 특정 Topic에 속하는 확류를 계산</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="Yzsb2AkSBhtw" class="cell" data-executioninfo="{&quot;elapsed&quot;:8153,&quot;status&quot;:&quot;ok&quot;,&quot;timestamp&quot;:1699281480448,&quot;user&quot;:{&quot;displayName&quot;:&quot;ccc flkwerkdai&quot;,&quot;userId&quot;:&quot;13507850890638580947&quot;},&quot;user_tz&quot;:-540}" data-execution_count="50">
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb18-1"><a href="#cb18-1"></a>topics, probs <span class="op">=</span> model.fit_transform(df[<span class="st">"본문"</span>])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="결과-확인" class="level2">
<h2 class="anchored" data-anchor-id="결과-확인">4. 결과 확인</h2>
<div id="NV0Lw171B2or" class="cell" data-executioninfo="{&quot;elapsed&quot;:543,&quot;status&quot;:&quot;ok&quot;,&quot;timestamp&quot;:1699281487146,&quot;user&quot;:{&quot;displayName&quot;:&quot;ccc flkwerkdai&quot;,&quot;userId&quot;:&quot;13507850890638580947&quot;},&quot;user_tz&quot;:-540}" data-outputid="23448ea9-2aae-4666-c168-a96fce7fed07" data-execution_count="51">
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb19-1"><a href="#cb19-1"></a>model.get_topic_info()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="51">
<div>

  <div id="df-f089d928-c2c5-4612-a069-c4cefc630283" class="colab-df-container">
    <div>


<table class="dataframe table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">Topic</th>
<th data-quarto-table-cell-role="th">Count</th>
<th data-quarto-table-cell-role="th">Name</th>
<th data-quarto-table-cell-role="th">Representation</th>
<th data-quarto-table-cell-role="th">Representative_Docs</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">0</td>
<td>-1</td>
<td>16</td>
<td>-1_앵커_바랍니다_재난대응_eu</td>
<td>[앵커, 바랍니다, 재난대응, eu, 보다, 모로코, 후쿠시마, 기자, 고위대표는,...</td>
<td>[호세프 보렐 유럽연합(EU) 외교안보 고위대표는 가자지구로 훨씬 더 많은 구호품 ...</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1</td>
<td>0</td>
<td>12</td>
<td>0_지진이_규모_알레르기_아침</td>
<td>[지진이, 규모, 알레르기, 아침, 것이, 지난, 오후, 기자, 생육, 소중히]</td>
<td>[【평창】평창군은 18일 군 청사에서 지진에 대한 경각심을 고취하고 재난 대응능력을...</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2</td>
<td>1</td>
<td>39</td>
<td>1_이스라엘_팔레스타인_현지시간_하마스</td>
<td>[이스라엘, 팔레스타인, 현지시간, 하마스, 가자지구, 이스라엘과, 이스라엘이, 하...</td>
<td>[이츠하크 헤르초그 이스라엘 대통령이 “가자지구에서 민간인 사상자를 줄이는 데 집중...</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">3</td>
<td>2</td>
<td>18</td>
<td>2_더불어민주당_이재명_단식_대표가</td>
<td>[더불어민주당, 이재명, 단식, 대표가, 대표의, 국회, 가운데, 이날, 문재인, ...</td>
<td>[이재명 더불어민주당 대표의 단식이 11일째를 지나는 가운데 이 대표의 단식이 언제...</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">4</td>
<td>3</td>
<td>15</td>
<td>3_원주_고용노동부_흉기난동_있다</td>
<td>[원주, 고용노동부, 흉기난동, 있다, 이후, 오전, 통해, 위한, 대표의, 따르면]</td>
<td>[2024학년도 대학수학능력시험(수능)이 실시되는 다음 달 16일 관공서와 기업 등...</td>
</tr>
</tbody>
</table>

</div>
    <div class="colab-df-buttons">

  <div class="colab-df-container">
    <button class="colab-df-convert" onclick="convertToInteractive('df-f089d928-c2c5-4612-a069-c4cefc630283')" title="Convert this dataframe to an interactive table." style="display:none;">

  <svg xmlns="http://www.w3.org/2000/svg" height="24px" viewbox="0 -960 960 960">
    <path d="M120-120v-720h720v720H120Zm60-500h600v-160H180v160Zm220 220h160v-160H400v160Zm0 220h160v-160H400v160ZM180-400h160v-160H180v160Zm440 0h160v-160H620v160ZM180-180h160v-160H180v160Zm440 0h160v-160H620v160Z"></path>
  </svg>
    </button>

  <style>
    .colab-df-container {
      display:flex;
      gap: 12px;
    }

    .colab-df-convert {
      background-color: #E8F0FE;
      border: none;
      border-radius: 50%;
      cursor: pointer;
      display: none;
      fill: #1967D2;
      height: 32px;
      padding: 0 0 0 0;
      width: 32px;
    }

    .colab-df-convert:hover {
      background-color: #E2EBFA;
      box-shadow: 0px 1px 2px rgba(60, 64, 67, 0.3), 0px 1px 3px 1px rgba(60, 64, 67, 0.15);
      fill: #174EA6;
    }

    .colab-df-buttons div {
      margin-bottom: 4px;
    }

    [theme=dark] .colab-df-convert {
      background-color: #3B4455;
      fill: #D2E3FC;
    }

    [theme=dark] .colab-df-convert:hover {
      background-color: #434B5C;
      box-shadow: 0px 1px 3px 1px rgba(0, 0, 0, 0.15);
      filter: drop-shadow(0px 1px 2px rgba(0, 0, 0, 0.3));
      fill: #FFFFFF;
    }
  </style>

    <script>
      const buttonEl =
        document.querySelector('#df-f089d928-c2c5-4612-a069-c4cefc630283 button.colab-df-convert');
      buttonEl.style.display =
        google.colab.kernel.accessAllowed ? 'block' : 'none';

      async function convertToInteractive(key) {
        const element = document.querySelector('#df-f089d928-c2c5-4612-a069-c4cefc630283');
        const dataTable =
          await google.colab.kernel.invokeFunction('convertToInteractive',
                                                    [key], {});
        if (!dataTable) return;

        const docLinkHtml = 'Like what you see? Visit the ' +
          '<a target="_blank" href=https://colab.research.google.com/notebooks/data_table.ipynb>data table notebook</a>'
          + ' to learn more about interactive tables.';
        element.innerHTML = '';
        dataTable['output_type'] = 'display_data';
        await google.colab.output.renderOutput(dataTable, element);
        const docLink = document.createElement('div');
        docLink.innerHTML = docLinkHtml;
        element.appendChild(docLink);
      }
    </script>
  </div>


<div id="df-d9b7364b-521c-4e1c-9422-f354e3aaccbb">
  <button class="colab-df-quickchart" onclick="quickchart('df-d9b7364b-521c-4e1c-9422-f354e3aaccbb')" title="Suggest charts." style="display:none;">

<svg xmlns="http://www.w3.org/2000/svg" height="24px" viewbox="0 0 24 24" width="24px">
    <g>
        <path d="M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zM9 17H7v-7h2v7zm4 0h-2V7h2v10zm4 0h-2v-4h2v4z"></path>
    </g>
</svg>
  </button>

<style>
  .colab-df-quickchart {
      --bg-color: #E8F0FE;
      --fill-color: #1967D2;
      --hover-bg-color: #E2EBFA;
      --hover-fill-color: #174EA6;
      --disabled-fill-color: #AAA;
      --disabled-bg-color: #DDD;
  }

  [theme=dark] .colab-df-quickchart {
      --bg-color: #3B4455;
      --fill-color: #D2E3FC;
      --hover-bg-color: #434B5C;
      --hover-fill-color: #FFFFFF;
      --disabled-bg-color: #3B4455;
      --disabled-fill-color: #666;
  }

  .colab-df-quickchart {
    background-color: var(--bg-color);
    border: none;
    border-radius: 50%;
    cursor: pointer;
    display: none;
    fill: var(--fill-color);
    height: 32px;
    padding: 0;
    width: 32px;
  }

  .colab-df-quickchart:hover {
    background-color: var(--hover-bg-color);
    box-shadow: 0 1px 2px rgba(60, 64, 67, 0.3), 0 1px 3px 1px rgba(60, 64, 67, 0.15);
    fill: var(--button-hover-fill-color);
  }

  .colab-df-quickchart-complete:disabled,
  .colab-df-quickchart-complete:disabled:hover {
    background-color: var(--disabled-bg-color);
    fill: var(--disabled-fill-color);
    box-shadow: none;
  }

  .colab-df-spinner {
    border: 2px solid var(--fill-color);
    border-color: transparent;
    border-bottom-color: var(--fill-color);
    animation:
      spin 1s steps(1) infinite;
  }

  @keyframes spin {
    0% {
      border-color: transparent;
      border-bottom-color: var(--fill-color);
      border-left-color: var(--fill-color);
    }
    20% {
      border-color: transparent;
      border-left-color: var(--fill-color);
      border-top-color: var(--fill-color);
    }
    30% {
      border-color: transparent;
      border-left-color: var(--fill-color);
      border-top-color: var(--fill-color);
      border-right-color: var(--fill-color);
    }
    40% {
      border-color: transparent;
      border-right-color: var(--fill-color);
      border-top-color: var(--fill-color);
    }
    60% {
      border-color: transparent;
      border-right-color: var(--fill-color);
    }
    80% {
      border-color: transparent;
      border-right-color: var(--fill-color);
      border-bottom-color: var(--fill-color);
    }
    90% {
      border-color: transparent;
      border-bottom-color: var(--fill-color);
    }
  }
</style>

  <script>
    async function quickchart(key) {
      const quickchartButtonEl =
        document.querySelector('#' + key + ' button');
      quickchartButtonEl.disabled = true;  // To prevent multiple clicks.
      quickchartButtonEl.classList.add('colab-df-spinner');
      try {
        const charts = await google.colab.kernel.invokeFunction(
            'suggestCharts', [key], {});
      } catch (error) {
        console.error('Error during call to suggestCharts:', error);
      }
      quickchartButtonEl.classList.remove('colab-df-spinner');
      quickchartButtonEl.classList.add('colab-df-quickchart-complete');
    }
    (() => {
      let quickchartButtonEl =
        document.querySelector('#df-d9b7364b-521c-4e1c-9422-f354e3aaccbb button');
      quickchartButtonEl.style.display =
        google.colab.kernel.accessAllowed ? 'block' : 'none';
    })();
  </script>
</div>
    </div>
  </div>
</div>
</div>
</div>
</section>
<section id="기존-데이터의-토픽-정보-추가" class="level2">
<h2 class="anchored" data-anchor-id="기존-데이터의-토픽-정보-추가">4. 기존 데이터의 토픽 정보 추가</h2>
<div id="4L13qBKXEjfp" class="cell" data-executioninfo="{&quot;elapsed&quot;:494,&quot;status&quot;:&quot;ok&quot;,&quot;timestamp&quot;:1699282581078,&quot;user&quot;:{&quot;displayName&quot;:&quot;ccc flkwerkdai&quot;,&quot;userId&quot;:&quot;13507850890638580947&quot;},&quot;user_tz&quot;:-540}" data-execution_count="70">
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb20-1"><a href="#cb20-1"></a>df[<span class="st">"topic"</span>] <span class="op">=</span> topics</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="결과-데이터-저장" class="level2">
<h2 class="anchored" data-anchor-id="결과-데이터-저장">6. 결과 데이터 저장</h2>
<div id="gtrsDPoOIqUA" class="cell" data-executioninfo="{&quot;elapsed&quot;:619,&quot;status&quot;:&quot;ok&quot;,&quot;timestamp&quot;:1699282661075,&quot;user&quot;:{&quot;displayName&quot;:&quot;ccc flkwerkdai&quot;,&quot;userId&quot;:&quot;13507850890638580947&quot;},&quot;user_tz&quot;:-540}" data-execution_count="73">
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb21-1"><a href="#cb21-1"></a>df.to_excel(<span class="st">"rowdata(size=100).xlsx"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<hr>
</section>
</section>
<section id="keybert-핵심어-추출다시-로컬로-넘어옴" class="level1">
<h1>KeyBERT 핵심어 추출(<code>다시 로컬로 넘어옴</code>)</h1>
<div id="163f2ecd-6005-4c5d-8d28-28744b10ddcd" class="cell" data-tags="[]" data-execution_count="15">
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb22-1"><a href="#cb22-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="f7f46683-ed68-41e6-aba9-ef0068164ad6" class="cell" data-tags="[]" data-execution_count="17">
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb23-1"><a href="#cb23-1"></a>df <span class="op">=</span> pd.read_excel(<span class="st">"rowdata(size=100).xlsx"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="1f59927f-f7b7-44e6-afe8-71ee5c72058d" class="cell" data-tags="[]" data-execution_count="19">
<div class="sourceCode cell-code" id="cb24"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb24-1"><a href="#cb24-1"></a>df.head()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="19">
<div>
<div>


<table class="dataframe table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">Unnamed: 0</th>
<th data-quarto-table-cell-role="th">뉴스 식별자</th>
<th data-quarto-table-cell-role="th">일자</th>
<th data-quarto-table-cell-role="th">제목</th>
<th data-quarto-table-cell-role="th">본문</th>
<th data-quarto-table-cell-role="th">URL</th>
<th data-quarto-table-cell-role="th">topic</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">0</td>
<td>17014</td>
<td>8.100101e+06</td>
<td>2023-09-05</td>
<td>전라북도 “댐 방류 피해 지원 지역 확대 건의”</td>
<td>[KBS 전주]\n전라북도가 홍수 때 댐 방류로 피해가 나면 하류 지역까지 지원을 ...</td>
<td>https://news.kbs.co.kr/news/view.do?ncd=776628...</td>
<td>0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1</td>
<td>7259</td>
<td>8.100401e+06</td>
<td>2023-10-14</td>
<td>격화하는 충돌...언론인 인명 피해 속출</td>
<td>[앵커]\n이스라엘과 하마스와의 충돌이 격화하면서 현장을 취재하는 언론인들의 인명 ...</td>
<td>https://www.ytn.co.kr/_ln/0104_202310142106034159</td>
<td>1</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2</td>
<td>486</td>
<td>1.100101e+06</td>
<td>2023-11-04</td>
<td>하마스 “이스라엘의 학교 겨냥 공격으로 20명 사망”</td>
<td>팔레스타인 가자지구의 학교를 겨냥한 이스라엘군의 공습으로 20명이 사망했다고 팔레스...</td>
<td>https://www.khan.co.kr/world/world-general/art...</td>
<td>1</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">3</td>
<td>7814</td>
<td>2.100701e+06</td>
<td>2023-10-12</td>
<td>이스라엘-팔레스타인 교전에 사망자 2500명 대다수가 민간인</td>
<td>[헤럴드경제=박자연 기자]이스라엘과 팔레스타인 무장 정파 하마스 교전이 엿새째 격화...</td>
<td>http://biz.heraldcorp.com/view.php?ud=20231012...</td>
<td>1</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">4</td>
<td>6690</td>
<td>1.101101e+06</td>
<td>2023-10-16</td>
<td>이스라엘 북부도 '제2의 전선'&nbsp;긴장 고조...&nbsp;국경 마을 28곳에 대피령</td>
<td>이스라엘 중서부에 위치한 가자지구에서 이스라엘군(IDF)이 조만간 지상 작전을 개시...</td>
<td>https://www.hankookilbo.com/News/Read/A2023101...</td>
<td>1</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
</div>
<div id="52869644-557d-40de-86d7-5feaf5b8ebcc" class="cell" data-tags="[]" data-execution_count="4">
<div class="sourceCode cell-code" id="cb25"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb25-1"><a href="#cb25-1"></a><span class="co">#pip install keybert</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="3409139c-1c71-415a-8d36-15d8285af24c" class="cell" data-tags="[]" data-execution_count="31">
<div class="sourceCode cell-code" id="cb26"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb26-1"><a href="#cb26-1"></a><span class="im">from</span> keybert <span class="im">import</span> KeyBERT</span>
<span id="cb26-2"><a href="#cb26-2"></a><span class="im">from</span> transformers <span class="im">import</span> BartForConditionalGeneration</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><code>-</code> pretrained 된 <code>digit82/kobart-summarization</code>을 기본 모델로 만들고 Keybert 객체로 만들어준다.</p>
<div id="b20165ea-ebfc-44cb-a8d0-bf910bfed796" class="cell" data-tags="[]" data-execution_count="32">
<div class="sourceCode cell-code" id="cb27"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb27-1"><a href="#cb27-1"></a>model <span class="op">=</span> BartForConditionalGeneration.from_pretrained(<span class="st">'digit82/kobart-summarization'</span>)</span>
<span id="cb27-2"><a href="#cb27-2"></a>kw_model <span class="op">=</span> KeyBERT(model)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>You passed along `num_labels=3` with an incompatible id to label map: {'0': 'NEGATIVE', '1': 'POSITIVE'}. The number of labels wil be overwritten to 2.</code></pre>
</div>
</div>
<p><code>-</code> 일단 1개 데이터</p>
<div id="5d0b0e5b-f8fe-49e1-9383-6e7e780b7da6" class="cell" data-tags="[]" data-execution_count="223">
<div class="sourceCode cell-code" id="cb29"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb29-1"><a href="#cb29-1"></a>text <span class="op">=</span> df[<span class="st">"본문"</span>][<span class="dv">0</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="81f08687-2186-4168-93f0-1703a4412f5e" class="cell" data-tags="[]" data-execution_count="224">
<div class="sourceCode cell-code" id="cb30"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb30-1"><a href="#cb30-1"></a>keywords <span class="op">=</span> kw_model.extract_keywords(text, keyphrase_ngram_range<span class="op">=</span>(<span class="dv">1</span>, <span class="dv">1</span>), stop_words<span class="op">=</span><span class="va">None</span>, top_n<span class="op">=</span><span class="dv">15</span>)</span>
<span id="cb30-2"><a href="#cb30-2"></a>keywords</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="224">
<pre><code>[('홍수위로부터', 0.6274),
 ('홍수', 0.5986),
 ('환경분쟁조정을', 0.5284),
 ('피해가', 0.4223),
 ('계획', 0.384),
 ('지역까지', 0.3446),
 ('지원', 0.3175),
 ('지역', 0.3125),
 ('지역에만', 0.3111),
 ('따르면', 0.305),
 ('전라북도가', 0.3046),
 ('남원', 0.2877),
 ('집중호우', 0.2854),
 ('2천20년', 0.2676),
 ('하류', 0.2666)]</code></pre>
</div>
</div>
<p><code>-</code> 확인했으니 루프로 모든 데이터에 적용한다음에 컬럼 만들어서 붙이자.</p>
<div id="2bd4e5ef-3b3c-45e1-9fe3-5f623716f9c6" class="cell" data-tags="[]" data-execution_count="225">
<div class="sourceCode cell-code" id="cb32"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb32-1"><a href="#cb32-1"></a>keyword_list <span class="op">=</span> []</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="2d374bca-6b65-476f-a7f0-6268caa76685" class="cell" data-tags="[]" data-execution_count="229">
<div class="sourceCode cell-code" id="cb33"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb33-1"><a href="#cb33-1"></a><span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(<span class="bu">len</span>(df)) :</span>
<span id="cb33-2"><a href="#cb33-2"></a>    text <span class="op">=</span> df[<span class="st">"본문"</span>][i]</span>
<span id="cb33-3"><a href="#cb33-3"></a>    temp <span class="op">=</span> [i[<span class="dv">0</span>] <span class="cf">for</span> i <span class="kw">in</span> keywords]</span>
<span id="cb33-4"><a href="#cb33-4"></a>    keyword_list.append(temp)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<section id="사용자-정의함수-작성" class="level2">
<h2 class="anchored" data-anchor-id="사용자-정의함수-작성">사용자 정의함수 작성</h2>
<div id="4cb9a907-d2b3-4139-bc4e-64dca6c44afd" class="cell" data-tags="[]" data-execution_count="231">
<div class="sourceCode cell-code" id="cb34"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb34-1"><a href="#cb34-1"></a><span class="kw">def</span> keyword_extract(df) :</span>
<span id="cb34-2"><a href="#cb34-2"></a>    model <span class="op">=</span> BartForConditionalGeneration.from_pretrained(<span class="st">'digit82/kobart-summarization'</span>)</span>
<span id="cb34-3"><a href="#cb34-3"></a>    kw_model <span class="op">=</span> KeyBERT(model)</span>
<span id="cb34-4"><a href="#cb34-4"></a>    keyword_list <span class="op">=</span> []</span>
<span id="cb34-5"><a href="#cb34-5"></a>    <span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(<span class="bu">len</span>(df)) :</span>
<span id="cb34-6"><a href="#cb34-6"></a>        text <span class="op">=</span> df[<span class="st">"본문"</span>][i]</span>
<span id="cb34-7"><a href="#cb34-7"></a>        keywords <span class="op">=</span> kw_model.extract_keywords(text, keyphrase_ngram_range<span class="op">=</span>(<span class="dv">1</span>, <span class="dv">1</span>), stop_words<span class="op">=</span><span class="va">None</span>, top_n<span class="op">=</span><span class="dv">15</span>)</span>
<span id="cb34-8"><a href="#cb34-8"></a>        temp <span class="op">=</span> [i[<span class="dv">0</span>] <span class="cf">for</span> i <span class="kw">in</span> keywords]</span>
<span id="cb34-9"><a href="#cb34-9"></a>        keyword_list.append(temp)</span>
<span id="cb34-10"><a href="#cb34-10"></a>    df[<span class="st">"keyword"</span>] <span class="op">=</span> keyword_list</span>
<span id="cb34-11"><a href="#cb34-11"></a>    df[<span class="st">"keyword"</span>] <span class="op">=</span> [<span class="st">" "</span>.join(i) <span class="cf">for</span> i <span class="kw">in</span> df[<span class="st">"keyword"</span>]]</span>
<span id="cb34-12"><a href="#cb34-12"></a>    <span class="cf">return</span> df</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="86d097cf-102a-432c-9b31-45691dd58c31" class="cell" data-tags="[]" data-execution_count="232">
<div class="sourceCode cell-code" id="cb35"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb35-1"><a href="#cb35-1"></a>df <span class="op">=</span> keyword_extract(df)</span>
<span id="cb35-2"><a href="#cb35-2"></a>df.head()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>You passed along `num_labels=3` with an incompatible id to label map: {'0': 'NEGATIVE', '1': 'POSITIVE'}. The number of labels wil be overwritten to 2.</code></pre>
</div>
<div class="cell-output cell-output-display" data-execution_count="232">
<div>
<div>


<table class="dataframe table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">Unnamed: 0</th>
<th data-quarto-table-cell-role="th">뉴스 식별자</th>
<th data-quarto-table-cell-role="th">일자</th>
<th data-quarto-table-cell-role="th">제목</th>
<th data-quarto-table-cell-role="th">본문</th>
<th data-quarto-table-cell-role="th">URL</th>
<th data-quarto-table-cell-role="th">topic</th>
<th data-quarto-table-cell-role="th">keyword</th>
<th data-quarto-table-cell-role="th">summary_text</th>
<th data-quarto-table-cell-role="th">위험도</th>
<th data-quarto-table-cell-role="th">city</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">49</td>
<td>19388</td>
<td>2.100311e+06</td>
<td>2023-08-29</td>
<td>尹 카눈 피해 심각 지자체 3곳 특별재난지역 추가 선포</td>
<td>윤석열 대통령이 제6호 태풍 카눈으로 인해 대규모 피해가 발생한 강원 고성군 경북 ...</td>
<td>http://www.sedaily.com/NewsView/29TLG4GC12</td>
<td>3</td>
<td>홍수위로부터 홍수 환경분쟁조정을 피해가 계획 지역까지 지원 지역 지역에만 따르면 전...</td>
<td>제6호 태풍 카눈으로 인해 대규모 피해가 발생한 강원 고성군 경북 경주시 산내면 경...</td>
<td>12.492217</td>
<td>경상북도</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">60</td>
<td>19480</td>
<td>2.100501e+06</td>
<td>2023-08-29</td>
<td>'살인 예고글' 전국서 479건 23명 구속</td>
<td>신림동 흉기난동 이후 229건 검거 \n \n 대구국제공항에 대한 '폭탄테러'와 공...</td>
<td>http://www.fnnews.com/news/202308290954412819</td>
<td>3</td>
<td>언론인들의 기자 이스라엘과 카메라 레바논 기자가 사격 하마스와의 폭발음과 피해가 보...</td>
<td>대구국제공항에 대한 '폭탄테러'와 공항 이용객 불특정 다수를 상대로 '흉기난동'이 ...</td>
<td>1.554176</td>
<td>전라북도</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">54</td>
<td>19282</td>
<td>2.100851e+06</td>
<td>2023-08-29</td>
<td>10호 태풍 '담레이' 일본 삿포로 해상에서 소멸</td>
<td>제10호 태풍 '담레이' 경로. 담레이는 29일 오후 3시에 소멸했다. [자료=기상...</td>
<td>https://www.ajunews.com/view/20230829171154152</td>
<td>1</td>
<td>팔레스타인 이스라엘군의 20명과 알사프타위 가자지구 하마스 부상자 수십명이 가자지구...</td>
<td>29일 낮 낮 일본 삿포로 인근 해상에서 소멸된 제10호 태풍 '담레이'가 29일 ...</td>
<td>12.258479</td>
<td>대전광역시</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">44</td>
<td>19317</td>
<td>7.100501e+06</td>
<td>2023-08-29</td>
<td>한난, '2023년 재난대응 안전한국훈련' 시행</td>
<td>한국지역난방공사는 29일 경기 파주시 지사에서 행정안전부가 주관하는 '2023년 제...</td>
<td>http://www.etnews.com/20230829000284</td>
<td>-1</td>
<td>이스라엘 이스라엘과 팔레스타인 2500명을 사망자가 사망자 하마스 1300명 사망자...</td>
<td>한국지역난방공사는 29일 경기 파주시 지사에서 중앙부처와 지방자치단체, 공공기관, ...</td>
<td>8.469362</td>
<td>세종특별자치시</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">9</td>
<td>18922</td>
<td>1.100701e+06</td>
<td>2023-08-30</td>
<td>日 “간토대지진 조선인 학살 사실 파악 기록 없어”</td>
<td>일본 정부가 올해로 100주년을 맞은 간토대지진 당시 군대와 경찰, 민간인으로 이뤄...</td>
<td>http://www.segye.com/content/html/2023/08/30/2...</td>
<td>2</td>
<td>이스라엘 이스라엘이 이스라엘군 레바논과 가자지구에서 국경지대 인접한 지상 작전을 일...</td>
<td>일본 정부가 올해로 100주년을 맞은 간토대지진 당시 군대와 경찰, 민간인으로 이뤄...</td>
<td>2.554163</td>
<td>대구광역시</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
</div>
</section>
</section>
<section id="kobart-요약문" class="level1">
<h1>KoBART 요약문</h1>
<section id="import-1" class="level2">
<h2 class="anchored" data-anchor-id="import-1">import</h2>
<div id="67cb5b76-73e2-4179-b441-01e1f3a7e88b" class="cell" data-tags="[]" data-execution_count="63">
<div class="sourceCode cell-code" id="cb37"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb37-1"><a href="#cb37-1"></a><span class="co">#!pip install transformers</span></span>
<span id="cb37-2"><a href="#cb37-2"></a><span class="co">#conda install pytorch torchvision torchaudio cpuonly -c pytorch</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="b84b6f45-3581-4c76-9680-fbfa8d424cb3" class="cell" data-tags="[]" data-execution_count="64">
<div class="sourceCode cell-code" id="cb38"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb38-1"><a href="#cb38-1"></a><span class="im">import</span> torch</span>
<span id="cb38-2"><a href="#cb38-2"></a><span class="im">from</span> transformers <span class="im">import</span> PreTrainedTokenizerFast</span>
<span id="cb38-3"><a href="#cb38-3"></a><span class="im">from</span> transformers <span class="im">import</span> BartForConditionalGeneration</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="912d9314-886c-40f3-b256-b102808b27fd" class="cell" data-tags="[]" data-execution_count="66">
<div class="sourceCode cell-code" id="cb39"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb39-1"><a href="#cb39-1"></a>tokenizer <span class="op">=</span> PreTrainedTokenizerFast.from_pretrained(<span class="st">'digit82/kobart-summarization'</span>)</span>
<span id="cb39-2"><a href="#cb39-2"></a>summary_model <span class="op">=</span> BartForConditionalGeneration.from_pretrained(<span class="st">'digit82/kobart-summarization'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>You passed along `num_labels=3` with an incompatible id to label map: {'0': 'NEGATIVE', '1': 'POSITIVE'}. The number of labels wil be overwritten to 2.</code></pre>
</div>
</div>
</section>
<section id="test" class="level2">
<h2 class="anchored" data-anchor-id="test">test</h2>
<div id="aca81e71-3185-43c6-9a45-60f6b182ab71" class="cell" data-tags="[]" data-execution_count="67">
<div class="sourceCode cell-code" id="cb41"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb41-1"><a href="#cb41-1"></a>text <span class="op">=</span> df[<span class="st">"본문"</span>][<span class="dv">0</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="a0c523d7-eaf8-4c6e-b10e-23d4d2140e86" class="cell" data-tags="[]" data-execution_count="69">
<div class="sourceCode cell-code" id="cb42"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb42-1"><a href="#cb42-1"></a>text</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="69">
<pre><code>'[KBS 전주]\n전라북도가 홍수 때 댐 방류로 피해가 나면 하류 지역까지 지원을 확대하는 방안을 환경부에 건의했습니다.\n\n현행법에 따르면 계획 홍수위로부터 5킬로미터 안까지만 지원 범위로 정하고 있어 상류 지역에만 혜택이 적용됩니다.\n\n실제 2천20년 집중호우 때 댐 방류로 남원, 임실 등 하류 지역 5곳에 피해가 나 주민들이 환경분쟁조정을 신청했지만,..'</code></pre>
</div>
</div>
<div id="7a6c865c-57fa-48cd-a504-eae669ff6483" class="cell" data-tags="[]" data-execution_count="70">
<div class="sourceCode cell-code" id="cb44"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb44-1"><a href="#cb44-1"></a><span class="bu">len</span>(text)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="70">
<pre><code>200</code></pre>
</div>
</div>
</section>
<section id="문서-토큰화" class="level2">
<h2 class="anchored" data-anchor-id="문서-토큰화">문서 토큰화</h2>
<div id="524a290f-daab-447f-a36e-0da62b86e6c2" class="cell" data-tags="[]" data-execution_count="72">
<div class="sourceCode cell-code" id="cb46"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb46-1"><a href="#cb46-1"></a>raw_input_ids <span class="op">=</span> tokenizer.encode(text)</span>
<span id="cb46-2"><a href="#cb46-2"></a>input_ids <span class="op">=</span> [tokenizer.bos_token_id] <span class="op">+</span> raw_input_ids <span class="op">+</span> [tokenizer.eos_token_id]</span>
<span id="cb46-3"><a href="#cb46-3"></a></span>
<span id="cb46-4"><a href="#cb46-4"></a>summary_ids <span class="op">=</span> model.generate(torch.tensor([input_ids]),  num_beams<span class="op">=</span><span class="dv">4</span>,  max_length<span class="op">=</span><span class="dv">512</span>,  eos_token_id<span class="op">=</span><span class="dv">1</span>)</span>
<span id="cb46-5"><a href="#cb46-5"></a>tokenizer.decode(summary_ids.squeeze().tolist(), skip_special_tokens<span class="op">=</span><span class="va">True</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="72">
<pre><code>'전라전라북도가 홍수 때 댐 방류로 피해가 나면 하류 지역까지 지원을 확대하는 방안을 환경부에 건의하였다.'</code></pre>
</div>
</div>
</section>
<section id="문서-요약-생성" class="level2">
<h2 class="anchored" data-anchor-id="문서-요약-생성">문서 요약 생성</h2>
<div id="29db4825-5fa3-4f9a-b63d-047869f316dc" class="cell" data-tags="[]" data-execution_count="73">
<div class="sourceCode cell-code" id="cb48"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb48-1"><a href="#cb48-1"></a>summary_ids <span class="op">=</span> model.generate(torch.tensor([input_ids]),  num_beams<span class="op">=</span><span class="dv">4</span>,  max_length<span class="op">=</span><span class="dv">512</span>,  eos_token_id<span class="op">=</span><span class="dv">1</span>)</span>
<span id="cb48-2"><a href="#cb48-2"></a>s_text <span class="op">=</span>  tokenizer.decode(summary_ids.squeeze().tolist(), skip_special_tokens<span class="op">=</span><span class="va">True</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="0f538b55-2194-4b93-b938-1c605612e734" class="cell" data-tags="[]" data-execution_count="74">
<div class="sourceCode cell-code" id="cb49"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb49-1"><a href="#cb49-1"></a>s_text</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="74">
<pre><code>'전라전라북도가 홍수 때 댐 방류로 피해가 나면 하류 지역까지 지원을 확대하는 방안을 환경부에 건의하였다.'</code></pre>
</div>
</div>
</section>
<section id="사용자-정의함수-작성-1" class="level2">
<h2 class="anchored" data-anchor-id="사용자-정의함수-작성-1">사용자 정의함수 작성</h2>
<p><code>-</code> 데이터 100개인데도 시간 좀 많이 걸림</p>
<div id="5a779713-3acf-4eb0-98dd-fed5987ef8e0" class="cell" data-tags="[]" data-execution_count="78">
<div class="sourceCode cell-code" id="cb51"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb51-1"><a href="#cb51-1"></a><span class="kw">def</span> text_Summarization(df) :</span>
<span id="cb51-2"><a href="#cb51-2"></a>    tokenizer <span class="op">=</span> PreTrainedTokenizerFast.from_pretrained(<span class="st">'digit82/kobart-summarization'</span>)</span>
<span id="cb51-3"><a href="#cb51-3"></a>    summary_model <span class="op">=</span> BartForConditionalGeneration.from_pretrained(<span class="st">'digit82/kobart-summarization'</span>)</span>
<span id="cb51-4"><a href="#cb51-4"></a>    summary_text <span class="op">=</span> []</span>
<span id="cb51-5"><a href="#cb51-5"></a>    <span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(<span class="bu">len</span>(df)) :</span>
<span id="cb51-6"><a href="#cb51-6"></a>        text <span class="op">=</span> df[<span class="st">"본문"</span>][i]</span>
<span id="cb51-7"><a href="#cb51-7"></a>        raw_input_ids <span class="op">=</span> tokenizer.encode(text)</span>
<span id="cb51-8"><a href="#cb51-8"></a>        input_ids <span class="op">=</span> [tokenizer.bos_token_id] <span class="op">+</span> raw_input_ids <span class="op">+</span> [tokenizer.eos_token_id]</span>
<span id="cb51-9"><a href="#cb51-9"></a></span>
<span id="cb51-10"><a href="#cb51-10"></a>        summary_ids <span class="op">=</span> model.generate(torch.tensor([input_ids]),  num_beams<span class="op">=</span><span class="dv">4</span>,  max_length<span class="op">=</span><span class="dv">512</span>,  eos_token_id<span class="op">=</span><span class="dv">1</span>)</span>
<span id="cb51-11"><a href="#cb51-11"></a>        s_text <span class="op">=</span>  tokenizer.decode(summary_ids.squeeze().tolist(), skip_special_tokens<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb51-12"><a href="#cb51-12"></a>        summary_text.append(s_text)</span>
<span id="cb51-13"><a href="#cb51-13"></a>    df[<span class="st">"summary_text"</span>] <span class="op">=</span> summary_text</span>
<span id="cb51-14"><a href="#cb51-14"></a>    <span class="cf">return</span> df</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="e61dce97-b3af-461d-a7b9-885eb005e5be" class="cell" data-tags="[]" data-execution_count="79">
<div class="sourceCode cell-code" id="cb52"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb52-1"><a href="#cb52-1"></a>df <span class="op">=</span> text_Summarization(df)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>You passed along `num_labels=3` with an incompatible id to label map: {'0': 'NEGATIVE', '1': 'POSITIVE'}. The number of labels wil be overwritten to 2.</code></pre>
</div>
</div>
<div class="sourceCode" id="cb54"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb54-1"><a href="#cb54-1"></a>summary_text_ids <span class="op">=</span> model.generate(</span>
<span id="cb54-2"><a href="#cb54-2"></a>    input_ids<span class="op">=</span>torch.tensor([input_ids]),</span>
<span id="cb54-3"><a href="#cb54-3"></a>    length_penalty<span class="op">=</span><span class="fl">2.0</span>, <span class="co"># 길이에 대한 penalty. 1보다 작은 경우 더 짧은 문장을 생성하도록 유도하며, 1보다 클 경우 길이가 더 긴 문장을 유도</span></span>
<span id="cb54-4"><a href="#cb54-4"></a>    max_length<span class="op">=</span><span class="dv">128</span>,     <span class="co"># 요약문의 최대 길이 설정</span></span>
<span id="cb54-5"><a href="#cb54-5"></a>    min_length<span class="op">=</span><span class="dv">32</span>,      <span class="co"># 요약문의 최소 길이 설정</span></span>
<span id="cb54-6"><a href="#cb54-6"></a>    num_beams<span class="op">=</span><span class="dv">4</span>,        <span class="co"># 문장 생성시 다음 단어를 탐색하는 영역의 개수</span></span>
<span id="cb54-7"><a href="#cb54-7"></a>    length_panelty <span class="op">=</span> <span class="fl">2.0</span> <span class="co"># 길이에 대한 panelty, 1보다 작은 경우 더 짧은 문장을 생성</span></span>
<span id="cb54-8"><a href="#cb54-8"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="비교" class="level2">
<h2 class="anchored" data-anchor-id="비교">비교</h2>
<div id="6339003e-1dd8-4631-8fa6-8b74f3338046" class="cell" data-tags="[]" data-execution_count="82">
<div class="sourceCode cell-code" id="cb55"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb55-1"><a href="#cb55-1"></a><span class="bu">print</span>(df[<span class="st">"본문"</span>][<span class="dv">0</span>])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[KBS 전주]
전라북도가 홍수 때 댐 방류로 피해가 나면 하류 지역까지 지원을 확대하는 방안을 환경부에 건의했습니다.

현행법에 따르면 계획 홍수위로부터 5킬로미터 안까지만 지원 범위로 정하고 있어 상류 지역에만 혜택이 적용됩니다.

실제 2천20년 집중호우 때 댐 방류로 남원, 임실 등 하류 지역 5곳에 피해가 나 주민들이 환경분쟁조정을 신청했지만,..</code></pre>
</div>
</div>
<div id="3eda1de7-4d89-4e27-b0b8-ef3f6f1ad812" class="cell" data-tags="[]" data-execution_count="84">
<div class="sourceCode cell-code" id="cb57"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb57-1"><a href="#cb57-1"></a><span class="bu">print</span>(df[<span class="st">"summary_text"</span>][<span class="dv">0</span>])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>전라전라북도가 홍수 때 댐 방류로 피해가 나면 하류 지역까지 지원을 확대하는 방안을 환경부에 건의하였다.</code></pre>
</div>
</div>
<hr>
</section>
</section>
<section id="mbart-50" class="level1">
<h1>mBart-50</h1>
<p><code>-</code> 자 이제 피날레</p>
<p><code>-</code> 사용자가 어떤 언어를 선택하면 해당 언어로 바꿔주기</p>
<p><code>-</code> <a href="https://huggingface.co/facebook/mbart-large-50-many-to-many-mmt">참고링크</a></p>
<section id="import-2" class="level2">
<h2 class="anchored" data-anchor-id="import-2">import</h2>
<div id="d61a2507-b372-438b-8257-34153dd0395b" class="cell" data-tags="[]" data-execution_count="93">
<div class="sourceCode cell-code" id="cb59"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb59-1"><a href="#cb59-1"></a><span class="im">from</span> transformers <span class="im">import</span> MBartForConditionalGeneration, MBart50TokenizerFast</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="model-load" class="level2">
<h2 class="anchored" data-anchor-id="model-load">model load</h2>
<p><code>-</code> load 하는데 시간 좀 많이 걸림</p>
<div id="f8957b9e-efe6-43ed-9761-08a4634fa7c3" class="cell" data-tags="[]" data-execution_count="94">
<div class="sourceCode cell-code" id="cb60"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb60-1"><a href="#cb60-1"></a>model <span class="op">=</span> MBartForConditionalGeneration.from_pretrained(<span class="st">"facebook/mbart-large-50-many-to-many-mmt"</span>)</span>
<span id="cb60-2"><a href="#cb60-2"></a>tokenizer <span class="op">=</span> MBart50TokenizerFast.from_pretrained(<span class="st">"facebook/mbart-large-50-many-to-many-mmt"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<script type="application/vnd.jupyter.widget-view+json">
{"model_id":"73edb10d5eec4ef3a185cf86e5056c04","version_major":2,"version_minor":0,"quarto_mimetype":"application/vnd.jupyter.widget-view+json"}
</script>
</div>
<div class="cell-output cell-output-display">
<script type="application/vnd.jupyter.widget-view+json">
{"model_id":"2240d58e28c64914926ee623e75b6fed","version_major":2,"version_minor":0,"quarto_mimetype":"application/vnd.jupyter.widget-view+json"}
</script>
</div>
<div class="cell-output cell-output-display">
<script type="application/vnd.jupyter.widget-view+json">
{"model_id":"4c5f4be1e03048279e8f36bf7e4e04ab","version_major":2,"version_minor":0,"quarto_mimetype":"application/vnd.jupyter.widget-view+json"}
</script>
</div>
<div class="cell-output cell-output-display">
<script type="application/vnd.jupyter.widget-view+json">
{"model_id":"d2326fc976c149bf91c3252e48d95727","version_major":2,"version_minor":0,"quarto_mimetype":"application/vnd.jupyter.widget-view+json"}
</script>
</div>
<div class="cell-output cell-output-display">
<script type="application/vnd.jupyter.widget-view+json">
{"model_id":"4599d324fc574a799f562e4e8c94ef91","version_major":2,"version_minor":0,"quarto_mimetype":"application/vnd.jupyter.widget-view+json"}
</script>
</div>
<div class="cell-output cell-output-display">
<script type="application/vnd.jupyter.widget-view+json">
{"model_id":"5a3bb4b265544550845f8a9941d5a584","version_major":2,"version_minor":0,"quarto_mimetype":"application/vnd.jupyter.widget-view+json"}
</script>
</div>
</div>
</section>
<section id="언어dic-작성" class="level2">
<h2 class="anchored" data-anchor-id="언어dic-작성">언어dic 작성</h2>
<div id="a2b0b5c5-c824-4adf-9d2f-078cb4126123" class="cell" data-tags="[]" data-execution_count="103">
<div class="sourceCode cell-code" id="cb61"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb61-1"><a href="#cb61-1"></a>lang_dict <span class="op">=</span> {<span class="st">"Arabic"</span> : <span class="st">"ar_AR"</span>, <span class="st">"Czech"</span>: <span class="st">"cs_CZ"</span>, <span class="st">"German"</span> : <span class="st">"de_DE"</span>, <span class="st">"English"</span> : <span class="st">"en_XX"</span>, </span>
<span id="cb61-2"><a href="#cb61-2"></a>             <span class="st">"Spanish"</span> :  <span class="st">"es_XX"</span>, <span class="st">"Estonian"</span> : <span class="st">"et_EE"</span>, <span class="st">"Finnish"</span> : <span class="st">"fi_FI"</span>, <span class="st">"French"</span> : <span class="st">'fr_XX'</span>, </span>
<span id="cb61-3"><a href="#cb61-3"></a>            <span class="st">'Gujarati'</span>: <span class="st">'gu_IN'</span>, <span class="st">'Hindi'</span> : <span class="st">'hi_IN'</span>, <span class="st">'Italian'</span> : <span class="st">'it_IT'</span>, <span class="st">'Japanese'</span> : <span class="st">'ja_XX'</span>, </span>
<span id="cb61-4"><a href="#cb61-4"></a>            <span class="st">'Kazakh'</span> : <span class="st">'kk_KZ'</span>, <span class="st">'Korean'</span> : <span class="st">'ko_KR'</span>, <span class="st">'Lithuanian'</span> : <span class="st">'lt_LT'</span>, <span class="st">'Latvian'</span> : <span class="st">'lv_LV'</span>, </span>
<span id="cb61-5"><a href="#cb61-5"></a>            <span class="st">'Burmese'</span> : <span class="st">'my_MM'</span>, <span class="st">'Nepali'</span> : <span class="st">'ne_NP'</span>, <span class="st">'Dutch'</span> : <span class="st">'nl_XX'</span>, </span>
<span id="cb61-6"><a href="#cb61-6"></a>            <span class="st">'Romanian'</span> : <span class="st">'ro_RO'</span>, <span class="st">'Russian'</span> : <span class="st">'ru_RU'</span>, <span class="st">'Sinhala'</span> : <span class="st">'si_LK'</span>, </span>
<span id="cb61-7"><a href="#cb61-7"></a>            <span class="st">'Turkish'</span> : <span class="st">'tr_TR'</span>, <span class="st">'Vietnamese'</span> : <span class="st">'vi_VN'</span>, </span>
<span id="cb61-8"><a href="#cb61-8"></a>            <span class="st">'Chinese'</span> : <span class="st">'zh_CN'</span>, <span class="st">'Afrikaans'</span> : <span class="st">'af_ZA'</span>, </span>
<span id="cb61-9"><a href="#cb61-9"></a>            <span class="st">'Azerbaijani'</span> : <span class="st">'az_AZ'</span>, <span class="st">'Bengali'</span> : <span class="st">'bn_IN'</span>, </span>
<span id="cb61-10"><a href="#cb61-10"></a>            <span class="st">'Persian'</span> : <span class="st">'fa_IR'</span>, <span class="st">'Hebrew'</span> : <span class="st">'he_IL'</span>, <span class="st">'Croatian'</span> : <span class="st">'hr_HR'</span>, <span class="st">'Indonesian'</span> : <span class="st">'id_ID'</span>, </span>
<span id="cb61-11"><a href="#cb61-11"></a>            <span class="st">'Georgian'</span> : <span class="st">'ka_GE'</span>, <span class="st">'Khmer'</span> : <span class="st">'km_KH'</span>, <span class="st">'Macedonian'</span> : <span class="st">'mk_MK'</span>, <span class="st">'Malayalam'</span> : <span class="st">'ml_IN'</span>, </span>
<span id="cb61-12"><a href="#cb61-12"></a>            <span class="st">'Mongolian'</span> : <span class="st">'mn_MN'</span>, <span class="st">'Marathi'</span> : <span class="st">'mr_IN'</span>, <span class="st">'Polish'</span> : <span class="st">'pl_PL'</span>, </span>
<span id="cb61-13"><a href="#cb61-13"></a>            <span class="st">'Pashto'</span> : <span class="st">'ps_AF'</span>, <span class="st">'Portuguese'</span> : <span class="st">'pt_XX'</span>, <span class="st">'Swedish'</span> : <span class="st">'sv_SE'</span>, <span class="st">'Swahili'</span> : <span class="st">'sw_KE'</span>, </span>
<span id="cb61-14"><a href="#cb61-14"></a>            <span class="st">'Tamil'</span> : <span class="st">'ta_IN'</span>, <span class="st">'Telugu'</span> : <span class="st">'te_IN'</span>, <span class="st">'Thai'</span> : <span class="st">'th_TH'</span>, <span class="st">'Tagalog'</span> : <span class="st">'tl_XX'</span>, <span class="st">'Ukrainian'</span> : <span class="st">'uk_UA'</span>, </span>
<span id="cb61-15"><a href="#cb61-15"></a>            <span class="st">'Urdu'</span> : <span class="st">'ur_PK'</span>, <span class="st">'Xhosa'</span> : <span class="st">'xh_ZA'</span>, <span class="st">'Galician'</span> : <span class="st">'gl_ES'</span>, <span class="st">'Slovene'</span> : <span class="st">'sl_SI'</span>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="test-1" class="level2">
<h2 class="anchored" data-anchor-id="test-1">test</h2>
<section id="기사별-가짜-위험도-생성" class="level3">
<h3 class="anchored" data-anchor-id="기사별-가짜-위험도-생성">기사별 가짜 위험도 생성</h3>
<div id="87721d01-d48d-45ab-a4a9-14a50af4c1fe" class="cell" data-tags="[]" data-execution_count="106">
<div class="sourceCode cell-code" id="cb62"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb62-1"><a href="#cb62-1"></a><span class="im">import</span> numpy <span class="im">as</span> np</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="4cfbff59-0930-4263-a3db-32b0da407ead" class="cell" data-tags="[]" data-execution_count="111">
<div class="sourceCode cell-code" id="cb63"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb63-1"><a href="#cb63-1"></a>sampl <span class="op">=</span> np.random.uniform(low<span class="op">=</span><span class="fl">0.5</span>, high<span class="op">=</span><span class="fl">13.3</span>, size<span class="op">=</span><span class="dv">100</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="c5ed7284-be15-4901-a411-feb919f147fd" class="cell" data-execution_count="116">
<div class="sourceCode cell-code" id="cb64"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb64-1"><a href="#cb64-1"></a>df[<span class="st">"위험도"</span>] <span class="op">=</span> sampl</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="e8deeb60-ddb3-4adc-bdac-612c8c245961" class="cell" data-tags="[]" data-execution_count="121">
<div class="sourceCode cell-code" id="cb65"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb65-1"><a href="#cb65-1"></a>df <span class="op">=</span> df.sort_values(<span class="st">"일자"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="기사별-가짜-지역-생성" class="level3">
<h3 class="anchored" data-anchor-id="기사별-가짜-지역-생성">기사별 가짜 지역 생성</h3>
<div id="7add8995-75a8-4df2-bd59-5f12eb26a708" class="cell" data-tags="[]" data-execution_count="126">
<div class="sourceCode cell-code" id="cb66"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb66-1"><a href="#cb66-1"></a>sido <span class="op">=</span> pd.read_excel(<span class="st">"시도단위 코드.xlsx"</span>)[<span class="st">"시도"</span>].tolist()</span>
<span id="cb66-2"><a href="#cb66-2"></a>sido</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="126">
<pre><code>['서울특별시',
 '부산광역시',
 '대구광역시',
 '인천광역시',
 '광주광역시',
 '대전광역시',
 '울산광역시',
 '세종특별자치시',
 '경기도',
 '강원도',
 '충청북도',
 '충청남도',
 '전라북도',
 '전라남도',
 '경상북도',
 '경상남도',
 '제주특별자치도']</code></pre>
</div>
</div>
<div id="44d8d128-fc76-4594-a5bc-b35a31cab0d2" class="cell" data-tags="[]" data-execution_count="131">
<div class="sourceCode cell-code" id="cb68"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb68-1"><a href="#cb68-1"></a><span class="im">import</span> random</span>
<span id="cb68-2"><a href="#cb68-2"></a>city <span class="op">=</span> [random.choice(sido) <span class="cf">for</span> _ <span class="kw">in</span> <span class="bu">range</span>(<span class="dv">100</span>)]</span>
<span id="cb68-3"><a href="#cb68-3"></a>df[<span class="st">"city"</span>] <span class="op">=</span> city</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="c41bc265-ea83-4d11-8377-a6f855d86adf" class="cell" data-tags="[]" data-execution_count="132">
<div class="sourceCode cell-code" id="cb69"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb69-1"><a href="#cb69-1"></a>df.city.value_counts()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="132">
<pre><code>city
강원도        10
대전광역시      10
광주광역시      10
경기도         9
제주특별자치도     8
경상남도        8
세종특별자치시     7
경상북도        6
인천광역시       6
충청남도        6
서울특별시       6
대구광역시       3
충청북도        3
울산광역시       2
부산광역시       2
전라북도        2
전라남도        2
Name: count, dtype: int64</code></pre>
</div>
</div>
</section>
<section id="사용자가-다음과-같이-조건을-걸었다고-가정" class="level3">
<h3 class="anchored" data-anchor-id="사용자가-다음과-같이-조건을-걸었다고-가정">사용자가 다음과 같이 조건을 걸었다고 가정</h3>
<div id="8d24c9b6-0798-4038-90f3-9463a3d6dd02" class="cell" data-tags="[]" data-execution_count="133">
<div class="sourceCode cell-code" id="cb71"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb71-1"><a href="#cb71-1"></a>df[<span class="st">"일자"</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="133">
<pre><code>49   2023-08-29
60   2023-08-29
54   2023-08-29
44   2023-08-29
9    2023-08-30
        ...    
19   2023-11-03
77   2023-11-03
68   2023-11-03
2    2023-11-04
45   2023-11-06
Name: 일자, Length: 100, dtype: datetime64[ns]</code></pre>
</div>
</div>
<p><code>-</code> 강원도, 토픽1, 날짜 : <code>2023-08-29 ~ 2023-09-29</code></p>
<div id="c1654bd7-d47e-40db-bfa0-121698864c9e" class="cell" data-tags="[]" data-execution_count="212">
<div class="sourceCode cell-code" id="cb73"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb73-1"><a href="#cb73-1"></a>input_city <span class="op">=</span> <span class="st">"강원도"</span></span>
<span id="cb73-2"><a href="#cb73-2"></a>input_topic <span class="op">=</span> <span class="dv">1</span></span>
<span id="cb73-3"><a href="#cb73-3"></a>input_date_start <span class="op">=</span> <span class="st">"2023-10-14"</span></span>
<span id="cb73-4"><a href="#cb73-4"></a>input_date_end <span class="op">=</span> <span class="st">"2023-11-01"</span></span>
<span id="cb73-5"><a href="#cb73-5"></a>select_language <span class="op">=</span> <span class="st">"English"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="a79e75b5-9a19-4ba3-9c09-2f6bf4e04602" class="cell" data-tags="[]" data-execution_count="213">
<div class="sourceCode cell-code" id="cb74"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb74-1"><a href="#cb74-1"></a>return_df <span class="op">=</span> df.loc[df[<span class="st">"city"</span>] <span class="op">==</span> input_city]</span>
<span id="cb74-2"><a href="#cb74-2"></a>return_df <span class="op">=</span> return_df[return_df[<span class="st">"topic"</span>] <span class="op">==</span> input_topic]</span>
<span id="cb74-3"><a href="#cb74-3"></a>return_df <span class="op">=</span> return_df.loc[return_df.일자.between(input_date_start, input_date_end)]</span>
<span id="cb74-4"><a href="#cb74-4"></a>return_df.reset_index(drop <span class="op">=</span> <span class="va">True</span>, inplace <span class="op">=</span> <span class="va">True</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="번역-테스트" class="level3">
<h3 class="anchored" data-anchor-id="번역-테스트">번역 테스트</h3>
<div id="2ccbb778-6e88-4e84-a58d-e9b88897f552" class="cell" data-tags="[]" data-execution_count="155">
<div class="sourceCode cell-code" id="cb75"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb75-1"><a href="#cb75-1"></a>article_kr <span class="op">=</span> return_df[<span class="st">"본문"</span>][<span class="dv">0</span>]</span>
<span id="cb75-2"><a href="#cb75-2"></a>title_kr <span class="op">=</span> return_df[<span class="st">"제목"</span>][<span class="dv">0</span>]</span>
<span id="cb75-3"><a href="#cb75-3"></a>topic_kr <span class="op">=</span> return_df[<span class="st">"topic"</span>][<span class="dv">0</span>]</span>
<span id="cb75-4"><a href="#cb75-4"></a>date <span class="op">=</span> return_df[<span class="st">"일자"</span>][<span class="dv">0</span>]</span>
<span id="cb75-5"><a href="#cb75-5"></a>language <span class="op">=</span> lang_dict[select_language]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="18f5747f-7fb8-419b-bd8a-b01e9805233e" class="cell" data-tags="[]" data-execution_count="169">
<div class="sourceCode cell-code" id="cb76"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb76-1"><a href="#cb76-1"></a>tokenizer.src_lang <span class="op">=</span> <span class="st">"ko_KR"</span> <span class="co">## 디폴트 한국어 고정</span></span>
<span id="cb76-2"><a href="#cb76-2"></a></span>
<span id="cb76-3"><a href="#cb76-3"></a>encoded_article_kr <span class="op">=</span> tokenizer(article_kr, return_tensors<span class="op">=</span><span class="st">"pt"</span>)</span>
<span id="cb76-4"><a href="#cb76-4"></a>encoded_title_kr <span class="op">=</span> tokenizer(title_kr, return_tensors<span class="op">=</span><span class="st">"pt"</span>)</span>
<span id="cb76-5"><a href="#cb76-5"></a><span class="co">#encoded_topic_kr = tokenizer(article_kr, return_tensors="pt")</span></span>
<span id="cb76-6"><a href="#cb76-6"></a></span>
<span id="cb76-7"><a href="#cb76-7"></a>generated_article <span class="op">=</span> model.generate(</span>
<span id="cb76-8"><a href="#cb76-8"></a>                        <span class="op">**</span>encoded_article_kr,</span>
<span id="cb76-9"><a href="#cb76-9"></a>                        forced_bos_token_id <span class="op">=</span> tokenizer.lang_code_to_id[language])</span>
<span id="cb76-10"><a href="#cb76-10"></a></span>
<span id="cb76-11"><a href="#cb76-11"></a>generated_title <span class="op">=</span> model.generate(</span>
<span id="cb76-12"><a href="#cb76-12"></a>                        <span class="op">**</span>encoded_title_kr,</span>
<span id="cb76-13"><a href="#cb76-13"></a>                        forced_bos_token_id <span class="op">=</span> tokenizer.lang_code_to_id[language])</span>
<span id="cb76-14"><a href="#cb76-14"></a><span class="co">#generated_topic = model.generate(</span></span>
<span id="cb76-15"><a href="#cb76-15"></a> <span class="co">#                       **encoded_topic_kr,</span></span>
<span id="cb76-16"><a href="#cb76-16"></a>  <span class="co">#                      forced_bos_token_id = tokenizer.lang_code_to_id[language])</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="ffa6670b-b1c9-4117-b589-4600dcfe29a8" class="cell" data-tags="[]" data-execution_count="202">
<div class="sourceCode cell-code" id="cb77"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb77-1"><a href="#cb77-1"></a>df</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="202">
<div>
<div>


<table class="dataframe table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">Unnamed: 0</th>
<th data-quarto-table-cell-role="th">뉴스 식별자</th>
<th data-quarto-table-cell-role="th">일자</th>
<th data-quarto-table-cell-role="th">제목</th>
<th data-quarto-table-cell-role="th">본문</th>
<th data-quarto-table-cell-role="th">URL</th>
<th data-quarto-table-cell-role="th">topic</th>
<th data-quarto-table-cell-role="th">keyword</th>
<th data-quarto-table-cell-role="th">summary_text</th>
<th data-quarto-table-cell-role="th">위험도</th>
<th data-quarto-table-cell-role="th">city</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">49</td>
<td>19388</td>
<td>2.100311e+06</td>
<td>2023-08-29</td>
<td>尹 카눈 피해 심각 지자체 3곳 특별재난지역 추가 선포</td>
<td>윤석열 대통령이 제6호 태풍 카눈으로 인해 대규모 피해가 발생한 강원 고성군 경북 ...</td>
<td>http://www.sedaily.com/NewsView/29TLG4GC12</td>
<td>3</td>
<td>[홍수위로부터, 홍수, 환경분쟁조정을, 피해가, 계획, 지역까지, 지원, 지역, 지...</td>
<td>제6호 태풍 카눈으로 인해 대규모 피해가 발생한 강원 고성군 경북 경주시 산내면 경...</td>
<td>12.492217</td>
<td>경상북도</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">60</td>
<td>19480</td>
<td>2.100501e+06</td>
<td>2023-08-29</td>
<td>'살인 예고글' 전국서 479건 23명 구속</td>
<td>신림동 흉기난동 이후 229건 검거 \n \n 대구국제공항에 대한 '폭탄테러'와 공...</td>
<td>http://www.fnnews.com/news/202308290954412819</td>
<td>3</td>
<td>[홍수위로부터, 홍수, 환경분쟁조정을, 피해가, 계획, 지역까지, 지원, 지역, 지...</td>
<td>대구국제공항에 대한 '폭탄테러'와 공항 이용객 불특정 다수를 상대로 '흉기난동'이 ...</td>
<td>1.554176</td>
<td>전라북도</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">54</td>
<td>19282</td>
<td>2.100851e+06</td>
<td>2023-08-29</td>
<td>10호 태풍 '담레이' 일본 삿포로 해상에서 소멸</td>
<td>제10호 태풍 '담레이' 경로. 담레이는 29일 오후 3시에 소멸했다. [자료=기상...</td>
<td>https://www.ajunews.com/view/20230829171154152</td>
<td>1</td>
<td>[홍수위로부터, 홍수, 환경분쟁조정을, 피해가, 계획, 지역까지, 지원, 지역, 지...</td>
<td>29일 낮 낮 일본 삿포로 인근 해상에서 소멸된 제10호 태풍 '담레이'가 29일 ...</td>
<td>12.258479</td>
<td>대전광역시</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">44</td>
<td>19317</td>
<td>7.100501e+06</td>
<td>2023-08-29</td>
<td>한난, '2023년 재난대응 안전한국훈련' 시행</td>
<td>한국지역난방공사는 29일 경기 파주시 지사에서 행정안전부가 주관하는 '2023년 제...</td>
<td>http://www.etnews.com/20230829000284</td>
<td>-1</td>
<td>[홍수위로부터, 홍수, 환경분쟁조정을, 피해가, 계획, 지역까지, 지원, 지역, 지...</td>
<td>한국지역난방공사는 29일 경기 파주시 지사에서 중앙부처와 지방자치단체, 공공기관, ...</td>
<td>8.469362</td>
<td>세종특별자치시</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">9</td>
<td>18922</td>
<td>1.100701e+06</td>
<td>2023-08-30</td>
<td>日 “간토대지진 조선인 학살 사실 파악 기록 없어”</td>
<td>일본 정부가 올해로 100주년을 맞은 간토대지진 당시 군대와 경찰, 민간인으로 이뤄...</td>
<td>http://www.segye.com/content/html/2023/08/30/2...</td>
<td>2</td>
<td>[홍수위로부터, 홍수, 환경분쟁조정을, 피해가, 계획, 지역까지, 지원, 지역, 지...</td>
<td>일본 정부가 올해로 100주년을 맞은 간토대지진 당시 군대와 경찰, 민간인으로 이뤄...</td>
<td>2.554163</td>
<td>대구광역시</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">19</td>
<td>786</td>
<td>2.100501e+06</td>
<td>2023-11-03</td>
<td>전세계 울린 “다섯 아이 구해 나온 '가자지구 아버지'...가짜였다 '충격'</td>
<td>지난달 28일 프랑스 주재 중국 대사관이 공유한 사진. 인공지능(AI)을 동원한 가...</td>
<td>http://www.fnnews.com/news/202311030642049849</td>
<td>1</td>
<td>[홍수위로부터, 홍수, 환경분쟁조정을, 피해가, 계획, 지역까지, 지원, 지역, 지...</td>
<td>인공지능(AII)을 동원한 가짜 사진으로 판명났지만, 2일 현재 내리지 않고 있으며...</td>
<td>2.066899</td>
<td>충청남도</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">77</td>
<td>845</td>
<td>1.400701e+06</td>
<td>2023-11-03</td>
<td>[국비 확보전 본격화] 세종의사당 대통령 제2집무실 추진 행정수도 인프라 조성 '핵심'</td>
<td>[충청투데이 강대묵 기자] 세종시의 내년도 정부예산안의 핵심 포인트는 ‘행정수도 인...</td>
<td>https://www.cctoday.co.kr/news/articleView.htm...</td>
<td>3</td>
<td>[홍수위로부터, 홍수, 환경분쟁조정을, 피해가, 계획, 지역까지, 지원, 지역, 지...</td>
<td>세종시의 내년도 정부예산안의 핵심 포인트는 ‘행정수도 인프라 조성’이며 국회 세종의...</td>
<td>6.152156</td>
<td>제주특별자치도</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">68</td>
<td>573</td>
<td>8.100401e+06</td>
<td>2023-11-03</td>
<td>"휴전은 없다!" 가자시티 포위...대량살상에 확전우려까지</td>
<td>[앵커]\n이스라엘이 가자시티를 포위하면서 하마스와의 전쟁이 본격적인 시가전 국면에...</td>
<td>https://www.ytn.co.kr/_ln/0104_202311032220204506</td>
<td>1</td>
<td>[홍수위로부터, 홍수, 환경분쟁조정을, 피해가, 계획, 지역까지, 지원, 지역, 지...</td>
<td>이스라엘이 가자시티를 포위하면서 하마스와의 전쟁이 본격적인 시가전 국면에 돌입하였으...</td>
<td>12.807173</td>
<td>강원도</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">2</td>
<td>486</td>
<td>1.100101e+06</td>
<td>2023-11-04</td>
<td>하마스 “이스라엘의 학교 겨냥 공격으로 20명 사망”</td>
<td>팔레스타인 가자지구의 학교를 겨냥한 이스라엘군의 공습으로 20명이 사망했다고 팔레스...</td>
<td>https://www.khan.co.kr/world/world-general/art...</td>
<td>1</td>
<td>[홍수위로부터, 홍수, 환경분쟁조정을, 피해가, 계획, 지역까지, 지원, 지역, 지...</td>
<td>팔레스타인 가자지구의 학교를 겨냥한 이스라엘군의 공습으로 20명이 사망했다고 팔레스...</td>
<td>9.579531</td>
<td>강원도</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">45</td>
<td>95</td>
<td>1.100501e+06</td>
<td>2023-11-06</td>
<td>가자지구 사망자 1만명 육박 70%가 어린이 여성 희생자</td>
<td>이 포위로 식량 물 의료 부족\n\n튀르키예 “야전병원 선박 입항”\n\n\n\n ...</td>
<td>http://www.munhwa.com/news/view.html?no=202311...</td>
<td>1</td>
<td>[홍수위로부터, 홍수, 환경분쟁조정을, 피해가, 계획, 지역까지, 지원, 지역, 지...</td>
<td>이스라엘과 팔레스타인 무장정파 하마스의 전쟁이 한 달째 이어지면서 가자지구 사망자가...</td>
<td>1.968676</td>
<td>경기도</td>
</tr>
</tbody>
</table>

<p>100 rows × 11 columns</p>
</div>
</div>
</div>
</div>
<div id="19cb3211-1f5c-4910-8a69-cd83f71ac0e6" class="cell" data-tags="[]" data-execution_count="170">
<div class="sourceCode cell-code" id="cb78"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb78-1"><a href="#cb78-1"></a>trans_article <span class="op">=</span> tokenizer.batch_decode(generated_article, skip_special_tokens<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb78-2"><a href="#cb78-2"></a>trans_title <span class="op">=</span> tokenizer.batch_decode(generated_title, skip_special_tokens<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb78-3"><a href="#cb78-3"></a><span class="co">#trans_topic = tokenizer.batch_decode(generated_topic, skip_special_tokens=True)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="f3049d44-7436-428f-ac0b-942f890a7963" class="cell" data-tags="[]" data-execution_count="173">
<div class="sourceCode cell-code" id="cb79"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb79-1"><a href="#cb79-1"></a>trans_article</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="173">
<pre><code>["[Manya Today, PADO Editor-in-Chief] [Editor-in-Chief] The Palestinian armed group Hamas has launched a massive attack on Israel, launching thousands of rockets, and then the ground forces have invaded Israeli territory and brutally murdered and abducted civilians, perhaps killing civilians, and exposing the scenes of these murders has provoked Israel's retaliatory response to the war that was waged between Israel and the Arabs."]</code></pre>
</div>
</div>
</section>
</section>
<section id="위-과정을-함수로-작성" class="level2">
<h2 class="anchored" data-anchor-id="위-과정을-함수로-작성">위 과정을 함수로 작성</h2>
<div id="d90f1ac9-9bdc-42d7-80db-f0dc05bfda89" class="cell" data-tags="[]" data-execution_count="277">
<div class="sourceCode cell-code" id="cb81"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb81-1"><a href="#cb81-1"></a><span class="kw">def</span> translate(df, city, topic, start_date, end_date, output_language) :</span>
<span id="cb81-2"><a href="#cb81-2"></a>    return_df <span class="op">=</span> df.loc[df[<span class="st">"city"</span>] <span class="op">==</span> input_city]</span>
<span id="cb81-3"><a href="#cb81-3"></a>    return_df <span class="op">=</span> return_df[return_df[<span class="st">"topic"</span>] <span class="op">==</span> input_topic]</span>
<span id="cb81-4"><a href="#cb81-4"></a>    return_df <span class="op">=</span> return_df.loc[return_df.일자.between(input_date_start, input_date_end)]</span>
<span id="cb81-5"><a href="#cb81-5"></a>    return_df.reset_index(drop <span class="op">=</span> <span class="va">True</span>, inplace <span class="op">=</span> <span class="va">True</span>)</span>
<span id="cb81-6"><a href="#cb81-6"></a>    <span class="cf">if</span> <span class="bu">len</span>(return_df) <span class="op">==</span> <span class="dv">0</span> : <span class="bu">print</span>(<span class="st">"No Result"</span>)</span>
<span id="cb81-7"><a href="#cb81-7"></a>    </span>
<span id="cb81-8"><a href="#cb81-8"></a>    <span class="cf">else</span> : </span>
<span id="cb81-9"><a href="#cb81-9"></a>        trans_date <span class="op">=</span> []</span>
<span id="cb81-10"><a href="#cb81-10"></a>        trans_topic <span class="op">=</span> []</span>
<span id="cb81-11"><a href="#cb81-11"></a>        trans_title <span class="op">=</span> []</span>
<span id="cb81-12"><a href="#cb81-12"></a>        trans_keyword <span class="op">=</span> []</span>
<span id="cb81-13"><a href="#cb81-13"></a>        trans_article <span class="op">=</span> []</span>
<span id="cb81-14"><a href="#cb81-14"></a>        trans_summary <span class="op">=</span> []</span>
<span id="cb81-15"><a href="#cb81-15"></a>        <span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(<span class="bu">len</span>(return_df)) :</span>
<span id="cb81-16"><a href="#cb81-16"></a>            summary_kr <span class="op">=</span> return_df[<span class="st">"summary_text"</span>][i]</span>
<span id="cb81-17"><a href="#cb81-17"></a>            article_kr <span class="op">=</span> return_df[<span class="st">"본문"</span>][i]</span>
<span id="cb81-18"><a href="#cb81-18"></a>            title_kr <span class="op">=</span> return_df[<span class="st">"제목"</span>][i]</span>
<span id="cb81-19"><a href="#cb81-19"></a>            keyword_kr <span class="op">=</span> return_df[<span class="st">"keyword"</span>][i]</span>
<span id="cb81-20"><a href="#cb81-20"></a>            topic_kr <span class="op">=</span> return_df[<span class="st">"topic"</span>][i]</span>
<span id="cb81-21"><a href="#cb81-21"></a>            date <span class="op">=</span> return_df[<span class="st">"일자"</span>][i]</span>
<span id="cb81-22"><a href="#cb81-22"></a>            </span>
<span id="cb81-23"><a href="#cb81-23"></a>            </span>
<span id="cb81-24"><a href="#cb81-24"></a>            language <span class="op">=</span> lang_dict[output_language] <span class="co">## output 언어 설정</span></span>
<span id="cb81-25"><a href="#cb81-25"></a>            tokenizer.src_lang <span class="op">=</span> <span class="st">"ko_KR"</span> <span class="co">## input 한국어로 고정</span></span>
<span id="cb81-26"><a href="#cb81-26"></a>            </span>
<span id="cb81-27"><a href="#cb81-27"></a>            encoded_summary_kr <span class="op">=</span> tokenizer(summary_kr, return_tensors <span class="op">=</span> <span class="st">"pt"</span>)</span>
<span id="cb81-28"><a href="#cb81-28"></a>            encoded_article_kr <span class="op">=</span> tokenizer(article_kr, return_tensors<span class="op">=</span> <span class="st">"pt"</span>)</span>
<span id="cb81-29"><a href="#cb81-29"></a>            encoded_title_kr <span class="op">=</span> tokenizer(title_kr, return_tensors<span class="op">=</span> <span class="st">"pt"</span>)</span>
<span id="cb81-30"><a href="#cb81-30"></a>            encoded_keyword_kr <span class="op">=</span> tokenizer(keyword_kr, return_tensors<span class="op">=</span> <span class="st">"pt"</span>)</span>
<span id="cb81-31"><a href="#cb81-31"></a>            <span class="co">#encoded_topic_kr = tokenizer(topic_kr, return_tensors="pt")</span></span>
<span id="cb81-32"><a href="#cb81-32"></a>            </span>
<span id="cb81-33"><a href="#cb81-33"></a>            generated_article <span class="op">=</span> model.generate(</span>
<span id="cb81-34"><a href="#cb81-34"></a>                            <span class="op">**</span>encoded_article_kr,</span>
<span id="cb81-35"><a href="#cb81-35"></a>                            forced_bos_token_id <span class="op">=</span> tokenizer.lang_code_to_id[language])</span>
<span id="cb81-36"><a href="#cb81-36"></a></span>
<span id="cb81-37"><a href="#cb81-37"></a>            generated_title <span class="op">=</span> model.generate(</span>
<span id="cb81-38"><a href="#cb81-38"></a>                            <span class="op">**</span>encoded_title_kr,</span>
<span id="cb81-39"><a href="#cb81-39"></a>                            forced_bos_token_id <span class="op">=</span> tokenizer.lang_code_to_id[language])</span>
<span id="cb81-40"><a href="#cb81-40"></a>            </span>
<span id="cb81-41"><a href="#cb81-41"></a>            generated_keyword <span class="op">=</span> model.generate(</span>
<span id="cb81-42"><a href="#cb81-42"></a>                            <span class="op">**</span>encoded_keyword_kr,</span>
<span id="cb81-43"><a href="#cb81-43"></a>                            forced_bos_token_id <span class="op">=</span> tokenizer.lang_code_to_id[language])</span>
<span id="cb81-44"><a href="#cb81-44"></a>            </span>
<span id="cb81-45"><a href="#cb81-45"></a>            generated_summary <span class="op">=</span> model.generate(</span>
<span id="cb81-46"><a href="#cb81-46"></a>                            <span class="op">**</span>encoded_summary_kr,</span>
<span id="cb81-47"><a href="#cb81-47"></a>                            forced_bos_token_id <span class="op">=</span> tokenizer.lang_code_to_id[language])</span>
<span id="cb81-48"><a href="#cb81-48"></a>            </span>
<span id="cb81-49"><a href="#cb81-49"></a>            <span class="co">#generated_topic = model.generate(</span></span>
<span id="cb81-50"><a href="#cb81-50"></a>     <span class="co">#                       **encoded_topic_kr,</span></span>
<span id="cb81-51"><a href="#cb81-51"></a>      <span class="co">#                      forced_bos_token_id = tokenizer.lang_code_to_id[language])</span></span>
<span id="cb81-52"><a href="#cb81-52"></a>            </span>
<span id="cb81-53"><a href="#cb81-53"></a>            trans_date.append(date)</span>
<span id="cb81-54"><a href="#cb81-54"></a>            trans_article.append(tokenizer.batch_decode(generated_article, skip_special_tokens<span class="op">=</span><span class="va">True</span>))</span>
<span id="cb81-55"><a href="#cb81-55"></a>            trans_title.append(tokenizer.batch_decode(generated_title, skip_special_tokens<span class="op">=</span><span class="va">True</span>))</span>
<span id="cb81-56"><a href="#cb81-56"></a>            trans_keyword.append(tokenizer.batch_decode(generated_keyword, skip_special_tokens<span class="op">=</span><span class="va">True</span>))</span>
<span id="cb81-57"><a href="#cb81-57"></a>            trans_summary.append(tokenizer.batch_decode(generated_summary, skip_special_tokens<span class="op">=</span><span class="va">True</span>))</span>
<span id="cb81-58"><a href="#cb81-58"></a>            </span>
<span id="cb81-59"><a href="#cb81-59"></a>            <span class="co">#trans_topic.append(tokenizer.batch_decode(generated_topic, skip_special_tokens=True))</span></span>
<span id="cb81-60"><a href="#cb81-60"></a>        trans_df <span class="op">=</span> pd.DataFrame({<span class="st">"date"</span> : trans_date,</span>
<span id="cb81-61"><a href="#cb81-61"></a>                                 <span class="st">"title"</span> : trans_title,</span>
<span id="cb81-62"><a href="#cb81-62"></a>                                 <span class="st">"topic"</span> : topic_kr,</span>
<span id="cb81-63"><a href="#cb81-63"></a>                                 <span class="st">"keyword"</span> : trans_keyword, </span>
<span id="cb81-64"><a href="#cb81-64"></a>                                 <span class="st">"article"</span> : trans_article,</span>
<span id="cb81-65"><a href="#cb81-65"></a>                                 <span class="st">"summary_text"</span> : trans_summary})</span>
<span id="cb81-66"><a href="#cb81-66"></a>        <span class="cf">return</span> trans_df</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="396de60c-ff91-444c-b738-60197384ec5a" class="cell" data-tags="[]" data-execution_count="273">
<div class="sourceCode cell-code" id="cb82"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb82-1"><a href="#cb82-1"></a>city <span class="op">=</span> <span class="st">"강원도"</span></span>
<span id="cb82-2"><a href="#cb82-2"></a>topic <span class="op">=</span> <span class="dv">1</span></span>
<span id="cb82-3"><a href="#cb82-3"></a>start_date <span class="op">=</span> <span class="st">"2023-10-14"</span></span>
<span id="cb82-4"><a href="#cb82-4"></a>end_date <span class="op">=</span> <span class="st">"2023-11-01"</span></span>
<span id="cb82-5"><a href="#cb82-5"></a>output_language <span class="op">=</span> <span class="st">"English"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="104e2904-2a7f-4e2a-9aed-9921ddf991ef" class="cell" data-tags="[]" data-execution_count="278">
<div class="sourceCode cell-code" id="cb83"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb83-1"><a href="#cb83-1"></a>result <span class="op">=</span> translate(df, city, topic, start_date, end_date, output_language)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="6b4c0536-4e0b-4122-897c-5286f739f1ca" class="cell" data-tags="[]" data-execution_count="279">
<div class="sourceCode cell-code" id="cb84"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb84-1"><a href="#cb84-1"></a>result</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="279">
<div>
<div>


<table class="dataframe table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">date</th>
<th data-quarto-table-cell-role="th">title</th>
<th data-quarto-table-cell-role="th">topic</th>
<th data-quarto-table-cell-role="th">keyword</th>
<th data-quarto-table-cell-role="th">article</th>
<th data-quarto-table-cell-role="th">summary_text</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">0</td>
<td>2023-10-14</td>
<td>[A former U.S. ambassador to Israel analyzing ...</td>
<td>1</td>
<td>[Symptoms are parasitic, nectar nectar nectar,...</td>
<td>[[Manya Today, PADO Editor-in-Chief] [Editor-i...</td>
<td>[The Palestinian armed group Hamas had launche...</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1</td>
<td>2023-10-16</td>
<td>[Iranian Revolutionary Guards Move Closer to I...</td>
<td>1</td>
<td>[The Israeli-Palestinian conflict in Gaza has ...</td>
<td>[In the wake of reports that Syrian troops fro...</td>
<td>[With the possibility of an Israeli-Hamas war ...</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2</td>
<td>2023-10-26</td>
<td>["You must remove the enemy's heart and liver,...</td>
<td>1</td>
<td>[Buildings, urban buildings, African villages,...</td>
<td>[In the midst of the Palestinian armed Hamas a...</td>
<td>[In the midst of the Palestinian armed Hamas a...</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
</div>
<p><code>-</code> 아 마지막 이렇게 결과 반환하는 거 너무 오래걸린다….</p>
<div id="645e5eab-e658-4c1f-a370-9af69ad47176" class="cell" data-tags="[]" data-execution_count="280">
<div class="sourceCode cell-code" id="cb85"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb85-1"><a href="#cb85-1"></a><span class="bu">print</span>(result[<span class="st">"title"</span>][<span class="dv">0</span>][<span class="dv">0</span>])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>A former U.S. ambassador to Israel analyzing the Israeli-Hamas War [PADO].</code></pre>
</div>
</div>
<div id="cb01aae8-c5ee-4daf-b8b3-e7b971a0979f" class="cell" data-tags="[]" data-execution_count="281">
<div class="sourceCode cell-code" id="cb87"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb87-1"><a href="#cb87-1"></a><span class="bu">print</span>(result[<span class="st">"keyword"</span>][<span class="dv">0</span>][<span class="dv">0</span>])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Symptoms are parasitic, nectar nectar nectar, 487 weeks of bugs, 18 days in the trees, 21 days in August improvements, most of which are feces and methasoccus.</code></pre>
</div>
</div>
<div id="3efe6ba3-a027-4fd2-8e25-f6b1d3d66aa7" class="cell" data-tags="[]" data-execution_count="282">
<div class="sourceCode cell-code" id="cb89"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb89-1"><a href="#cb89-1"></a><span class="bu">print</span>(result[<span class="st">"summary_text"</span>][<span class="dv">0</span>][<span class="dv">0</span>])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>The Palestinian armed group Hamas had launched a massive attack on Israel, fired thousands of missiles, invaded Israeli territory, and brutally murdered and abducted civilians, and even killed and maimed civilians, exposing the scene of the killing, provoking an Israeli retaliatory campaign called the Israeli-Arab War, the Israeli-Arab War.</code></pre>
</div>
</div>
<div id="5ad64a3d-592e-4b17-96f1-737adccda689" class="cell" data-tags="[]" data-execution_count="266">
<div class="sourceCode cell-code" id="cb91"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb91-1"><a href="#cb91-1"></a><span class="bu">print</span>(result[<span class="st">"article"</span>][<span class="dv">0</span>][<span class="dv">0</span>])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[Manya Today, PADO Editor-in-Chief] [Editor-in-Chief] The Palestinian armed group Hamas has launched a massive attack on Israel, launching thousands of rockets, and then the ground forces have invaded Israeli territory and brutally murdered and abducted civilians, perhaps killing civilians, and exposing the scenes of these murders has provoked Israel's retaliatory response to the war that was waged between Israel and the Arabs.</code></pre>
</div>
</div>


</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="../../../posts/big projects/AI PORT/2024-01-05.04. prototype.html" class="pagination-link" aria-label="04. prototype">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text">04. prototype</span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="../../../posts/big projects/Do, Nation/2023-11-05-00. 기획서.html" class="pagination-link" aria-label="00. 기획서">
        <span class="nav-page-text">00. 기획서</span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->




</body></html>